function Lb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var tw={exports:{}},Iu={},nw={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ua=Symbol.for("react.element"),Fb=Symbol.for("react.portal"),Ub=Symbol.for("react.fragment"),$b=Symbol.for("react.strict_mode"),Bb=Symbol.for("react.profiler"),zb=Symbol.for("react.provider"),Hb=Symbol.for("react.context"),Wb=Symbol.for("react.forward_ref"),qb=Symbol.for("react.suspense"),Gb=Symbol.for("react.memo"),Kb=Symbol.for("react.lazy"),by=Symbol.iterator;function Qb(t){return t===null||typeof t!="object"?null:(t=by&&t[by]||t["@@iterator"],typeof t=="function"?t:null)}var rw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sw=Object.assign,iw={};function Hi(t,e,n){this.props=t,this.context=e,this.refs=iw,this.updater=n||rw}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ow(){}ow.prototype=Hi.prototype;function Sp(t,e,n){this.props=t,this.context=e,this.refs=iw,this.updater=n||rw}var bp=Sp.prototype=new ow;bp.constructor=Sp;sw(bp,Hi.prototype);bp.isPureReactComponent=!0;var Iy=Array.isArray,aw=Object.prototype.hasOwnProperty,Ip={current:null},lw={key:!0,ref:!0,__self:!0,__source:!0};function cw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)aw.call(e,r)&&!lw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ua,type:t,key:i,ref:o,props:s,_owner:Ip.current}}function Yb(t,e){return{$$typeof:Ua,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ua}function Jb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ky=/\/+/g;function $d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jb(""+t.key):e.toString(36)}function rc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ua:case Fb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+$d(o,0):r,Iy(s)?(n="",t!=null&&(n=t.replace(ky,"$&/")+"/"),rc(s,e,n,"",function(u){return u})):s!=null&&(kp(s)&&(s=Yb(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ky,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Iy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+$d(i,a);o+=rc(i,e,n,l,s)}else if(l=Qb(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+$d(i,a++),o+=rc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bl(t,e,n){if(t==null)return t;var r=[],s=0;return rc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Xb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},sc={transition:null},Zb={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:sc,ReactCurrentOwner:Ip};function uw(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:bl,forEach:function(t,e,n){bl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bl(t,function(){e++}),e},toArray:function(t){return bl(t,function(e){return e})||[]},only:function(t){if(!kp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Hi;se.Fragment=Ub;se.Profiler=Bb;se.PureComponent=Sp;se.StrictMode=$b;se.Suspense=qb;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zb;se.act=uw;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ip.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)aw.call(e,l)&&!lw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ua,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:Hb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zb,_context:t},t.Consumer=t};se.createElement=cw;se.createFactory=function(t){var e=cw.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:Wb,render:t}};se.isValidElement=kp;se.lazy=function(t){return{$$typeof:Kb,_payload:{_status:-1,_result:t},_init:Xb}};se.memo=function(t,e){return{$$typeof:Gb,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=sc.transition;sc.transition={};try{t()}finally{sc.transition=e}};se.unstable_act=uw;se.useCallback=function(t,e){return Et.current.useCallback(t,e)};se.useContext=function(t){return Et.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};se.useEffect=function(t,e){return Et.current.useEffect(t,e)};se.useId=function(){return Et.current.useId()};se.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Et.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};se.useRef=function(t){return Et.current.useRef(t)};se.useState=function(t){return Et.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Et.current.useTransition()};se.version="18.3.1";nw.exports=se;var L=nw.exports;const Ce=Mb(L),eI=Lb({__proto__:null,default:Ce},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI=L,nI=Symbol.for("react.element"),rI=Symbol.for("react.fragment"),sI=Object.prototype.hasOwnProperty,iI=tI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oI={key:!0,ref:!0,__self:!0,__source:!0};function dw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sI.call(e,r)&&!oI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nI,type:t,key:i,ref:o,props:s,_owner:iI.current}}Iu.Fragment=rI;Iu.jsx=dw;Iu.jsxs=dw;tw.exports=Iu;var d=tw.exports,hw={exports:{}},$t={},fw={exports:{}},pw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,z){var q=V.length;V.push(z);e:for(;0<q;){var he=q-1>>>1,ue=V[he];if(0<s(ue,z))V[he]=z,V[q]=ue,q=he;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var z=V[0],q=V.pop();if(q!==z){V[0]=q;e:for(var he=0,ue=V.length,Re=ue>>>1;he<Re;){var Nn=2*(he+1)-1,Rn=V[Nn],jn=Nn+1,On=V[jn];if(0>s(Rn,q))jn<ue&&0>s(On,Rn)?(V[he]=On,V[jn]=q,he=jn):(V[he]=Rn,V[Nn]=q,he=Nn);else if(jn<ue&&0>s(On,q))V[he]=On,V[jn]=q,he=jn;else break e}}return z}function s(V,z){var q=V.sortIndex-z.sortIndex;return q!==0?q:V.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,m=3,v=!1,x=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=V)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function N(V){if(S=!1,w(V),!x)if(n(l)!==null)x=!0,J(O);else{var z=n(u);z!==null&&ne(N,z.startTime-V)}}function O(V,z){x=!1,S&&(S=!1,_(E),E=-1),v=!0;var q=m;try{for(w(z),f=n(l);f!==null&&(!(f.expirationTime>z)||V&&!A());){var he=f.callback;if(typeof he=="function"){f.callback=null,m=f.priorityLevel;var ue=he(f.expirationTime<=z);z=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(l)&&r(l),w(z)}else r(l);f=n(l)}if(f!==null)var Re=!0;else{var Nn=n(u);Nn!==null&&ne(N,Nn.startTime-z),Re=!1}return Re}finally{f=null,m=q,v=!1}}var j=!1,T=null,E=-1,I=5,k=-1;function A(){return!(t.unstable_now()-k<I)}function R(){if(T!==null){var V=t.unstable_now();k=V;var z=!0;try{z=T(!0,V)}finally{z?C():(j=!1,T=null)}}else j=!1}var C;if(typeof y=="function")C=function(){y(R)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Te=pe.port2;pe.port1.onmessage=R,C=function(){Te.postMessage(null)}}else C=function(){P(R,0)};function J(V){T=V,j||(j=!0,C())}function ne(V,z){E=P(function(){V(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,J(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var q=m;m=z;try{return V()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=m;m=V;try{return z()}finally{m=q}},t.unstable_scheduleCallback=function(V,z,q){var he=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?he+q:he):q=he,V){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=q+ue,V={id:h++,callback:z,priorityLevel:V,startTime:q,expirationTime:ue,sortIndex:-1},q>he?(V.sortIndex=q,e(u,V),n(l)===null&&V===n(u)&&(S?(_(E),E=-1):S=!0,ne(N,q-he))):(V.sortIndex=ue,e(l,V),x||v||(x=!0,J(O))),V},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(V){var z=m;return function(){var q=m;m=z;try{return V.apply(this,arguments)}finally{m=q}}}})(pw);fw.exports=pw;var aI=fw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI=L,Ut=aI;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mw=new Set,aa={};function js(t,e){ki(t,e),ki(t+"Capture",e)}function ki(t,e){for(aa[t]=e,t=0;t<e.length;t++)mw.add(e[t])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hh=Object.prototype.hasOwnProperty,cI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Py={},Cy={};function uI(t){return Hh.call(Cy,t)?!0:Hh.call(Py,t)?!1:cI.test(t)?Cy[t]=!0:(Py[t]=!0,!1)}function dI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hI(t,e,n,r){if(e===null||typeof e>"u"||dI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pp=/[\-:]([a-z])/g;function Cp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pp,Cp);et[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pp,Cp);et[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pp,Cp);et[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ap(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hI(e,n,s,r)&&(n=null),r||s===null?uI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ir=lI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),ri=Symbol.for("react.portal"),si=Symbol.for("react.fragment"),Np=Symbol.for("react.strict_mode"),Wh=Symbol.for("react.profiler"),gw=Symbol.for("react.provider"),yw=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),qh=Symbol.for("react.suspense"),Gh=Symbol.for("react.suspense_list"),jp=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),vw=Symbol.for("react.offscreen"),Ay=Symbol.iterator;function yo(t){return t===null||typeof t!="object"?null:(t=Ay&&t[Ay]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Bd;function ko(t){if(Bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bd=e&&e[1]||""}return`
`+Bd+t}var zd=!1;function Hd(t,e){if(!t||zd)return"";zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ko(t):""}function fI(t){switch(t.tag){case 5:return ko(t.type);case 16:return ko("Lazy");case 13:return ko("Suspense");case 19:return ko("SuspenseList");case 0:case 2:case 15:return t=Hd(t.type,!1),t;case 11:return t=Hd(t.type.render,!1),t;case 1:return t=Hd(t.type,!0),t;default:return""}}function Kh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case si:return"Fragment";case ri:return"Portal";case Wh:return"Profiler";case Np:return"StrictMode";case qh:return"Suspense";case Gh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yw:return(t.displayName||"Context")+".Consumer";case gw:return(t._context.displayName||"Context")+".Provider";case Rp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jp:return e=t.displayName||null,e!==null?e:Kh(t.type)||"Memo";case hr:e=t._payload,t=t._init;try{return Kh(t(e))}catch{}}return null}function pI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kh(e);case 8:return e===Np?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _w(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mI(t){var e=_w(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kl(t){t._valueTracker||(t._valueTracker=mI(t))}function ww(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_w(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qh(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ny(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xw(t,e){e=e.checked,e!=null&&Ap(t,"checked",e,!1)}function Yh(t,e){xw(t,e);var n=Vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jh(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ry(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jh(t,e,n){(e!=="number"||bc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function mi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Po(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function Ew(t,e){var n=Vr(e.value),r=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Oy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pl,Sw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function la(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gI=["Webkit","ms","Moz","O"];Object.keys(Vo).forEach(function(t){gI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vo[e]=Vo[t]})});function bw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vo.hasOwnProperty(t)&&Vo[t]?(""+e).trim():e+"px"}function Iw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var yI=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ef(t,e){if(e){if(yI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function tf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nf=null;function Op(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rf=null,gi=null,yi=null;function Dy(t){if(t=za(t)){if(typeof rf!="function")throw Error($(280));var e=t.stateNode;e&&(e=Nu(e),rf(t.stateNode,t.type,e))}}function kw(t){gi?yi?yi.push(t):yi=[t]:gi=t}function Pw(){if(gi){var t=gi,e=yi;if(yi=gi=null,Dy(t),e)for(t=0;t<e.length;t++)Dy(e[t])}}function Cw(t,e){return t(e)}function Aw(){}var Wd=!1;function Nw(t,e,n){if(Wd)return t(e,n);Wd=!0;try{return Cw(t,e,n)}finally{Wd=!1,(gi!==null||yi!==null)&&(Aw(),Pw())}}function ca(t,e){var n=t.stateNode;if(n===null)return null;var r=Nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var sf=!1;if(Jn)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){sf=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{sf=!1}function vI(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Fo=!1,Ic=null,kc=!1,of=null,_I={onError:function(t){Fo=!0,Ic=t}};function wI(t,e,n,r,s,i,o,a,l){Fo=!1,Ic=null,vI.apply(_I,arguments)}function xI(t,e,n,r,s,i,o,a,l){if(wI.apply(this,arguments),Fo){if(Fo){var u=Ic;Fo=!1,Ic=null}else throw Error($(198));kc||(kc=!0,of=u)}}function Os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ly(t){if(Os(t)!==t)throw Error($(188))}function EI(t){var e=t.alternate;if(!e){if(e=Os(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ly(s),t;if(i===r)return Ly(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function jw(t){return t=EI(t),t!==null?Ow(t):null}function Ow(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ow(t);if(e!==null)return e;t=t.sibling}return null}var Dw=Ut.unstable_scheduleCallback,My=Ut.unstable_cancelCallback,TI=Ut.unstable_shouldYield,SI=Ut.unstable_requestPaint,Oe=Ut.unstable_now,bI=Ut.unstable_getCurrentPriorityLevel,Dp=Ut.unstable_ImmediatePriority,Lw=Ut.unstable_UserBlockingPriority,Pc=Ut.unstable_NormalPriority,II=Ut.unstable_LowPriority,Mw=Ut.unstable_IdlePriority,ku=null,wn=null;function kI(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(ku,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:AI,PI=Math.log,CI=Math.LN2;function AI(t){return t>>>=0,t===0?32:31-(PI(t)/CI|0)|0}var Cl=64,Al=4194304;function Co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Co(a):(i&=o,i!==0&&(r=Co(i)))}else o=n&~s,o!==0?r=Co(o):i!==0&&(r=Co(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dn(e),s=1<<n,r|=t[n],e&=~s;return r}function NI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-dn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=NI(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function af(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vw(){var t=Cl;return Cl<<=1,!(Cl&4194240)&&(Cl=64),t}function qd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function jI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Lp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function Fw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Uw,Mp,$w,Bw,zw,lf=!1,Nl=[],Ir=null,kr=null,Pr=null,ua=new Map,da=new Map,mr=[],OI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vy(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(e.pointerId)}}function _o(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=za(e),e!==null&&Mp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DI(t,e,n,r,s){switch(e){case"focusin":return Ir=_o(Ir,t,e,n,r,s),!0;case"dragenter":return kr=_o(kr,t,e,n,r,s),!0;case"mouseover":return Pr=_o(Pr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ua.set(i,_o(ua.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,da.set(i,_o(da.get(i)||null,t,e,n,r,s)),!0}return!1}function Hw(t){var e=fs(t.target);if(e!==null){var n=Os(e);if(n!==null){if(e=n.tag,e===13){if(e=Rw(n),e!==null){t.blockedOn=e,zw(t.priority,function(){$w(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nf=r,n.target.dispatchEvent(r),nf=null}else return e=za(n),e!==null&&Mp(e),t.blockedOn=n,!1;e.shift()}return!0}function Fy(t,e,n){ic(t)&&n.delete(e)}function LI(){lf=!1,Ir!==null&&ic(Ir)&&(Ir=null),kr!==null&&ic(kr)&&(kr=null),Pr!==null&&ic(Pr)&&(Pr=null),ua.forEach(Fy),da.forEach(Fy)}function wo(t,e){t.blockedOn===e&&(t.blockedOn=null,lf||(lf=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,LI)))}function ha(t){function e(s){return wo(s,t)}if(0<Nl.length){wo(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ir!==null&&wo(Ir,t),kr!==null&&wo(kr,t),Pr!==null&&wo(Pr,t),ua.forEach(e),da.forEach(e),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)Hw(n),n.blockedOn===null&&mr.shift()}var vi=ir.ReactCurrentBatchConfig,Ac=!0;function MI(t,e,n,r){var s=me,i=vi.transition;vi.transition=null;try{me=1,Vp(t,e,n,r)}finally{me=s,vi.transition=i}}function VI(t,e,n,r){var s=me,i=vi.transition;vi.transition=null;try{me=4,Vp(t,e,n,r)}finally{me=s,vi.transition=i}}function Vp(t,e,n,r){if(Ac){var s=cf(t,e,n,r);if(s===null)nh(t,e,r,Nc,n),Vy(t,r);else if(DI(s,t,e,n,r))r.stopPropagation();else if(Vy(t,r),e&4&&-1<OI.indexOf(t)){for(;s!==null;){var i=za(s);if(i!==null&&Uw(i),i=cf(t,e,n,r),i===null&&nh(t,e,r,Nc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else nh(t,e,r,null,n)}}var Nc=null;function cf(t,e,n,r){if(Nc=null,t=Op(r),t=fs(t),t!==null)if(e=Os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nc=t,null}function Ww(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bI()){case Dp:return 1;case Lw:return 4;case Pc:case II:return 16;case Mw:return 536870912;default:return 16}default:return 16}}var xr=null,Fp=null,oc=null;function qw(){if(oc)return oc;var t,e=Fp,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return oc=s.slice(t,1<r?1-r:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function Uy(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rl:Uy,this.isPropagationStopped=Uy,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Up=Bt(Wi),Ba=Ie({},Wi,{view:0,detail:0}),FI=Bt(Ba),Gd,Kd,xo,Pu=Ie({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$p,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xo&&(xo&&t.type==="mousemove"?(Gd=t.screenX-xo.screenX,Kd=t.screenY-xo.screenY):Kd=Gd=0,xo=t),Gd)},movementY:function(t){return"movementY"in t?t.movementY:Kd}}),$y=Bt(Pu),UI=Ie({},Pu,{dataTransfer:0}),$I=Bt(UI),BI=Ie({},Ba,{relatedTarget:0}),Qd=Bt(BI),zI=Ie({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),HI=Bt(zI),WI=Ie({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qI=Bt(WI),GI=Ie({},Wi,{data:0}),By=Bt(GI),KI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YI[t])?!!e[t]:!1}function $p(){return JI}var XI=Ie({},Ba,{key:function(t){if(t.key){var e=KI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$p,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZI=Bt(XI),ek=Ie({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zy=Bt(ek),tk=Ie({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$p}),nk=Bt(tk),rk=Ie({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),sk=Bt(rk),ik=Ie({},Pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ok=Bt(ik),ak=[9,13,27,32],Bp=Jn&&"CompositionEvent"in window,Uo=null;Jn&&"documentMode"in document&&(Uo=document.documentMode);var lk=Jn&&"TextEvent"in window&&!Uo,Gw=Jn&&(!Bp||Uo&&8<Uo&&11>=Uo),Hy=" ",Wy=!1;function Kw(t,e){switch(t){case"keyup":return ak.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ii=!1;function ck(t,e){switch(t){case"compositionend":return Qw(e);case"keypress":return e.which!==32?null:(Wy=!0,Hy);case"textInput":return t=e.data,t===Hy&&Wy?null:t;default:return null}}function uk(t,e){if(ii)return t==="compositionend"||!Bp&&Kw(t,e)?(t=qw(),oc=Fp=xr=null,ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gw&&e.locale!=="ko"?null:e.data;default:return null}}var dk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dk[t.type]:e==="textarea"}function Yw(t,e,n,r){kw(r),e=Rc(e,"onChange"),0<e.length&&(n=new Up("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $o=null,fa=null;function hk(t){ax(t,0)}function Cu(t){var e=li(t);if(ww(e))return t}function fk(t,e){if(t==="change")return e}var Jw=!1;if(Jn){var Yd;if(Jn){var Jd="oninput"in document;if(!Jd){var Gy=document.createElement("div");Gy.setAttribute("oninput","return;"),Jd=typeof Gy.oninput=="function"}Yd=Jd}else Yd=!1;Jw=Yd&&(!document.documentMode||9<document.documentMode)}function Ky(){$o&&($o.detachEvent("onpropertychange",Xw),fa=$o=null)}function Xw(t){if(t.propertyName==="value"&&Cu(fa)){var e=[];Yw(e,fa,t,Op(t)),Nw(hk,e)}}function pk(t,e,n){t==="focusin"?(Ky(),$o=e,fa=n,$o.attachEvent("onpropertychange",Xw)):t==="focusout"&&Ky()}function mk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cu(fa)}function gk(t,e){if(t==="click")return Cu(e)}function yk(t,e){if(t==="input"||t==="change")return Cu(e)}function vk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:vk;function pa(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hh.call(e,s)||!fn(t[s],e[s]))return!1}return!0}function Qy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yy(t,e){var n=Qy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qy(n)}}function Zw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ex(){for(var t=window,e=bc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bc(t.document)}return e}function zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _k(t){var e=ex(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zw(n.ownerDocument.documentElement,n)){if(r!==null&&zp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Yy(n,i);var o=Yy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wk=Jn&&"documentMode"in document&&11>=document.documentMode,oi=null,uf=null,Bo=null,df=!1;function Jy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;df||oi==null||oi!==bc(r)||(r=oi,"selectionStart"in r&&zp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bo&&pa(Bo,r)||(Bo=r,r=Rc(uf,"onSelect"),0<r.length&&(e=new Up("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=oi)))}function jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ai={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},Xd={},tx={};Jn&&(tx=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);function Au(t){if(Xd[t])return Xd[t];if(!ai[t])return t;var e=ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tx)return Xd[t]=e[n];return t}var nx=Au("animationend"),rx=Au("animationiteration"),sx=Au("animationstart"),ix=Au("transitionend"),ox=new Map,Xy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){ox.set(t,e),js(e,[t])}for(var Zd=0;Zd<Xy.length;Zd++){var eh=Xy[Zd],xk=eh.toLowerCase(),Ek=eh[0].toUpperCase()+eh.slice(1);Kr(xk,"on"+Ek)}Kr(nx,"onAnimationEnd");Kr(rx,"onAnimationIteration");Kr(sx,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(ix,"onTransitionEnd");ki("onMouseEnter",["mouseout","mouseover"]);ki("onMouseLeave",["mouseout","mouseover"]);ki("onPointerEnter",["pointerout","pointerover"]);ki("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function Zy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xI(r,e,void 0,t),t.currentTarget=null}function ax(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Zy(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Zy(s,a,u),i=l}}}if(kc)throw t=of,kc=!1,of=null,t}function we(t,e){var n=e[gf];n===void 0&&(n=e[gf]=new Set);var r=t+"__bubble";n.has(r)||(lx(e,t,2,!1),n.add(r))}function th(t,e,n){var r=0;e&&(r|=4),lx(n,t,r,e)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function ma(t){if(!t[Ol]){t[Ol]=!0,mw.forEach(function(n){n!=="selectionchange"&&(Tk.has(n)||th(n,!1,t),th(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ol]||(e[Ol]=!0,th("selectionchange",!1,e))}}function lx(t,e,n,r){switch(Ww(e)){case 1:var s=MI;break;case 4:s=VI;break;default:s=Vp}n=s.bind(null,e,n,t),s=void 0,!sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function nh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=fs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Nw(function(){var u=i,h=Op(n),f=[];e:{var m=ox.get(t);if(m!==void 0){var v=Up,x=t;switch(t){case"keypress":if(ac(n)===0)break e;case"keydown":case"keyup":v=ZI;break;case"focusin":x="focus",v=Qd;break;case"focusout":x="blur",v=Qd;break;case"beforeblur":case"afterblur":v=Qd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=$y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=$I;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=nk;break;case nx:case rx:case sx:v=HI;break;case ix:v=sk;break;case"scroll":v=FI;break;case"wheel":v=ok;break;case"copy":case"cut":case"paste":v=qI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=zy}var S=(e&4)!==0,P=!S&&t==="scroll",_=S?m!==null?m+"Capture":null:m;S=[];for(var y=u,w;y!==null;){w=y;var N=w.stateNode;if(w.tag===5&&N!==null&&(w=N,_!==null&&(N=ca(y,_),N!=null&&S.push(ga(y,N,w)))),P)break;y=y.return}0<S.length&&(m=new v(m,x,null,n,h),f.push({event:m,listeners:S}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==nf&&(x=n.relatedTarget||n.fromElement)&&(fs(x)||x[Xn]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=u,x=x?fs(x):null,x!==null&&(P=Os(x),x!==P||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=u),v!==x)){if(S=$y,N="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(S=zy,N="onPointerLeave",_="onPointerEnter",y="pointer"),P=v==null?m:li(v),w=x==null?m:li(x),m=new S(N,y+"leave",v,n,h),m.target=P,m.relatedTarget=w,N=null,fs(h)===u&&(S=new S(_,y+"enter",x,n,h),S.target=w,S.relatedTarget=P,N=S),P=N,v&&x)t:{for(S=v,_=x,y=0,w=S;w;w=qs(w))y++;for(w=0,N=_;N;N=qs(N))w++;for(;0<y-w;)S=qs(S),y--;for(;0<w-y;)_=qs(_),w--;for(;y--;){if(S===_||_!==null&&S===_.alternate)break t;S=qs(S),_=qs(_)}S=null}else S=null;v!==null&&ev(f,m,v,S,!1),x!==null&&P!==null&&ev(f,P,x,S,!0)}}e:{if(m=u?li(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var O=fk;else if(qy(m))if(Jw)O=yk;else{O=mk;var j=pk}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=gk);if(O&&(O=O(t,u))){Yw(f,O,n,h);break e}j&&j(t,m,u),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&Jh(m,"number",m.value)}switch(j=u?li(u):window,t){case"focusin":(qy(j)||j.contentEditable==="true")&&(oi=j,uf=u,Bo=null);break;case"focusout":Bo=uf=oi=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,Jy(f,n,h);break;case"selectionchange":if(wk)break;case"keydown":case"keyup":Jy(f,n,h)}var T;if(Bp)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ii?Kw(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Gw&&n.locale!=="ko"&&(ii||E!=="onCompositionStart"?E==="onCompositionEnd"&&ii&&(T=qw()):(xr=h,Fp="value"in xr?xr.value:xr.textContent,ii=!0)),j=Rc(u,E),0<j.length&&(E=new By(E,t,null,n,h),f.push({event:E,listeners:j}),T?E.data=T:(T=Qw(n),T!==null&&(E.data=T)))),(T=lk?ck(t,n):uk(t,n))&&(u=Rc(u,"onBeforeInput"),0<u.length&&(h=new By("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=T))}ax(f,e)})}function ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ca(t,n),i!=null&&r.unshift(ga(t,i,s)),i=ca(t,e),i!=null&&r.push(ga(t,i,s))),t=t.return}return r}function qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ev(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=ca(n,i),l!=null&&o.unshift(ga(n,l,a))):s||(l=ca(n,i),l!=null&&o.push(ga(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Sk=/\r\n?/g,bk=/\u0000|\uFFFD/g;function tv(t){return(typeof t=="string"?t:""+t).replace(Sk,`
`).replace(bk,"")}function Dl(t,e,n){if(e=tv(e),tv(t)!==e&&n)throw Error($(425))}function jc(){}var hf=null,ff=null;function pf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mf=typeof setTimeout=="function"?setTimeout:void 0,Ik=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,kk=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(t){return nv.resolve(null).then(t).catch(Pk)}:mf;function Pk(t){setTimeout(function(){throw t})}function rh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ha(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ha(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),_n="__reactFiber$"+qi,ya="__reactProps$"+qi,Xn="__reactContainer$"+qi,gf="__reactEvents$"+qi,Ck="__reactListeners$"+qi,Ak="__reactHandles$"+qi;function fs(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xn]||n[_n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rv(t);t!==null;){if(n=t[_n])return n;t=rv(t)}return e}t=n,n=t.parentNode}return null}function za(t){return t=t[_n]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function li(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Nu(t){return t[ya]||null}var yf=[],ci=-1;function Qr(t){return{current:t}}function xe(t){0>ci||(t.current=yf[ci],yf[ci]=null,ci--)}function ve(t,e){ci++,yf[ci]=t.current,t.current=e}var Fr={},ft=Qr(Fr),At=Qr(!1),xs=Fr;function Pi(t,e){var n=t.type.contextTypes;if(!n)return Fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(t){return t=t.childContextTypes,t!=null}function Oc(){xe(At),xe(ft)}function sv(t,e,n){if(ft.current!==Fr)throw Error($(168));ve(ft,e),ve(At,n)}function cx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,pI(t)||"Unknown",s));return Ie({},n,r)}function Dc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,xs=ft.current,ve(ft,t),ve(At,At.current),!0}function iv(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=cx(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,xe(At),xe(ft),ve(ft,t)):xe(At),ve(At,n)}var Bn=null,Ru=!1,sh=!1;function ux(t){Bn===null?Bn=[t]:Bn.push(t)}function Nk(t){Ru=!0,ux(t)}function Yr(){if(!sh&&Bn!==null){sh=!0;var t=0,e=me;try{var n=Bn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,Ru=!1}catch(s){throw Bn!==null&&(Bn=Bn.slice(t+1)),Dw(Dp,Yr),s}finally{me=e,sh=!1}}return null}var ui=[],di=0,Lc=null,Mc=0,Ht=[],Wt=0,Es=null,Hn=1,Wn="";function os(t,e){ui[di++]=Mc,ui[di++]=Lc,Lc=t,Mc=e}function dx(t,e,n){Ht[Wt++]=Hn,Ht[Wt++]=Wn,Ht[Wt++]=Es,Es=t;var r=Hn;t=Wn;var s=32-dn(r)-1;r&=~(1<<s),n+=1;var i=32-dn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Hn=1<<32-dn(e)+s|n<<s|r,Wn=i+t}else Hn=1<<i|n<<s|r,Wn=t}function Hp(t){t.return!==null&&(os(t,1),dx(t,1,0))}function Wp(t){for(;t===Lc;)Lc=ui[--di],ui[di]=null,Mc=ui[--di],ui[di]=null;for(;t===Es;)Es=Ht[--Wt],Ht[Wt]=null,Wn=Ht[--Wt],Ht[Wt]=null,Hn=Ht[--Wt],Ht[Wt]=null}var Ft=null,Vt=null,Ee=!1,an=null;function hx(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ov(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,Vt=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Hn,overflow:Wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ft=t,Vt=null,!0):!1;default:return!1}}function vf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _f(t){if(Ee){var e=Vt;if(e){var n=e;if(!ov(t,e)){if(vf(t))throw Error($(418));e=Cr(n.nextSibling);var r=Ft;e&&ov(t,e)?hx(r,n):(t.flags=t.flags&-4097|2,Ee=!1,Ft=t)}}else{if(vf(t))throw Error($(418));t.flags=t.flags&-4097|2,Ee=!1,Ft=t}}}function av(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function Ll(t){if(t!==Ft)return!1;if(!Ee)return av(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pf(t.type,t.memoizedProps)),e&&(e=Vt)){if(vf(t))throw fx(),Error($(418));for(;e;)hx(t,e),e=Cr(e.nextSibling)}if(av(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Ft?Cr(t.stateNode.nextSibling):null;return!0}function fx(){for(var t=Vt;t;)t=Cr(t.nextSibling)}function Ci(){Vt=Ft=null,Ee=!1}function qp(t){an===null?an=[t]:an.push(t)}var Rk=ir.ReactCurrentBatchConfig;function Eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lv(t){var e=t._init;return e(t._payload)}function px(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=jr(_,y),_.index=0,_.sibling=null,_}function i(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,N){return y===null||y.tag!==6?(y=dh(w,_.mode,N),y.return=_,y):(y=s(y,w),y.return=_,y)}function l(_,y,w,N){var O=w.type;return O===si?h(_,y,w.props.children,N,w.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===hr&&lv(O)===y.type)?(N=s(y,w.props),N.ref=Eo(_,y,w),N.return=_,N):(N=pc(w.type,w.key,w.props,null,_.mode,N),N.ref=Eo(_,y,w),N.return=_,N)}function u(_,y,w,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=hh(w,_.mode,N),y.return=_,y):(y=s(y,w.children||[]),y.return=_,y)}function h(_,y,w,N,O){return y===null||y.tag!==7?(y=_s(w,_.mode,N,O),y.return=_,y):(y=s(y,w),y.return=_,y)}function f(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=dh(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Il:return w=pc(y.type,y.key,y.props,null,_.mode,w),w.ref=Eo(_,null,y),w.return=_,w;case ri:return y=hh(y,_.mode,w),y.return=_,y;case hr:var N=y._init;return f(_,N(y._payload),w)}if(Po(y)||yo(y))return y=_s(y,_.mode,w,null),y.return=_,y;Ml(_,y)}return null}function m(_,y,w,N){var O=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(_,y,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Il:return w.key===O?l(_,y,w,N):null;case ri:return w.key===O?u(_,y,w,N):null;case hr:return O=w._init,m(_,y,O(w._payload),N)}if(Po(w)||yo(w))return O!==null?null:h(_,y,w,N,null);Ml(_,w)}return null}function v(_,y,w,N,O){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(w)||null,a(y,_,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Il:return _=_.get(N.key===null?w:N.key)||null,l(y,_,N,O);case ri:return _=_.get(N.key===null?w:N.key)||null,u(y,_,N,O);case hr:var j=N._init;return v(_,y,w,j(N._payload),O)}if(Po(N)||yo(N))return _=_.get(w)||null,h(y,_,N,O,null);Ml(y,N)}return null}function x(_,y,w,N){for(var O=null,j=null,T=y,E=y=0,I=null;T!==null&&E<w.length;E++){T.index>E?(I=T,T=null):I=T.sibling;var k=m(_,T,w[E],N);if(k===null){T===null&&(T=I);break}t&&T&&k.alternate===null&&e(_,T),y=i(k,y,E),j===null?O=k:j.sibling=k,j=k,T=I}if(E===w.length)return n(_,T),Ee&&os(_,E),O;if(T===null){for(;E<w.length;E++)T=f(_,w[E],N),T!==null&&(y=i(T,y,E),j===null?O=T:j.sibling=T,j=T);return Ee&&os(_,E),O}for(T=r(_,T);E<w.length;E++)I=v(T,_,E,w[E],N),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?E:I.key),y=i(I,y,E),j===null?O=I:j.sibling=I,j=I);return t&&T.forEach(function(A){return e(_,A)}),Ee&&os(_,E),O}function S(_,y,w,N){var O=yo(w);if(typeof O!="function")throw Error($(150));if(w=O.call(w),w==null)throw Error($(151));for(var j=O=null,T=y,E=y=0,I=null,k=w.next();T!==null&&!k.done;E++,k=w.next()){T.index>E?(I=T,T=null):I=T.sibling;var A=m(_,T,k.value,N);if(A===null){T===null&&(T=I);break}t&&T&&A.alternate===null&&e(_,T),y=i(A,y,E),j===null?O=A:j.sibling=A,j=A,T=I}if(k.done)return n(_,T),Ee&&os(_,E),O;if(T===null){for(;!k.done;E++,k=w.next())k=f(_,k.value,N),k!==null&&(y=i(k,y,E),j===null?O=k:j.sibling=k,j=k);return Ee&&os(_,E),O}for(T=r(_,T);!k.done;E++,k=w.next())k=v(T,_,E,k.value,N),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?E:k.key),y=i(k,y,E),j===null?O=k:j.sibling=k,j=k);return t&&T.forEach(function(R){return e(_,R)}),Ee&&os(_,E),O}function P(_,y,w,N){if(typeof w=="object"&&w!==null&&w.type===si&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Il:e:{for(var O=w.key,j=y;j!==null;){if(j.key===O){if(O=w.type,O===si){if(j.tag===7){n(_,j.sibling),y=s(j,w.props.children),y.return=_,_=y;break e}}else if(j.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===hr&&lv(O)===j.type){n(_,j.sibling),y=s(j,w.props),y.ref=Eo(_,j,w),y.return=_,_=y;break e}n(_,j);break}else e(_,j);j=j.sibling}w.type===si?(y=_s(w.props.children,_.mode,N,w.key),y.return=_,_=y):(N=pc(w.type,w.key,w.props,null,_.mode,N),N.ref=Eo(_,y,w),N.return=_,_=N)}return o(_);case ri:e:{for(j=w.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=s(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=hh(w,_.mode,N),y.return=_,_=y}return o(_);case hr:return j=w._init,P(_,y,j(w._payload),N)}if(Po(w))return x(_,y,w,N);if(yo(w))return S(_,y,w,N);Ml(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,w),y.return=_,_=y):(n(_,y),y=dh(w,_.mode,N),y.return=_,_=y),o(_)):n(_,y)}return P}var Ai=px(!0),mx=px(!1),Vc=Qr(null),Fc=null,hi=null,Gp=null;function Kp(){Gp=hi=Fc=null}function Qp(t){var e=Vc.current;xe(Vc),t._currentValue=e}function wf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _i(t,e){Fc=t,Gp=hi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(Gp!==t)if(t={context:t,memoizedValue:e,next:null},hi===null){if(Fc===null)throw Error($(308));hi=t,Fc.dependencies={lanes:0,firstContext:t}}else hi=hi.next=t;return e}var ps=null;function Yp(t){ps===null?ps=[t]:ps.push(t)}function gx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Zn(t,r)}function Zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function Jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Zn(t,n)}return s=r.interleaved,s===null?(e.next=e,Yp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Zn(t,n)}function lc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lp(t,n)}}function cv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uc(t,e,n,r){var s=t.updateQueue;fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=u=l=null,a=i;do{var m=a.lane,v=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,S=a;switch(m=e,v=n,S.tag){case 1:if(x=S.payload,typeof x=="function"){f=x.call(v,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=S.payload,m=typeof x=="function"?x.call(v,f,m):x,m==null)break e;f=Ie({},f,m);break e;case 2:fr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,l=f):h=h.next=v,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ss|=o,t.lanes=o,t.memoizedState=f}}function uv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Ha={},xn=Qr(Ha),va=Qr(Ha),_a=Qr(Ha);function ms(t){if(t===Ha)throw Error($(174));return t}function Xp(t,e){switch(ve(_a,e),ve(va,t),ve(xn,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zh(e,t)}xe(xn),ve(xn,e)}function Ni(){xe(xn),xe(va),xe(_a)}function vx(t){ms(_a.current);var e=ms(xn.current),n=Zh(e,t.type);e!==n&&(ve(va,t),ve(xn,n))}function Zp(t){va.current===t&&(xe(xn),xe(va))}var Se=Qr(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ih=[];function em(){for(var t=0;t<ih.length;t++)ih[t]._workInProgressVersionPrimary=null;ih.length=0}var cc=ir.ReactCurrentDispatcher,oh=ir.ReactCurrentBatchConfig,Ts=0,be=null,Fe=null,qe=null,Bc=!1,zo=!1,wa=0,jk=0;function it(){throw Error($(321))}function tm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function nm(t,e,n,r,s,i){if(Ts=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cc.current=t===null||t.memoizedState===null?Mk:Vk,t=n(r,s),zo){i=0;do{if(zo=!1,wa=0,25<=i)throw Error($(301));i+=1,qe=Fe=null,e.updateQueue=null,cc.current=Fk,t=n(r,s)}while(zo)}if(cc.current=zc,e=Fe!==null&&Fe.next!==null,Ts=0,qe=Fe=be=null,Bc=!1,e)throw Error($(300));return t}function rm(){var t=wa!==0;return wa=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?be.memoizedState=qe=t:qe=qe.next=t,qe}function Xt(){if(Fe===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=qe===null?be.memoizedState:qe.next;if(e!==null)qe=e,Fe=t;else{if(t===null)throw Error($(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},qe===null?be.memoizedState=qe=t:qe=qe.next=t}return qe}function xa(t,e){return typeof e=="function"?e(t):e}function ah(t){var e=Xt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((Ts&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,be.lanes|=h,Ss|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,fn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,Ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lh(t){var e=Xt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);fn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function _x(){}function wx(t,e){var n=be,r=Xt(),s=e(),i=!fn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,sm(Tx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Ea(9,Ex.bind(null,n,r,s,e),void 0,null),Ge===null)throw Error($(349));Ts&30||xx(n,e,s)}return s}function xx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ex(t,e,n,r){e.value=n,e.getSnapshot=r,Sx(e)&&bx(t)}function Tx(t,e,n){return n(function(){Sx(e)&&bx(t)})}function Sx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function bx(t){var e=Zn(t,1);e!==null&&hn(e,t,1,-1)}function dv(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=Lk.bind(null,be,t),[e.memoizedState,t]}function Ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ix(){return Xt().memoizedState}function uc(t,e,n,r){var s=yn();be.flags|=t,s.memoizedState=Ea(1|e,n,void 0,r===void 0?null:r)}function ju(t,e,n,r){var s=Xt();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,r!==null&&tm(r,o.deps)){s.memoizedState=Ea(e,n,i,r);return}}be.flags|=t,s.memoizedState=Ea(1|e,n,i,r)}function hv(t,e){return uc(8390656,8,t,e)}function sm(t,e){return ju(2048,8,t,e)}function kx(t,e){return ju(4,2,t,e)}function Px(t,e){return ju(4,4,t,e)}function Cx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ax(t,e,n){return n=n!=null?n.concat([t]):null,ju(4,4,Cx.bind(null,e,t),n)}function im(){}function Nx(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rx(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jx(t,e,n){return Ts&21?(fn(n,e)||(n=Vw(),be.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function Ok(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=oh.transition;oh.transition={};try{t(!1),e()}finally{me=n,oh.transition=r}}function Ox(){return Xt().memoizedState}function Dk(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dx(t))Lx(e,n);else if(n=gx(t,e,n,r),n!==null){var s=wt();hn(n,t,r,s),Mx(n,e,r)}}function Lk(t,e,n){var r=Rr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dx(t))Lx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,fn(a,o)){var l=e.interleaved;l===null?(s.next=s,Yp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=gx(t,e,s,r),n!==null&&(s=wt(),hn(n,t,r,s),Mx(n,e,r))}}function Dx(t){var e=t.alternate;return t===be||e!==null&&e===be}function Lx(t,e){zo=Bc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lp(t,n)}}var zc={readContext:Jt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},Mk={readContext:Jt,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:hv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uc(4194308,4,Cx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return uc(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Dk.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:dv,useDebugValue:im,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=dv(!1),e=t[0];return t=Ok.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=yn();if(Ee){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ge===null)throw Error($(349));Ts&30||xx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,hv(Tx.bind(null,r,i,t),[t]),r.flags|=2048,Ea(9,Ex.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yn(),e=Ge.identifierPrefix;if(Ee){var n=Wn,r=Hn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Vk={readContext:Jt,useCallback:Nx,useContext:Jt,useEffect:sm,useImperativeHandle:Ax,useInsertionEffect:kx,useLayoutEffect:Px,useMemo:Rx,useReducer:ah,useRef:Ix,useState:function(){return ah(xa)},useDebugValue:im,useDeferredValue:function(t){var e=Xt();return jx(e,Fe.memoizedState,t)},useTransition:function(){var t=ah(xa)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:_x,useSyncExternalStore:wx,useId:Ox,unstable_isNewReconciler:!1},Fk={readContext:Jt,useCallback:Nx,useContext:Jt,useEffect:sm,useImperativeHandle:Ax,useInsertionEffect:kx,useLayoutEffect:Px,useMemo:Rx,useReducer:lh,useRef:Ix,useState:function(){return lh(xa)},useDebugValue:im,useDeferredValue:function(t){var e=Xt();return Fe===null?e.memoizedState=t:jx(e,Fe.memoizedState,t)},useTransition:function(){var t=lh(xa)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:_x,useSyncExternalStore:wx,useId:Ox,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ou={isMounted:function(t){return(t=t._reactInternals)?Os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Rr(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(hn(e,t,s,r),lc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Rr(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(hn(e,t,s,r),lc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Rr(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ar(t,s,r),e!==null&&(hn(e,t,r,n),lc(e,t,r))}};function fv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!pa(n,r)||!pa(s,i):!0}function Vx(t,e,n){var r=!1,s=Fr,i=e.contextType;return typeof i=="object"&&i!==null?i=Jt(i):(s=Nt(e)?xs:ft.current,r=e.contextTypes,i=(r=r!=null)?Pi(t,s):Fr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ou,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function pv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ou.enqueueReplaceState(e,e.state,null)}function Ef(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Jp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Jt(i):(i=Nt(e)?xs:ft.current,s.context=Pi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ou.enqueueReplaceState(s,s.state,null),Uc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ri(t,e){try{var n="",r=e;do n+=fI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ch(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Uk=typeof WeakMap=="function"?WeakMap:Map;function Fx(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wc||(Wc=!0,jf=r),Tf(t,e)},n}function Ux(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Tf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Tf(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Uk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eP.bind(null,t,e,n),e.then(t,t))}function gv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var $k=ir.ReactCurrentOwner,Ct=!1;function vt(t,e,n,r){e.child=t===null?mx(e,null,n,r):Ai(e,t.child,n,r)}function vv(t,e,n,r,s){n=n.render;var i=e.ref;return _i(e,s),r=nm(t,e,n,r,i,s),n=rm(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,er(t,e,s)):(Ee&&n&&Hp(e),e.flags|=1,vt(t,e,r,s),e.child)}function _v(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!fm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$x(t,e,i,r,s)):(t=pc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:pa,n(o,r)&&t.ref===e.ref)return er(t,e,s)}return e.flags|=1,t=jr(i,r),t.ref=e.ref,t.return=e,e.child=t}function $x(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(pa(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,er(t,e,s)}return Sf(t,e,n,r,s)}function Bx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(pi,Lt),Lt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(pi,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(pi,Lt),Lt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(pi,Lt),Lt|=r;return vt(t,e,s,n),e.child}function zx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sf(t,e,n,r,s){var i=Nt(n)?xs:ft.current;return i=Pi(e,i),_i(e,s),n=nm(t,e,n,r,i,s),r=rm(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,er(t,e,s)):(Ee&&r&&Hp(e),e.flags|=1,vt(t,e,n,s),e.child)}function wv(t,e,n,r,s){if(Nt(n)){var i=!0;Dc(e)}else i=!1;if(_i(e,s),e.stateNode===null)dc(t,e),Vx(e,n,r),Ef(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jt(u):(u=Nt(n)?xs:ft.current,u=Pi(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&pv(e,o,r,u),fr=!1;var m=e.memoizedState;o.state=m,Uc(e,r,o,s),l=e.memoizedState,a!==r||m!==l||At.current||fr?(typeof h=="function"&&(xf(e,n,h,r),l=e.memoizedState),(a=fr||fv(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yx(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:rn(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jt(l):(l=Nt(n)?xs:ft.current,l=Pi(e,l));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&pv(e,o,r,l),fr=!1,m=e.memoizedState,o.state=m,Uc(e,r,o,s);var x=e.memoizedState;a!==f||m!==x||At.current||fr?(typeof v=="function"&&(xf(e,n,v,r),x=e.memoizedState),(u=fr||fv(e,n,u,r,m,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return bf(t,e,n,r,i,s)}function bf(t,e,n,r,s,i){zx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&iv(e,n,!1),er(t,e,i);r=e.stateNode,$k.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ai(e,t.child,null,i),e.child=Ai(e,null,a,i)):vt(t,e,a,i),e.memoizedState=r.state,s&&iv(e,n,!0),e.child}function Hx(t){var e=t.stateNode;e.pendingContext?sv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sv(t,e.context,!1),Xp(t,e.containerInfo)}function xv(t,e,n,r,s){return Ci(),qp(s),e.flags|=256,vt(t,e,n,r),e.child}var If={dehydrated:null,treeContext:null,retryLane:0};function kf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wx(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Se,s&1),t===null)return _f(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mu(o,r,0,null),t=_s(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kf(n),e.memoizedState=If,t):om(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Bk(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=jr(a,i):(i=_s(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?kf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=If,r}return i=t.child,t=i.sibling,r=jr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function om(t,e){return e=Mu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&qp(r),Ai(e,t.child,null,n),t=om(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ch(Error($(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Mu({mode:"visible",children:r.children},s,0,null),i=_s(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ai(e,t.child,null,o),e.child.memoizedState=kf(o),e.memoizedState=If,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=ch(i,r,void 0),Vl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ct||a){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Zn(t,s),hn(r,t,s,-1))}return hm(),r=ch(Error($(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=Cr(s.nextSibling),Ft=e,Ee=!0,an=null,t!==null&&(Ht[Wt++]=Hn,Ht[Wt++]=Wn,Ht[Wt++]=Es,Hn=t.id,Wn=t.overflow,Es=e),e=om(e,r.children),e.flags|=4096,e)}function Ev(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wf(t.return,e,n)}function uh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,n,e);else if(t.tag===19)Ev(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),uh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$c(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}uh(e,!0,n,null,i);break;case"together":uh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zk(t,e,n){switch(e.tag){case 3:Hx(e),Ci();break;case 5:vx(e);break;case 1:Nt(e.type)&&Dc(e);break;case 4:Xp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(Vc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?Wx(t,e,n):(ve(Se,Se.current&1),t=er(t,e,n),t!==null?t.sibling:null);ve(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Bx(t,e,n)}return er(t,e,n)}var Gx,Pf,Kx,Qx;Gx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pf=function(){};Kx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ms(xn.current);var i=null;switch(n){case"input":s=Qh(t,s),r=Qh(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=Xh(t,s),r=Xh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jc)}ef(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(aa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(aa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&we("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Qx=function(t,e,n,r){n!==r&&(e.flags|=4)};function To(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Hk(t,e,n){var r=e.pendingProps;switch(Wp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Nt(e.type)&&Oc(),ot(e),null;case 3:return r=e.stateNode,Ni(),xe(At),xe(ft),em(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(Lf(an),an=null))),Pf(t,e),ot(e),null;case 5:Zp(e);var s=ms(_a.current);if(n=e.type,t!==null&&e.stateNode!=null)Kx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ot(e),null}if(t=ms(xn.current),Ll(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_n]=e,r[ya]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<Ao.length;s++)we(Ao[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Ny(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":jy(r,i),we("invalid",r)}ef(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Dl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Dl(r.textContent,a,t),s=["children",""+a]):aa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":kl(r),Ry(r,i,!0);break;case"textarea":kl(r),Oy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_n]=e,t[ya]=r,Gx(t,e,!1,!1),e.stateNode=t;e:{switch(o=tf(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ao.length;s++)we(Ao[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":Ny(t,r),s=Qh(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),we("invalid",t);break;case"textarea":jy(t,r),s=Xh(t,r),we("invalid",t);break;default:s=r}ef(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Iw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Sw(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&la(t,l):typeof l=="number"&&la(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(aa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&we("scroll",t):l!=null&&Ap(t,i,l,o))}switch(n){case"input":kl(t),Ry(t,r,!1);break;case"textarea":kl(t),Oy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?mi(t,!!r.multiple,i,!1):r.defaultValue!=null&&mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)Qx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=ms(_a.current),ms(xn.current),Ll(e)){if(r=e.stateNode,n=e.memoizedProps,r[_n]=e,(i=r.nodeValue!==n)&&(t=Ft,t!==null))switch(t.tag){case 3:Dl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=e,e.stateNode=r}return ot(e),null;case 13:if(xe(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Vt!==null&&e.mode&1&&!(e.flags&128))fx(),Ci(),e.flags|=98560,i=!1;else if(i=Ll(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[_n]=e}else Ci(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else an!==null&&(Lf(an),an=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?$e===0&&($e=3):hm())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Ni(),Pf(t,e),t===null&&ma(e.stateNode.containerInfo),ot(e),null;case 10:return Qp(e.type._context),ot(e),null;case 17:return Nt(e.type)&&Oc(),ot(e),null;case 19:if(xe(Se),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)To(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$c(t),o!==null){for(e.flags|=128,To(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>ji&&(e.flags|=128,r=!0,To(i,!1),e.lanes=4194304)}else{if(!r)if(t=$c(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),To(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return ot(e),null}else 2*Oe()-i.renderingStartTime>ji&&n!==1073741824&&(e.flags|=128,r=!0,To(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,n=Se.current,ve(Se,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return dm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Wk(t,e){switch(Wp(e),e.tag){case 1:return Nt(e.type)&&Oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ni(),xe(At),xe(ft),em(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zp(e),null;case 13:if(xe(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ci()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Se),null;case 4:return Ni(),null;case 10:return Qp(e.type._context),null;case 22:case 23:return dm(),null;case 24:return null;default:return null}}var Fl=!1,dt=!1,qk=typeof WeakSet=="function"?WeakSet:Set,G=null;function fi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function Cf(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var Tv=!1;function Gk(t,e){if(hf=Ac,t=ex(),zp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(l=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ff={focusedElem:t,selectionRange:n},Ac=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var S=x.memoizedProps,P=x.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?S:rn(e.type,S),P);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(N){Ae(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return x=Tv,Tv=!1,x}function Ho(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cf(e,n,i)}s=s.next}while(s!==r)}}function Du(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Af(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yx(t){var e=t.alternate;e!==null&&(t.alternate=null,Yx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[ya],delete e[gf],delete e[Ck],delete e[Ak])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jx(t){return t.tag===5||t.tag===3||t.tag===4}function Sv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jc));else if(r!==4&&(t=t.child,t!==null))for(Nf(t,e,n),t=t.sibling;t!==null;)Nf(t,e,n),t=t.sibling}function Rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rf(t,e,n),t=t.sibling;t!==null;)Rf(t,e,n),t=t.sibling}var Ye=null,sn=!1;function cr(t,e,n){for(n=n.child;n!==null;)Xx(t,e,n),n=n.sibling}function Xx(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(ku,n)}catch{}switch(n.tag){case 5:dt||fi(n,e);case 6:var r=Ye,s=sn;Ye=null,cr(t,e,n),Ye=r,sn=s,Ye!==null&&(sn?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(sn?(t=Ye,n=n.stateNode,t.nodeType===8?rh(t.parentNode,n):t.nodeType===1&&rh(t,n),ha(t)):rh(Ye,n.stateNode));break;case 4:r=Ye,s=sn,Ye=n.stateNode.containerInfo,sn=!0,cr(t,e,n),Ye=r,sn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cf(n,e,o),s=s.next}while(s!==r)}cr(t,e,n);break;case 1:if(!dt&&(fi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ae(n,e,a)}cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,cr(t,e,n),dt=r):cr(t,e,n);break;default:cr(t,e,n)}}function bv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qk),e.forEach(function(r){var s=nP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ye=a.stateNode,sn=!1;break e;case 3:Ye=a.stateNode.containerInfo,sn=!0;break e;case 4:Ye=a.stateNode.containerInfo,sn=!0;break e}a=a.return}if(Ye===null)throw Error($(160));Xx(i,o,s),Ye=null,sn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ae(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zx(e,t),e=e.sibling}function Zx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),gn(t),r&4){try{Ho(3,t,t.return),Du(3,t)}catch(S){Ae(t,t.return,S)}try{Ho(5,t,t.return)}catch(S){Ae(t,t.return,S)}}break;case 1:tn(e,t),gn(t),r&512&&n!==null&&fi(n,n.return);break;case 5:if(tn(e,t),gn(t),r&512&&n!==null&&fi(n,n.return),t.flags&32){var s=t.stateNode;try{la(s,"")}catch(S){Ae(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&xw(s,i),tf(a,o);var u=tf(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?Iw(s,f):h==="dangerouslySetInnerHTML"?Sw(s,f):h==="children"?la(s,f):Ap(s,h,f,u)}switch(a){case"input":Yh(s,i);break;case"textarea":Ew(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?mi(s,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?mi(s,!!i.multiple,i.defaultValue,!0):mi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ya]=i}catch(S){Ae(t,t.return,S)}}break;case 6:if(tn(e,t),gn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(S){Ae(t,t.return,S)}}break;case 3:if(tn(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ha(e.containerInfo)}catch(S){Ae(t,t.return,S)}break;case 4:tn(e,t),gn(t);break;case 13:tn(e,t),gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cm=Oe())),r&4&&bv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(u=dt)||h,tn(e,t),dt=u):tn(e,t),gn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(f=G=h;G!==null;){switch(m=G,v=m.child,m.tag){case 0:case 11:case 14:case 15:Ho(4,m,m.return);break;case 1:fi(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(S){Ae(r,n,S)}}break;case 5:fi(m,m.return);break;case 22:if(m.memoizedState!==null){kv(f);continue}}v!==null?(v.return=m,G=v):kv(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bw("display",o))}catch(S){Ae(t,t.return,S)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(S){Ae(t,t.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:tn(e,t),gn(t),r&4&&bv(t);break;case 21:break;default:tn(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jx(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(la(s,""),r.flags&=-33);var i=Sv(t);Rf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Sv(t);Nf(t,a,o);break;default:throw Error($(161))}}catch(l){Ae(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kk(t,e,n){G=t,e1(t)}function e1(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||dt;a=Fl;var u=dt;if(Fl=o,(dt=l)&&!u)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?Pv(s):l!==null?(l.return=o,G=l):Pv(s);for(;i!==null;)G=i,e1(i),i=i.sibling;G=s,Fl=a,dt=u}Iv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Iv(t)}}function Iv(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Du(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ha(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}dt||e.flags&512&&Af(e)}catch(m){Ae(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function kv(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Pv(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Du(4,e)}catch(l){Ae(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ae(e,s,l)}}var i=e.return;try{Af(e)}catch(l){Ae(e,i,l)}break;case 5:var o=e.return;try{Af(e)}catch(l){Ae(e,o,l)}}}catch(l){Ae(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var Qk=Math.ceil,Hc=ir.ReactCurrentDispatcher,am=ir.ReactCurrentOwner,Kt=ir.ReactCurrentBatchConfig,ce=0,Ge=null,Me=null,Ze=0,Lt=0,pi=Qr(0),$e=0,Ta=null,Ss=0,Lu=0,lm=0,Wo=null,kt=null,cm=0,ji=1/0,Un=null,Wc=!1,jf=null,Nr=null,Ul=!1,Er=null,qc=0,qo=0,Of=null,hc=-1,fc=0;function wt(){return ce&6?Oe():hc!==-1?hc:hc=Oe()}function Rr(t){return t.mode&1?ce&2&&Ze!==0?Ze&-Ze:Rk.transition!==null?(fc===0&&(fc=Vw()),fc):(t=me,t!==0||(t=window.event,t=t===void 0?16:Ww(t.type)),t):1}function hn(t,e,n,r){if(50<qo)throw qo=0,Of=null,Error($(185));$a(t,n,r),(!(ce&2)||t!==Ge)&&(t===Ge&&(!(ce&2)&&(Lu|=n),$e===4&&gr(t,Ze)),Rt(t,r),n===1&&ce===0&&!(e.mode&1)&&(ji=Oe()+500,Ru&&Yr()))}function Rt(t,e){var n=t.callbackNode;RI(t,e);var r=Cc(t,t===Ge?Ze:0);if(r===0)n!==null&&My(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&My(n),e===1)t.tag===0?Nk(Cv.bind(null,t)):ux(Cv.bind(null,t)),kk(function(){!(ce&6)&&Yr()}),n=null;else{switch(Fw(r)){case 1:n=Dp;break;case 4:n=Lw;break;case 16:n=Pc;break;case 536870912:n=Mw;break;default:n=Pc}n=l1(n,t1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function t1(t,e){if(hc=-1,fc=0,ce&6)throw Error($(327));var n=t.callbackNode;if(wi()&&t.callbackNode!==n)return null;var r=Cc(t,t===Ge?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gc(t,r);else{e=r;var s=ce;ce|=2;var i=r1();(Ge!==t||Ze!==e)&&(Un=null,ji=Oe()+500,vs(t,e));do try{Xk();break}catch(a){n1(t,a)}while(!0);Kp(),Hc.current=i,ce=s,Me!==null?e=0:(Ge=null,Ze=0,e=$e)}if(e!==0){if(e===2&&(s=af(t),s!==0&&(r=s,e=Df(t,s))),e===1)throw n=Ta,vs(t,0),gr(t,r),Rt(t,Oe()),n;if(e===6)gr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Yk(s)&&(e=Gc(t,r),e===2&&(i=af(t),i!==0&&(r=i,e=Df(t,i))),e===1))throw n=Ta,vs(t,0),gr(t,r),Rt(t,Oe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:as(t,kt,Un);break;case 3:if(gr(t,r),(r&130023424)===r&&(e=cm+500-Oe(),10<e)){if(Cc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mf(as.bind(null,t,kt,Un),e);break}as(t,kt,Un);break;case 4:if(gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-dn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Qk(r/1960))-r,10<r){t.timeoutHandle=mf(as.bind(null,t,kt,Un),r);break}as(t,kt,Un);break;case 5:as(t,kt,Un);break;default:throw Error($(329))}}}return Rt(t,Oe()),t.callbackNode===n?t1.bind(null,t):null}function Df(t,e){var n=Wo;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=Gc(t,e),t!==2&&(e=kt,kt=n,e!==null&&Lf(e)),t}function Lf(t){kt===null?kt=t:kt.push.apply(kt,t)}function Yk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e){for(e&=~lm,e&=~Lu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),r=1<<n;t[n]=-1,e&=~r}}function Cv(t){if(ce&6)throw Error($(327));wi();var e=Cc(t,0);if(!(e&1))return Rt(t,Oe()),null;var n=Gc(t,e);if(t.tag!==0&&n===2){var r=af(t);r!==0&&(e=r,n=Df(t,r))}if(n===1)throw n=Ta,vs(t,0),gr(t,e),Rt(t,Oe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,as(t,kt,Un),Rt(t,Oe()),null}function um(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(ji=Oe()+500,Ru&&Yr())}}function bs(t){Er!==null&&Er.tag===0&&!(ce&6)&&wi();var e=ce;ce|=1;var n=Kt.transition,r=me;try{if(Kt.transition=null,me=1,t)return t()}finally{me=r,Kt.transition=n,ce=e,!(ce&6)&&Yr()}}function dm(){Lt=pi.current,xe(pi)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ik(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Wp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oc();break;case 3:Ni(),xe(At),xe(ft),em();break;case 5:Zp(r);break;case 4:Ni();break;case 13:xe(Se);break;case 19:xe(Se);break;case 10:Qp(r.type._context);break;case 22:case 23:dm()}n=n.return}if(Ge=t,Me=t=jr(t.current,null),Ze=Lt=e,$e=0,Ta=null,lm=Lu=Ss=0,kt=Wo=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ps=null}return t}function n1(t,e){do{var n=Me;try{if(Kp(),cc.current=zc,Bc){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bc=!1}if(Ts=0,qe=Fe=be=null,zo=!1,wa=0,am.current=null,n===null||n.return===null){$e=1,Ta=e,Me=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ze,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=gv(o);if(v!==null){v.flags&=-257,yv(v,o,a,i,e),v.mode&1&&mv(i,u,e),e=v,l=u;var x=e.updateQueue;if(x===null){var S=new Set;S.add(l),e.updateQueue=S}else x.add(l);break e}else{if(!(e&1)){mv(i,u,e),hm();break e}l=Error($(426))}}else if(Ee&&a.mode&1){var P=gv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),yv(P,o,a,i,e),qp(Ri(l,a));break e}}i=l=Ri(l,a),$e!==4&&($e=2),Wo===null?Wo=[i]:Wo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=Fx(i,l,e);cv(i,_);break e;case 1:a=l;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Nr===null||!Nr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Ux(i,a,e);cv(i,N);break e}}i=i.return}while(i!==null)}i1(n)}catch(O){e=O,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function r1(){var t=Hc.current;return Hc.current=zc,t===null?zc:t}function hm(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(Ss&268435455)&&!(Lu&268435455)||gr(Ge,Ze)}function Gc(t,e){var n=ce;ce|=2;var r=r1();(Ge!==t||Ze!==e)&&(Un=null,vs(t,e));do try{Jk();break}catch(s){n1(t,s)}while(!0);if(Kp(),ce=n,Hc.current=r,Me!==null)throw Error($(261));return Ge=null,Ze=0,$e}function Jk(){for(;Me!==null;)s1(Me)}function Xk(){for(;Me!==null&&!TI();)s1(Me)}function s1(t){var e=a1(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?i1(t):Me=e,am.current=null}function i1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Wk(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Me=null;return}}else if(n=Hk(n,e,Lt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);$e===0&&($e=5)}function as(t,e,n){var r=me,s=Kt.transition;try{Kt.transition=null,me=1,Zk(t,e,n,r)}finally{Kt.transition=s,me=r}return null}function Zk(t,e,n,r){do wi();while(Er!==null);if(ce&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jI(t,i),t===Ge&&(Me=Ge=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ul||(Ul=!0,l1(Pc,function(){return wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var o=me;me=1;var a=ce;ce|=4,am.current=null,Gk(t,n),Zx(n,t),_k(ff),Ac=!!hf,ff=hf=null,t.current=n,Kk(n),SI(),ce=a,me=o,Kt.transition=i}else t.current=n;if(Ul&&(Ul=!1,Er=t,qc=s),i=t.pendingLanes,i===0&&(Nr=null),kI(n.stateNode),Rt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wc)throw Wc=!1,t=jf,jf=null,t;return qc&1&&t.tag!==0&&wi(),i=t.pendingLanes,i&1?t===Of?qo++:(qo=0,Of=t):qo=0,Yr(),null}function wi(){if(Er!==null){var t=Fw(qc),e=Kt.transition,n=me;try{if(Kt.transition=null,me=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,qc=0,ce&6)throw Error($(331));var s=ce;for(ce|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:Ho(8,h,i)}var f=h.child;if(f!==null)f.return=h,G=f;else for(;G!==null;){h=G;var m=h.sibling,v=h.return;if(Yx(h),h===u){G=null;break}if(m!==null){m.return=v,G=m;break}G=v}}}var x=i.alternate;if(x!==null){var S=x.child;if(S!==null){x.child=null;do{var P=S.sibling;S.sibling=null,S=P}while(S!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ho(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,G=_;break e}G=i.return}}var y=t.current;for(G=y;G!==null;){o=G;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,G=w;else e:for(o=y;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Du(9,a)}}catch(O){Ae(a,a.return,O)}if(a===o){G=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,G=N;break e}G=a.return}}if(ce=s,Yr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(ku,t)}catch{}r=!0}return r}finally{me=n,Kt.transition=e}}return!1}function Av(t,e,n){e=Ri(n,e),e=Fx(t,e,1),t=Ar(t,e,1),e=wt(),t!==null&&($a(t,1,e),Rt(t,e))}function Ae(t,e,n){if(t.tag===3)Av(t,t,n);else for(;e!==null;){if(e.tag===3){Av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=Ri(n,t),t=Ux(e,t,1),e=Ar(e,t,1),t=wt(),e!==null&&($a(e,1,t),Rt(e,t));break}}e=e.return}}function eP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(Ze&n)===n&&($e===4||$e===3&&(Ze&130023424)===Ze&&500>Oe()-cm?vs(t,0):lm|=n),Rt(t,e)}function o1(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=wt();t=Zn(t,e),t!==null&&($a(t,e,n),Rt(t,n))}function tP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o1(t,n)}function nP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),o1(t,n)}var a1;a1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,zk(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Ee&&e.flags&1048576&&dx(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dc(t,e),t=e.pendingProps;var s=Pi(e,ft.current);_i(e,n),s=nm(null,e,r,t,s,n);var i=rm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(i=!0,Dc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jp(e),s.updater=Ou,e.stateNode=s,s._reactInternals=e,Ef(e,r,t,n),e=bf(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&Hp(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sP(r),t=rn(r,t),s){case 0:e=Sf(null,e,r,t,n);break e;case 1:e=wv(null,e,r,t,n);break e;case 11:e=vv(null,e,r,t,n);break e;case 14:e=_v(null,e,r,rn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Sf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),wv(t,e,r,s,n);case 3:e:{if(Hx(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,yx(t,e),Uc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ri(Error($(423)),e),e=xv(t,e,r,n,s);break e}else if(r!==s){s=Ri(Error($(424)),e),e=xv(t,e,r,n,s);break e}else for(Vt=Cr(e.stateNode.containerInfo.firstChild),Ft=e,Ee=!0,an=null,n=mx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ci(),r===s){e=er(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return vx(e),t===null&&_f(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,pf(r,s)?o=null:i!==null&&pf(r,i)&&(e.flags|=32),zx(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&_f(e),null;case 13:return Wx(t,e,n);case 4:return Xp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ai(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),vv(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(Vc,r._currentValue),r._currentValue=o,i!==null)if(fn(i.value,o)){if(i.children===s.children&&!At.current){e=er(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Qn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),wf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),wf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_i(e,n),s=Jt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=rn(r,e.pendingProps),s=rn(r.type,s),_v(t,e,r,s,n);case 15:return $x(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),dc(t,e),e.tag=1,Nt(r)?(t=!0,Dc(e)):t=!1,_i(e,n),Vx(e,r,s),Ef(e,r,s,n),bf(null,e,r,!0,t,n);case 19:return qx(t,e,n);case 22:return Bx(t,e,n)}throw Error($(156,e.tag))};function l1(t,e){return Dw(t,e)}function rP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new rP(t,e,n,r)}function fm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sP(t){if(typeof t=="function")return fm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rp)return 11;if(t===jp)return 14}return 2}function jr(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")fm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case si:return _s(n.children,s,i,e);case Np:o=8,s|=8;break;case Wh:return t=Gt(12,n,e,s|2),t.elementType=Wh,t.lanes=i,t;case qh:return t=Gt(13,n,e,s),t.elementType=qh,t.lanes=i,t;case Gh:return t=Gt(19,n,e,s),t.elementType=Gh,t.lanes=i,t;case vw:return Mu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gw:o=10;break e;case yw:o=9;break e;case Rp:o=11;break e;case jp:o=14;break e;case hr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Gt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _s(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function Mu(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=vw,t.lanes=n,t.stateNode={isHidden:!1},t}function dh(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function hh(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qd(0),this.expirationTimes=qd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pm(t,e,n,r,s,i,o,a,l){return t=new iP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jp(i),t}function oP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ri,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function c1(t){if(!t)return Fr;t=t._reactInternals;e:{if(Os(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Nt(n))return cx(t,n,e)}return e}function u1(t,e,n,r,s,i,o,a,l){return t=pm(n,r,!0,t,s,i,o,a,l),t.context=c1(null),n=t.current,r=wt(),s=Rr(n),i=Qn(r,s),i.callback=e??null,Ar(n,i,s),t.current.lanes=s,$a(t,s,r),Rt(t,r),t}function Vu(t,e,n,r){var s=e.current,i=wt(),o=Rr(s);return n=c1(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(s,e,o),t!==null&&(hn(t,s,o,i),lc(t,s,o)),o}function Kc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mm(t,e){Nv(t,e),(t=t.alternate)&&Nv(t,e)}function aP(){return null}var d1=typeof reportError=="function"?reportError:function(t){console.error(t)};function gm(t){this._internalRoot=t}Fu.prototype.render=gm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Vu(t,e,null,null)};Fu.prototype.unmount=gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bs(function(){Vu(null,t,null,null)}),e[Xn]=null}};function Fu(t){this._internalRoot=t}Fu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mr.length&&e!==0&&e<mr[n].priority;n++);mr.splice(n,0,t),n===0&&Hw(t)}};function ym(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rv(){}function lP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Kc(o);i.call(u)}}var o=u1(e,r,t,0,null,!1,!1,"",Rv);return t._reactRootContainer=o,t[Xn]=o.current,ma(t.nodeType===8?t.parentNode:t),bs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Kc(l);a.call(u)}}var l=pm(t,0,!1,null,null,!1,!1,"",Rv);return t._reactRootContainer=l,t[Xn]=l.current,ma(t.nodeType===8?t.parentNode:t),bs(function(){Vu(e,l,n,r)}),l}function $u(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Kc(o);a.call(l)}}Vu(e,o,t,s)}else o=lP(n,e,t,s,r);return Kc(o)}Uw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Co(e.pendingLanes);n!==0&&(Lp(e,n|1),Rt(e,Oe()),!(ce&6)&&(ji=Oe()+500,Yr()))}break;case 13:bs(function(){var r=Zn(t,1);if(r!==null){var s=wt();hn(r,t,1,s)}}),mm(t,1)}};Mp=function(t){if(t.tag===13){var e=Zn(t,134217728);if(e!==null){var n=wt();hn(e,t,134217728,n)}mm(t,134217728)}};$w=function(t){if(t.tag===13){var e=Rr(t),n=Zn(t,e);if(n!==null){var r=wt();hn(n,t,e,r)}mm(t,e)}};Bw=function(){return me};zw=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};rf=function(t,e,n){switch(e){case"input":if(Yh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nu(r);if(!s)throw Error($(90));ww(r),Yh(r,s)}}}break;case"textarea":Ew(t,n);break;case"select":e=n.value,e!=null&&mi(t,!!n.multiple,e,!1)}};Cw=um;Aw=bs;var cP={usingClientEntryPoint:!1,Events:[za,li,Nu,kw,Pw,um]},So={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uP={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jw(t),t===null?null:t.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||aP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{ku=$l.inject(uP),wn=$l}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cP;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ym(e))throw Error($(200));return oP(t,e,null,n)};$t.createRoot=function(t,e){if(!ym(t))throw Error($(299));var n=!1,r="",s=d1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=pm(t,1,!1,null,null,n,!1,r,s),t[Xn]=e.current,ma(t.nodeType===8?t.parentNode:t),new gm(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=jw(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return bs(t)};$t.hydrate=function(t,e,n){if(!Uu(e))throw Error($(200));return $u(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!ym(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=d1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=u1(e,null,t,1,n??null,s,!1,i,o),t[Xn]=e.current,ma(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Fu(e)};$t.render=function(t,e,n){if(!Uu(e))throw Error($(200));return $u(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Uu(t))throw Error($(40));return t._reactRootContainer?(bs(function(){$u(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};$t.unstable_batchedUpdates=um;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return $u(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function h1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h1)}catch(t){console.error(t)}}h1(),hw.exports=$t;var dP=hw.exports,f1,jv=dP;f1=jv.createRoot,jv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sa(){return Sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sa.apply(this,arguments)}var Tr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tr||(Tr={}));const Ov="popstate";function hP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Mf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:m1(s)}return pP(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function p1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fP(){return Math.random().toString(36).substr(2,8)}function Dv(t,e){return{usr:t.state,key:t.key,idx:e}}function Mf(t,e,n,r){return n===void 0&&(n=null),Sa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gi(e):e,{state:n,key:e&&e.key||r||fP()})}function m1(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Tr.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Sa({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Tr.Pop;let P=h(),_=P==null?null:P-u;u=P,l&&l({action:a,location:S.location,delta:_})}function m(P,_){a=Tr.Push;let y=Mf(S.location,P,_);u=h()+1;let w=Dv(y,u),N=S.createHref(y);try{o.pushState(w,"",N)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(N)}i&&l&&l({action:a,location:S.location,delta:1})}function v(P,_){a=Tr.Replace;let y=Mf(S.location,P,_);u=h();let w=Dv(y,u),N=S.createHref(y);o.replaceState(w,"",N),i&&l&&l({action:a,location:S.location,delta:0})}function x(P){let _=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof P=="string"?P:m1(P);return y=y.replace(/ $/,"%20"),Ve(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let S={get action(){return a},get location(){return t(s,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Ov,f),l=P,()=>{s.removeEventListener(Ov,f),l=null}},createHref(P){return e(s,P)},createURL:x,encodeLocation(P){let _=x(P);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:v,go(P){return o.go(P)}};return S}var Lv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lv||(Lv={}));function mP(t,e,n){return n===void 0&&(n="/"),gP(t,e,n,!1)}function gP(t,e,n,r){let s=typeof e=="string"?Gi(e):e,i=v1(s.pathname||"/",n);if(i==null)return null;let o=g1(t);yP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=PP(i);a=IP(o[l],u,r)}return a}function g1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ws([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),g1(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:SP(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of y1(i.path))s(i,o,l)}),e}function y1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=y1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function yP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vP=/^:[\w-]+$/,_P=3,wP=2,xP=1,EP=10,TP=-2,Mv=t=>t==="*";function SP(t,e){let n=t.split("/"),r=n.length;return n.some(Mv)&&(r+=TP),e&&(r+=wP),n.filter(s=>!Mv(s)).reduce((s,i)=>s+(vP.test(i)?_P:i===""?xP:EP),r)}function bP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function IP(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=Vv({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),m=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Vv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:ws([i,f.pathname]),pathnameBase:RP(ws([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=ws([i,f.pathnameBase]))}return o}function Vv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:m,isOptional:v}=h;if(m==="*"){let S=a[f]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const x=a[f];return v&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function kP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),p1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return p1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function v1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function CP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Gi(t):t;return{pathname:n?n.startsWith("/")?n:AP(n,e):e,search:jP(r),hash:OP(s)}}function AP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function fh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _1(t,e){let n=NP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function w1(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Gi(t):(s=Sa({},t),Ve(!s.pathname||!s.pathname.includes("?"),fh("?","pathname","search",s)),Ve(!s.pathname||!s.pathname.includes("#"),fh("#","pathname","hash",s)),Ve(!s.search||!s.search.includes("#"),fh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=CP(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const ws=t=>t.join("/").replace(/\/\/+/g,"/"),RP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const x1=["post","put","patch","delete"];new Set(x1);const LP=["get",...x1];new Set(LP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ba(){return ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ba.apply(this,arguments)}const vm=L.createContext(null),MP=L.createContext(null),Wa=L.createContext(null),Bu=L.createContext(null),Jr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),E1=L.createContext(null);function qa(){return L.useContext(Bu)!=null}function Ki(){return qa()||Ve(!1),L.useContext(Bu).location}function T1(t){L.useContext(Wa).static||L.useLayoutEffect(t)}function Ke(){let{isDataRoute:t}=L.useContext(Jr);return t?JP():VP()}function VP(){qa()||Ve(!1);let t=L.useContext(vm),{basename:e,future:n,navigator:r}=L.useContext(Wa),{matches:s}=L.useContext(Jr),{pathname:i}=Ki(),o=JSON.stringify(_1(s,n.v7_relativeSplatPath)),a=L.useRef(!1);return T1(()=>{a.current=!0}),L.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=w1(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ws([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function FP(){let{matches:t}=L.useContext(Jr),e=t[t.length-1];return e?e.params:{}}function UP(t,e){return $P(t,e)}function $P(t,e,n,r){qa()||Ve(!1);let{navigator:s}=L.useContext(Wa),{matches:i}=L.useContext(Jr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Ki(),h;if(e){var f;let P=typeof e=="string"?Gi(e):e;l==="/"||(f=P.pathname)!=null&&f.startsWith(l)||Ve(!1),h=P}else h=u;let m=h.pathname||"/",v=m;if(l!=="/"){let P=l.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let x=mP(t,{pathname:v}),S=qP(x&&x.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:ws([l,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?l:ws([l,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&S?L.createElement(Bu.Provider,{value:{location:ba({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Tr.Pop}},S):S}function BP(){let t=YP(),e=DP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const zP=L.createElement(BP,null);class HP extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Jr.Provider,{value:this.props.routeContext},L.createElement(E1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WP(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(vm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Jr.Provider,{value:e},r)}function qP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Ve(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:v}=n,x=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let v,x=!1,S=null,P=null;n&&(v=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||zP,l&&(u<0&&m===0?(x=!0,P=null):u===m&&(x=!0,P=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),y=()=>{let w;return v?w=S:x?w=P:f.route.Component?w=L.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=h,L.createElement(WP,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?L.createElement(HP,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var S1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(S1||{}),Qc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Qc||{});function GP(t){let e=L.useContext(vm);return e||Ve(!1),e}function KP(t){let e=L.useContext(MP);return e||Ve(!1),e}function QP(t){let e=L.useContext(Jr);return e||Ve(!1),e}function b1(t){let e=QP(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function YP(){var t;let e=L.useContext(E1),n=KP(Qc.UseRouteError),r=b1(Qc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function JP(){let{router:t}=GP(S1.UseNavigateStable),e=b1(Qc.UseNavigateStable),n=L.useRef(!1);return T1(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ba({fromRouteId:e},i)))},[t,e])}function XP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function I1(t){let{to:e,replace:n,state:r,relative:s}=t;qa()||Ve(!1);let{future:i,static:o}=L.useContext(Wa),{matches:a}=L.useContext(Jr),{pathname:l}=Ki(),u=Ke(),h=w1(e,_1(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return L.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function lt(t){Ve(!1)}function ZP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Tr.Pop,navigator:i,static:o=!1,future:a}=t;qa()&&Ve(!1);let l=e.replace(/^\/*/,"/"),u=L.useMemo(()=>({basename:l,navigator:i,static:o,future:ba({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Gi(r));let{pathname:h="/",search:f="",hash:m="",state:v=null,key:x="default"}=r,S=L.useMemo(()=>{let P=v1(h,l);return P==null?null:{location:{pathname:P,search:f,hash:m,state:v,key:x},navigationType:s}},[l,h,f,m,v,x,s]);return S==null?null:L.createElement(Wa.Provider,{value:u},L.createElement(Bu.Provider,{children:n,value:S}))}function eC(t){let{children:e,location:n}=t;return UP(Vf(e),n)}new Promise(()=>{});function Vf(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,Vf(r.props.children,i));return}r.type!==lt&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Vf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const tC="6";try{window.__reactRouterVersion=tC}catch{}const nC="startTransition",Fv=eI[nC];function rC(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=hP({window:s,v5Compat:!0}));let o=i.current,[a,l]=L.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=L.useCallback(f=>{u&&Fv?Fv(()=>l(f)):l(f)},[l,u]);return L.useLayoutEffect(()=>o.listen(h),[o,h]),L.useEffect(()=>XP(r),[r]),L.createElement(ZP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Uv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uv||(Uv={}));var $v;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($v||($v={}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ae=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>L.createElement("svg",{ref:h,...sC,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${iC(t)}`,a].join(" "),...u},[...e.map(([f,m])=>L.createElement(f,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=ae("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=ae("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ae("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ae("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=ae("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=ae("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=ae("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=ae("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ae("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ae("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=ae("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ae("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=ae("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ae("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=ae("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),j1=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!1),s=[{name:"Vegetables & Fruits",icon:"",color:"bg-green-100"},{name:"Dairy & Breakfast",icon:"",color:"bg-blue-100"},{name:"Munchies",icon:"",color:"bg-orange-100"},{name:"Cold Drinks & Juices",icon:"",color:"bg-red-100"},{name:"Instant & Frozen Food",icon:"",color:"bg-purple-100"},{name:"Tea, Coffee & Health Drink",icon:"",color:"bg-yellow-100"},{name:"Bakery & Biscuits",icon:"",color:"bg-pink-100"},{name:"Sweet Tooth",icon:"",color:"bg-indigo-100"}],i=Ke(),o=[{name:"Fresh Tomatoes",price:"40",originalPrice:"50",image:"https://images.pexels.com/photos/533280/pexels-photo-533280.jpeg?auto=compress&cs=tinysrgb&w=200",time:"20 MINS"},{name:"Fresh Milk",price:"55",image:"https://images.pexels.com/photos/248412/pexels-photo-248412.jpeg?auto=compress&cs=tinysrgb&w=200",time:"20 MINS"},{name:"Bananas",price:"60",image:"https://images.pexels.com/photos/61127/pexels-photo-61127.jpeg?auto=compress&cs=tinysrgb&w=200",time:"20 MINS"},{name:"Fresh Apples",price:"120",originalPrice:"140",image:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=200",time:"20 MINS"}];L.useEffect(()=>{const l=u=>{u.preventDefault(),e(u),r(!0)};return window.addEventListener("beforeinstallprompt",l),()=>{window.removeEventListener("beforeinstallprompt",l)}},[]);const a=async()=>{if(!t)return;t.prompt(),(await t.userChoice).outcome==="accepted"&&console.log(" PWA installed"),e(null),r(!1)};return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b",children:d.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-white font-bold text-sm",children:""})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"VillageFresh"}),d.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[d.jsx(_m,{className:"w-3 h-3"}),d.jsx("span",{children:"Delivery in 20 minutes"})]})]})]}),d.jsx("button",{onClick:()=>i("/auth"),className:"text-emerald-600 font-medium text-sm hover:text-emerald-700 transition-colors",children:"Login"})]})})}),d.jsx("section",{className:"px-4 py-6 bg-gradient-to-r from-emerald-500 to-emerald-600",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"  ,  "}),d.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(Ia,{className:"w-4 h-4 text-emerald-600"}),d.jsx("span",{children:"20 minutes"})]}),d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(Yc,{className:"w-4 h-4 text-emerald-600"}),d.jsx("span",{children:"Free delivery"})]})]})]}),d.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx(Ga,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",placeholder:"Search for products...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-gray-50"})]}),d.jsxs("button",{onClick:()=>i("/auth"),className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white py-3 px-6 rounded-xl font-semibold flex items-center justify-center space-x-2 transition-colors",children:[d.jsx("span",{children:"Start Shopping"}),d.jsx(Bv,{className:"w-5 h-5"})]})]})})}),n&&d.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:d.jsx("button",{onClick:a,className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-5 py-3 rounded-xl shadow-xl hover:scale-105 transition-all duration-300 animate-pulse",children:" Install Village Store App"})}),d.jsx("section",{className:"px-4 py-6",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Shop by category"}),d.jsx("div",{className:"grid grid-cols-4 gap-3",children:s.map((l,u)=>d.jsxs("button",{className:"flex flex-col items-center p-3 rounded-xl border border-gray-100 hover:border-emerald-200 transition-colors",children:[d.jsx("div",{className:`w-12 h-12 ${l.color} rounded-full flex items-center justify-center mb-2`,children:d.jsx("span",{className:"text-xl",children:l.icon})}),d.jsx("span",{className:"text-xs font-medium text-gray-700 text-center leading-tight",children:l.name})]},u))})]})}),d.jsx("section",{className:"px-4 py-6 bg-gray-50",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Quick picks for you"}),d.jsx("button",{className:"text-emerald-600 font-medium text-sm",children:"See all"})]}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map((l,u)=>d.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:l.image,alt:l.name,className:"w-full h-32 object-cover"}),d.jsx("div",{className:"absolute top-2 left-2 bg-emerald-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:l.time})]}),d.jsxs("div",{className:"p-3",children:[d.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:l.name}),d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx("span",{className:"font-bold text-gray-900",children:l.price}),l.originalPrice&&d.jsx("span",{className:"text-xs text-gray-500 line-through",children:l.originalPrice})]}),d.jsx("button",{onClick:()=>i("/auth"),className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white py-2 px-3 rounded-lg text-sm font-medium transition-colors",children:"ADD"})]})]},u))})]})}),d.jsx("section",{className:"px-4 py-6",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-2",children:d.jsx(Ia,{className:"w-6 h-6 text-emerald-600"})}),d.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:"20 minutes"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Fastest delivery"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:d.jsx(Uf,{className:"w-6 h-6 text-blue-600"})}),d.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:"100% Fresh"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Quality guaranteed"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2",children:d.jsx(Yc,{className:"w-6 h-6 text-orange-600"})}),d.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:"Free delivery"}),d.jsx("p",{className:"text-xs text-gray-600",children:"On orders above 149"})]})]})})}),d.jsx("section",{className:"px-4 py-6 bg-gray-50",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[d.jsx(us,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsx(us,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsx(us,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsx(us,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsx(us,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-sm font-semibold text-gray-900 ml-1",children:"4.9"})]}),d.jsx("p",{className:"text-xs text-gray-600",children:"500+ happy customers"})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"1000+ products"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Fresh from farms"})]})]})})})}),d.jsx("section",{className:"px-4 py-8",children:d.jsxs("div",{className:"max-w-md mx-auto text-center",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Ready to get fresh groceries?"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Join thousands of happy customers getting fresh produce delivered in minutes"}),d.jsxs("button",{onClick:()=>i("/auth"),className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white py-4 px-6 rounded-xl font-semibold flex items-center justify-center space-x-2 transition-all transform hover:scale-105 shadow-lg",children:[d.jsx("span",{children:"Start Shopping Now"}),d.jsx(Bv,{className:"w-5 h-5"})]})]})}),d.jsx("div",{className:"h-8"})]})},EC=()=>{};var Hv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},TC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},D1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,v=u&63;l||(v=64,o||(m=64)),r.push(n[h],n[f],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new SC;const m=i<<2|a>>4;if(r.push(m),u!==64){const v=a<<4&240|u>>2;if(r.push(v),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bC=function(t){const e=O1(t);return D1.encodeByteArray(e,!0)},Xc=function(t){return bC(t).replace(/\./g,"")},L1=function(t){try{return D1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=()=>IC().__FIREBASE_DEFAULTS__,PC=()=>{if(typeof process>"u"||typeof Hv>"u")return;const t=Hv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&L1(t[1]);return e&&JSON.parse(e)},Hu=()=>{try{return EC()||kC()||PC()||CC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},M1=t=>{var e,n;return(n=(e=Hu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},V1=t=>{const e=M1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},F1=()=>{var t;return(t=Hu())===null||t===void 0?void 0:t.config},U1=t=>{var e;return(e=Hu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AC=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){return t.endsWith(".cloudworkstations.dev")}async function wm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xc(JSON.stringify(n)),Xc(JSON.stringify(o)),""].join(".")}const Go={};function NC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Go))Go[e]?t.emulator.push(e):t.prod.push(e);return t}function RC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Wv=!1;function xm(t,e){if(typeof window>"u"||typeof document>"u"||!Ds(window.location.host)||Go[t]===e||Go[t]||Wv)return;Go[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=NC().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Wv=!0,o()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=RC(r),v=n("text"),x=document.getElementById(v)||document.createElement("span"),S=n("learnmore"),P=document.getElementById(S)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;a(w),h(P,S);const N=u();l(y,_),w.append(y,x,P,N),document.body.appendChild(w)}i?(x.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function OC(){var t;const e=(t=Hu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VC(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FC(){return!OC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UC(){try{return typeof indexedDB=="object"}catch{return!1}}function $C(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="FirebaseError";class An extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BC,Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ka.prototype.create)}}class Ka{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?zC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new An(s,a,r)}}function zC(t,e){return t.replace(HC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HC=/\{\$([^}]+)}/g;function WC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Is(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(qv(i)&&qv(o)){if(!Is(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function No(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ro(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qC(t,e){const n=new GC(t,e);return n.subscribe.bind(n)}class GC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ph),s.error===void 0&&(s.error=ph),s.complete===void 0&&(s.complete=ph);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ph(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class $r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JC(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YC(t){return t===ls?void 0:t}function JC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const ZC={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},eA=ie.INFO,tA={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},nA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Em{constructor(e){this.name=e,this._logLevel=eA,this._logHandler=nA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const rA=(t,e)=>e.some(n=>t instanceof n);let Gv,Kv;function sA(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iA(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B1=new WeakMap,$f=new WeakMap,z1=new WeakMap,mh=new WeakMap,Tm=new WeakMap;function oA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Or(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&B1.set(n,t)}).catch(()=>{}),Tm.set(e,t),e}function aA(t){if($f.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$f.set(t,e)}let Bf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lA(t){Bf=t(Bf)}function cA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gh(this),e,...n);return z1.set(r,e.sort?e.sort():[e]),Or(r)}:iA().includes(t)?function(...e){return t.apply(gh(this),e),Or(B1.get(this))}:function(...e){return Or(t.apply(gh(this),e))}}function uA(t){return typeof t=="function"?cA(t):(t instanceof IDBTransaction&&aA(t),rA(t,sA())?new Proxy(t,Bf):t)}function Or(t){if(t instanceof IDBRequest)return oA(t);if(mh.has(t))return mh.get(t);const e=uA(t);return e!==t&&(mh.set(t,e),Tm.set(e,t)),e}const gh=t=>Tm.get(t);function dA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Or(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Or(o.result),l.oldVersion,l.newVersion,Or(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const hA=["get","getKey","getAll","getAllKeys","count"],fA=["put","add","delete","clear"],yh=new Map;function Qv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yh.get(e))return yh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hA.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return yh.set(e,i),i}lA(t=>({...t,get:(e,n,r)=>Qv(e,n)||t.get(e,n,r),has:(e,n)=>!!Qv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zf="@firebase/app",Yv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Em("@firebase/app"),gA="@firebase/app-compat",yA="@firebase/analytics-compat",vA="@firebase/analytics",_A="@firebase/app-check-compat",wA="@firebase/app-check",xA="@firebase/auth",EA="@firebase/auth-compat",TA="@firebase/database",SA="@firebase/data-connect",bA="@firebase/database-compat",IA="@firebase/functions",kA="@firebase/functions-compat",PA="@firebase/installations",CA="@firebase/installations-compat",AA="@firebase/messaging",NA="@firebase/messaging-compat",RA="@firebase/performance",jA="@firebase/performance-compat",OA="@firebase/remote-config",DA="@firebase/remote-config-compat",LA="@firebase/storage",MA="@firebase/storage-compat",VA="@firebase/firestore",FA="@firebase/ai",UA="@firebase/firestore-compat",$A="firebase",BA="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="[DEFAULT]",zA={[zf]:"fire-core",[gA]:"fire-core-compat",[vA]:"fire-analytics",[yA]:"fire-analytics-compat",[wA]:"fire-app-check",[_A]:"fire-app-check-compat",[xA]:"fire-auth",[EA]:"fire-auth-compat",[TA]:"fire-rtdb",[SA]:"fire-data-connect",[bA]:"fire-rtdb-compat",[IA]:"fire-fn",[kA]:"fire-fn-compat",[PA]:"fire-iid",[CA]:"fire-iid-compat",[AA]:"fire-fcm",[NA]:"fire-fcm-compat",[RA]:"fire-perf",[jA]:"fire-perf-compat",[OA]:"fire-rc",[DA]:"fire-rc-compat",[LA]:"fire-gcs",[MA]:"fire-gcs-compat",[VA]:"fire-fst",[UA]:"fire-fst-compat",[FA]:"fire-vertex","fire-js":"fire-js",[$A]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Map,HA=new Map,Wf=new Map;function Jv(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ks(t){const e=t.name;if(Wf.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;Wf.set(e,t);for(const n of ka.values())Jv(n,t);for(const n of HA.values())Jv(n,t);return!0}function Wu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new Ka("app","Firebase",WA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=BA;function H1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hf,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Dr.create("bad-app-name",{appName:String(s)});if(n||(n=F1()),!n)throw Dr.create("no-options");const i=ka.get(s);if(i){if(Is(n,i.options)&&Is(r,i.config))return i;throw Dr.create("duplicate-app",{appName:s})}const o=new XC(s);for(const l of Wf.values())o.addComponent(l);const a=new qA(n,r,o);return ka.set(s,a),a}function qu(t=Hf){const e=ka.get(t);if(!e&&t===Hf&&F1())return H1();if(!e)throw Dr.create("no-app",{appName:t});return e}function GA(){return Array.from(ka.values())}function En(t,e,n){var r;let s=(r=zA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(a.join(" "));return}ks(new $r(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="firebase-heartbeat-database",QA=1,Pa="firebase-heartbeat-store";let vh=null;function W1(){return vh||(vh=dA(KA,QA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dr.create("idb-open",{originalErrorMessage:t.message})})),vh}async function YA(t){try{const n=(await W1()).transaction(Pa),r=await n.objectStore(Pa).get(q1(t));return await n.done,r}catch(e){if(e instanceof An)tr.warn(e.message);else{const n=Dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});tr.warn(n.message)}}}async function Xv(t,e){try{const r=(await W1()).transaction(Pa,"readwrite");await r.objectStore(Pa).put(e,q1(t)),await r.done}catch(n){if(n instanceof An)tr.warn(n.message);else{const r=Dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tr.warn(r.message)}}}function q1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=1024,XA=30;class ZA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>XA){const o=nN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zv(),{heartbeatsToSend:r,unsentEntries:s}=eN(this._heartbeatsCache.heartbeats),i=Xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return tr.warn(n),""}}}function Zv(){return new Date().toISOString().substring(0,10)}function eN(t,e=JA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),e0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),e0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UC()?$C().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function e0(t){return Xc(JSON.stringify({version:2,heartbeats:t})).length}function nN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){ks(new $r("platform-logger",e=>new pA(e),"PRIVATE")),ks(new $r("heartbeat",e=>new ZA(e),"PRIVATE")),En(zf,Yv,t),En(zf,Yv,"esm2017"),En("fire-js","")}rN("");function Sm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function G1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sN=G1,K1=new Ka("auth","Firebase",G1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Em("@firebase/auth");function iN(t,...e){Zc.logLevel<=ie.WARN&&Zc.warn(`Auth (${Ls}): ${t}`,...e)}function mc(t,...e){Zc.logLevel<=ie.ERROR&&Zc.error(`Auth (${Ls}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,...e){throw Im(t,...e)}function jt(t,...e){return Im(t,...e)}function bm(t,e,n){const r=Object.assign(Object.assign({},sN()),{[e]:n});return new Ka("auth","Firebase",r).create(e,{appName:t.name})}function Tn(t){return bm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zt(t,"argument-error"),bm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Im(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return K1.create(t,...e)}function W(t,e,...n){if(!t)throw Im(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mc(e),new Error(e)}function nr(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Q1(){return t0()==="http:"||t0()==="https:"}function t0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q1()||LC()||"connection"in navigator)?navigator.onLine:!0}function lN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.shortDelay=e,this.longDelay=n,nr(n>e,"Short delay should be less than long delay!"),this.isMobile=jC()||MC()}get(){return aN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t,e){nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dN=new Qa(3e4,6e4);function Ot(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zt(t,e,n,r,s={}){return J1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Qi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return DC()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ds(t.emulatorConfig.host)&&(u.credentials="include"),Y1.fetch()(await X1(t,t.config.apiHost,n,a),u)})}async function J1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},cN),e);try{const s=new fN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw jo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw jo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw jo(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw bm(t,h,u);Zt(t,h)}}catch(s){if(s instanceof An)throw s;Zt(t,"network-request-failed",{message:String(s)})}}async function Xr(t,e,n,r,s={}){const i=await zt(t,e,n,r,s);return"mfaPendingCredential"in i&&Zt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function X1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?km(t.config,s):`${t.config.apiScheme}://${s}`;return uN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function hN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),dN.get())})}}function jo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){return t!==void 0&&t.getResponse!==void 0}function r0(t){return t!==void 0&&t.enterprise!==void 0}class Z1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t){return(await zt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function eE(t,e){return zt(t,"GET","/v2/recaptchaConfig",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(t,e){return zt(t,"POST","/v1/accounts:delete",e)}async function eu(t,e){return zt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gN(t,e=!1){const n=mt(t),r=await n.getIdToken(e),s=Pm(r);W(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ko(_h(s.auth_time)),issuedAtTime:Ko(_h(s.iat)),expirationTime:Ko(_h(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _h(t){return Number(t)*1e3}function Pm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{const s=L1(n);return s?JSON.parse(s):(mc("Failed to decode base64 JWT payload"),null)}catch(s){return mc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function s0(t){const e=Pm(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Di(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof An&&yN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ko(this.lastLoginAt),this.creationTime=Ko(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Di(t,eu(n,{idToken:r}));W(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?tE(i.providerUserInfo):[],a=wN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Gf(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function _N(t){const e=mt(t);await tu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tE(t){return t.map(e=>{var{providerId:n}=e,r=Sm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e){const n=await J1(t,{},async()=>{const r=Qi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await X1(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ds(t.emulatorConfig.host)&&(l.credentials="include"),Y1.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EN(t,e){return zt(t,"POST","/v2/accounts:revokeToken",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");const n=s0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await xN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xi;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(W(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(W(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xi,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ln{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Sm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Di(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gN(this,e)}reload(){return _N(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_t(this.auth.app))return Promise.reject(Tn(this.auth));const e=await this.getIdToken();return await Di(this,mN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:N,isAnonymous:O,providerData:j,stsTokenManager:T}=n;W(w&&T,e,"internal-error");const E=xi.fromJSON(this.name,T);W(typeof w=="string",e,"internal-error"),ur(f,e.name),ur(m,e.name),W(typeof N=="boolean",e,"internal-error"),W(typeof O=="boolean",e,"internal-error"),ur(v,e.name),ur(x,e.name),ur(S,e.name),ur(P,e.name),ur(_,e.name),ur(y,e.name);const I=new ln({uid:w,auth:e,email:m,emailVerified:N,displayName:f,isAnonymous:O,photoURL:x,phoneNumber:v,tenantId:S,stsTokenManager:E,createdAt:_,lastLoginAt:y});return j&&Array.isArray(j)&&(I.providerData=j.map(k=>Object.assign({},k))),P&&(I._redirectEventId=P),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new xi;s.updateFromServerResponse(n);const i=new ln({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];W(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?tE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new xi;a.updateFromIdToken(r);const l=new ln({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Gf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;function Gn(t){nr(t instanceof Function,"Expected a class definition");let e=i0.get(t);return e?(nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nE.type="NONE";const o0=nE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ei{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=gc(this.userKey,s.apiKey,i),this.fullPersistenceKey=gc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await eu(this.auth,{idToken:e}).catch(()=>{});return n?ln._fromGetAccountInfoResponse(this.auth,n,e):null}return ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ei(Gn(o0),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Gn(o0);const o=gc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await eu(e,{idToken:h}).catch(()=>{});if(!m)break;f=await ln._fromGetAccountInfoResponse(e,m,h)}else f=ln._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ei(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ei(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lE(e))return"Blackberry";if(cE(e))return"Webos";if(sE(e))return"Safari";if((e.includes("chrome/")||iE(e))&&!e.includes("edge/"))return"Chrome";if(aE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rE(t=pt()){return/firefox\//i.test(t)}function sE(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iE(t=pt()){return/crios\//i.test(t)}function oE(t=pt()){return/iemobile/i.test(t)}function aE(t=pt()){return/android/i.test(t)}function lE(t=pt()){return/blackberry/i.test(t)}function cE(t=pt()){return/webos/i.test(t)}function Cm(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TN(t=pt()){var e;return Cm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SN(){return VC()&&document.documentMode===10}function uE(t=pt()){return Cm(t)||aE(t)||cE(t)||lE(t)||/windows phone/i.test(t)||oE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e=[]){let n;switch(t){case"Browser":n=a0(pt());break;case"Worker":n=`${a0(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ls}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e={}){return zt(t,"GET","/v2/passwordPolicy",Ot(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=6;class PN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:kN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l0(this),this.idTokenSubscription=new l0(this),this.beforeStateQueue=new bN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ei.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eu(this,{idToken:e}),r=await ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_t(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_t(this.app))return Promise.reject(Tn(this));const n=e?mt(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _t(this.app)?Promise.reject(Tn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _t(this.app)?Promise.reject(Tn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IN(this),n=new PN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ka("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await Ei.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(_t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function mn(t){return mt(t)}class l0{constructor(e){this.auth=e,this.observer=null,this.addObserver=qC(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AN(t){Ya=t}function Am(t){return Ya.loadJS(t)}function NN(){return Ya.recaptchaV2Script}function RN(){return Ya.recaptchaEnterpriseScript}function jN(){return Ya.gapiScript}function hE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=500,DN=6e4,Bl=1e12;class LN{constructor(e){this.auth=e,this.counter=Bl,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new FN(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Bl;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Bl;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Bl;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class MN{constructor(){this.enterprise=new VN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class VN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FN{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;W(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=UN(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},DN)},ON))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function UN(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const $N="recaptcha-enterprise",Qo="NO_RECAPTCHA";class fE{constructor(e){this.type=$N,this.auth=mn(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{eE(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Z1(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;r0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Qo)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&r0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=RN();l.length!==0&&(l+=a),Am(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function bo(t,e,n,r=!1,s=!1){const i=new fE(t);let o;if(s)o=Qo;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ti(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await bo(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await bo(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(s==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await bo(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await bo(t,e,n,!1,!0);return r(t,h)}return Promise.reject(l)})}else{const a=await bo(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(s+" provider is not supported.")}async function BN(t){const e=mn(t),n=await eE(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Z1(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new fE(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){const n=Wu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Is(i,e??{}))return s;Zt(s,"already-initialized")}return n.initialize({options:e})}function HN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function WN(t,e,n){const r=mn(t);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=pE(e),{host:o,port:a}=qN(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(Is(u,r.config.emulator)&&Is(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ds(o)?(wm(`${i}//${o}${l}`),xm("Auth",!0)):GN()}function pE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qN(t){const e=pE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:c0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:c0(o)}}}function c0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function KN(t,e){return zt(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){return Xr(t,"POST","/v1/accounts:signInWithPassword",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e){return Xr(t,"POST","/v1/accounts:signInWithEmailLink",Ot(t,e))}async function JN(t,e){return Xr(t,"POST","/v1/accounts:signInWithEmailLink",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends Gu{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ca(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ca(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ti(e,n,"signInWithPassword",QN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return YN(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ti(e,r,"signUpPassword",KN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JN(e,{idToken:n,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(t,e){return Xr(t,"POST","/v1/accounts:signInWithIdp",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="http://localhost";class Ps extends Gu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Sm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ps(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Si(e,n)}buildRequest(){const e={requestUri:XN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(t,e){return zt(t,"POST","/v1/accounts:sendVerificationCode",Ot(t,e))}async function ZN(t,e){return Xr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,e))}async function eR(t,e){const n=await Xr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,e));if(n.temporaryProof)throw jo(t,"account-exists-with-different-credential",n);return n}const tR={USER_NOT_FOUND:"user-not-found"};async function nR(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Xr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,n),tR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends Gu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Yo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Yo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return ZN(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return eR(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return nR(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Yo({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sR(t){const e=No(Ro(t)).link,n=e?No(Ro(e)).deep_link_id:null,r=No(Ro(t)).deep_link_id;return(r?No(Ro(r)).link:null)||r||n||e||t}class Nm{constructor(e){var n,r,s,i,o,a;const l=No(Ro(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=rR((s=l.mode)!==null&&s!==void 0?s:null);W(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=sR(e);try{return new Nm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.providerId=Yi.PROVIDER_ID}static credential(e,n){return Ca._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Nm.parseLink(n);return W(r,"argument-error"),Ca._fromEmailAndCode(e,r.code,r.tenantId)}}Yi.PROVIDER_ID="password";Yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Rm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Ja{constructor(){super("facebook.com")}static credential(e){return Ps._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ps._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Ja{constructor(){super("github.com")}static credential(e){return Ps._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Ja{constructor(){super("twitter.com")}static credential(e,n){return Ps._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e){return Xr(t,"POST","/v1/accounts:signUp",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ln._fromIdTokenResponse(e,r,s),o=d0(r);return new Cs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=d0(r);return new Cs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function d0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends An{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,nu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new nu(e,n,r,s)}}function mE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?nu._fromErrorAndOperation(t,i,e,r):i})}async function oR(t,e,n=!1){const r=await Di(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e,n=!1){const{auth:r}=t;if(_t(r.app))return Promise.reject(Tn(r));const s="reauthenticate";try{const i=await Di(t,mE(r,s,e,t),n);W(i.idToken,r,"internal-error");const o=Pm(i.idToken);W(o,r,"internal-error");const{sub:a}=o;return W(t.uid===a,r,"user-mismatch"),Cs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gE(t,e,n=!1){if(_t(t.app))return Promise.reject(Tn(t));const r="signIn",s=await mE(t,r,e),i=await Cs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function yE(t,e){return gE(mn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vE(t){const e=mn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lR(t,e,n){if(_t(t.app))return Promise.reject(Tn(t));const r=mn(t),o=await Ti(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iR,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&vE(t),l}),a=await Cs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function cR(t,e,n){return _t(t.app)?Promise.reject(Tn(t)):yE(mt(t),Yi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t,e){return zt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=mt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Di(r,uR(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function hR(t,e,n,r){return mt(t).onIdTokenChanged(e,n,r)}function fR(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function pR(t,e,n,r){return mt(t).onAuthStateChanged(e,n,r)}function mR(t){return mt(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t,e){return zt(t,"POST","/v2/accounts/mfaEnrollment:start",Ot(t,e))}const ru="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ru,"1"),this.storage.removeItem(ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=1e3,yR=10;class wE extends _E{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);SN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,yR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wE.type="LOCAL";const vR=wE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE extends _E{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xE.type="SESSION";const EE=xE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ku(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await _R(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ku.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=jm("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){return window}function xR(t){Le().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(){return typeof Le().WorkerGlobalScope<"u"&&typeof Le().importScripts=="function"}async function ER(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SR(){return Om()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="firebaseLocalStorageDb",bR=1,su="firebaseLocalStorage",SE="fbase_key";class Xa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qu(t,e){return t.transaction([su],e?"readwrite":"readonly").objectStore(su)}function IR(){const t=indexedDB.deleteDatabase(TE);return new Xa(t).toPromise()}function Kf(){const t=indexedDB.open(TE,bR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(su,{keyPath:SE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(su)?e(r):(r.close(),await IR(),e(await Kf()))})})}async function f0(t,e,n){const r=Qu(t,!0).put({[SE]:e,value:n});return new Xa(r).toPromise()}async function kR(t,e){const n=Qu(t,!1).get(e),r=await new Xa(n).toPromise();return r===void 0?null:r.value}function p0(t,e){const n=Qu(t,!0).delete(e);return new Xa(n).toPromise()}const PR=800,CR=3;class bE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Om()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ku._getInstance(SR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ER(),!this.activeServiceWorker)return;this.sender=new wR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kf();return await f0(e,ru,"1"),await p0(e,ru),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>f0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Qu(s,!1).getAll();return new Xa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bE.type="LOCAL";const AR=bE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e){return zt(t,"POST","/v2/accounts/mfaSignIn:start",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=hE("rcb"),NR=new Qa(3e4,6e4);class RR{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Le().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return W(jR(n),e,"argument-error"),this.shouldResolveImmediately(n)&&n0(Le().grecaptcha)?Promise.resolve(Le().grecaptcha):new Promise((r,s)=>{const i=Le().setTimeout(()=>{s(jt(e,"network-request-failed"))},NR.get());Le()[wh]=()=>{Le().clearTimeout(i),delete Le()[wh];const a=Le().grecaptcha;if(!a||!n0(a)){s(jt(e,"internal-error"));return}const l=a.render;a.render=(u,h)=>{const f=l(u,h);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${NN()}?${Qi({onload:wh,render:"explicit",hl:n})}`;Am(o).catch(()=>{clearTimeout(i),s(jt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Le().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function jR(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class OR{async load(e){return new LN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="recaptcha",DR={theme:"light",type:"image"};class LR{constructor(e,n,r=Object.assign({},DR)){this.parameters=r,this.type=Jo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(e),this.isInvisible=this.parameters.size==="invisible",W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;W(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new OR:new RR,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Le()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){W(Q1()&&!Om(),this.auth,"internal-error"),await MR(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await pN(this.auth);W(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function MR(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Yo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function FR(t,e,n){if(_t(t.app))return Promise.reject(Tn(t));const r=mn(t),s=await UR(r,e,mt(n));return new VR(s,i=>yE(r,i))}async function UR(t,e,n){var r;if(!t._getRecaptchaConfig())try{await BN(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"&&(s={phoneNumber:e}),"session"in s){const i=s.session;if("phoneNumber"in s){W(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ti(t,o,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===Qo){W((n==null?void 0:n.type)===Jo,h,"argument-error");const m=await xh(h,f,n);return h0(h,m)}return h0(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{W(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;W(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ti(t,a,"mfaSmsSignIn",async(f,m)=>{if(m.phoneSignInInfo.captchaResponse===Qo){W((n==null?void 0:n.type)===Jo,f,"argument-error");const v=await xh(f,m,n);return m0(f,v)}return m0(f,m)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ti(t,i,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===Qo){W((n==null?void 0:n.type)===Jo,u,"argument-error");const f=await xh(u,h,n);return u0(u,f)}return u0(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function xh(t,e,n){W(n.type===Jo,t,"argument-error");const r=await n.verify();W(typeof r=="string",t,"argument-error");const s=Object.assign({},e);if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,a=s.phoneEnrollmentInfo.clientType,l=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,a=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:a}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t,e){return e?Gn(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm extends Gu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $R(t){return gE(t.auth,new Dm(t),t.bypassAuthState)}function BR(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),aR(n,new Dm(t),t.bypassAuthState)}async function zR(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),oR(n,new Dm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $R;case"linkViaPopup":case"linkViaRedirect":return zR;case"reauthViaPopup":case"reauthViaRedirect":return BR;default:Zt(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new Qa(2e3,1e4);async function WR(t,e,n){if(_t(t.app))return Promise.reject(jt(t,"operation-not-supported-in-this-environment"));const r=mn(t);oN(t,e,Rm);const s=IE(r,n);return new gs(r,"signInViaPopup",e,s).executeNotNull()}class gs extends kE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,gs.currentPopupAction&&gs.currentPopupAction.cancel(),gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HR.get())};e()}}gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="pendingRedirect",yc=new Map;class GR extends kE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yc.get(this.auth._key());if(!e){try{const r=await KR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yc.set(this.auth._key(),e)}return this.bypassAuthState||yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KR(t,e){const n=JR(e),r=YR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function QR(t,e){yc.set(t._key(),e)}function YR(t){return Gn(t._redirectPersistence)}function JR(t){return gc(qR,t.config.apiKey,t.name)}async function XR(t,e,n=!1){if(_t(t.app))return Promise.reject(Tn(t));const r=mn(t),s=IE(r,e),o=await new GR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=10*60*1e3;class e2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!PE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZR&&this.cachedEventUids.clear(),this.cachedEventUids.has(g0(e))}saveEventToCache(e){this.cachedEventUids.add(g0(e)),this.lastProcessedEventTime=Date.now()}}function g0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function t2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e={}){return zt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s2=/^https?/;async function i2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await n2(t);for(const n of e)try{if(o2(n))return}catch{}Zt(t,"unauthorized-domain")}function o2(t){const e=qf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!s2.test(n))return!1;if(r2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Qa(3e4,6e4);function y0(){const t=Le().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function l2(t){return new Promise((e,n)=>{var r,s,i;function o(){y0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y0(),n(jt(t,"network-request-failed"))},timeout:a2.get()})}if(!((s=(r=Le().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Le().gapi)===null||i===void 0)&&i.load)o();else{const a=hE("iframefcb");return Le()[a]=()=>{gapi.load?o():n(jt(t,"network-request-failed"))},Am(`${jN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw vc=null,e})}let vc=null;function c2(t){return vc=vc||l2(t),vc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Qa(5e3,15e3),d2="__/auth/iframe",h2="emulator/auth/iframe",f2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m2(t){const e=t.config;W(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?km(e,h2):`https://${t.config.authDomain}/${d2}`,r={apiKey:e.apiKey,appName:t.name,v:Ls},s=p2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qi(r).slice(1)}`}async function g2(t){const e=await c2(t),n=Le().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:m2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jt(t,"network-request-failed"),a=Le().setTimeout(()=>{i(o)},u2.get());function l(){Le().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},v2=500,_2=600,w2="_blank",x2="http://localhost";class v0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E2(t,e,n,r=v2,s=_2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},y2),{width:r.toString(),height:s.toString(),top:i,left:o}),u=pt().toLowerCase();n&&(a=iE(u)?w2:n),rE(u)&&(e=e||x2,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(TN(u)&&a!=="_self")return T2(e||"",a),new v0(null);const f=window.open(e||"",a,h);W(f,t,"popup-blocked");try{f.focus()}catch{}return new v0(f)}function T2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="__/auth/handler",b2="emulator/auth/handler",I2=encodeURIComponent("fac");async function _0(t,e,n,r,s,i){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ls,eventId:s};if(e instanceof Rm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Ja){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${I2}=${encodeURIComponent(l)}`:"";return`${k2(t)}?${Qi(a).slice(1)}${u}`}function k2({config:t}){return t.emulator?km(t,b2):`https://${t.authDomain}/${S2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="webStorageSupport";class P2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EE,this._completeRedirectFn=XR,this._overrideRedirectResult=QR}async _openPopup(e,n,r,s){var i;nr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await _0(e,n,r,qf(),s);return E2(e,o,jm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await _0(e,n,r,qf(),s);return xR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(nr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await g2(e),r=new e2(e);return n.register("authEvent",s=>(W(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Eh,{type:Eh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Eh];o!==void 0&&n(!!o),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uE()||sE()||Cm()}}const C2=P2;var w0="@firebase/auth",x0="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R2(t){ks(new $r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dE(t)},u=new CN(r,s,i,l);return HN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ks(new $r("auth-internal",e=>{const n=mn(e.getProvider("auth").getImmediate());return(r=>new A2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(w0,x0,N2(t)),En(w0,x0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=5*60,O2=U1("authIdTokenMaxAge")||j2;let E0=null;const D2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>O2)return;const s=n==null?void 0:n.token;E0!==s&&(E0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function L2(t=qu()){const e=Wu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zN(t,{popupRedirectResolver:C2,persistence:[AR,vR,EE]}),r=U1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=D2(i.toString());fR(n,o,()=>o(n.currentUser)),hR(n,a=>o(a))}}const s=M1("auth");return s&&WN(n,`http://${s}`),n}function M2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}AN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",M2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R2("Browser");var V2="firebase",F2="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En(V2,F2,"app");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,CE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,E){function I(){}I.prototype=E.prototype,T.D=E.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(k,A,R){for(var C=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)C[pe-2]=arguments[pe];return E.prototype[A].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,E,I){I||(I=0);var k=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)k[A]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(A=0;16>A;++A)k[A]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=T.g[0],I=T.g[1],A=T.g[2];var R=T.g[3],C=E+(R^I&(A^R))+k[0]+3614090360&4294967295;E=I+(C<<7&4294967295|C>>>25),C=R+(A^E&(I^A))+k[1]+3905402710&4294967295,R=E+(C<<12&4294967295|C>>>20),C=A+(I^R&(E^I))+k[2]+606105819&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(E^A&(R^E))+k[3]+3250441966&4294967295,I=A+(C<<22&4294967295|C>>>10),C=E+(R^I&(A^R))+k[4]+4118548399&4294967295,E=I+(C<<7&4294967295|C>>>25),C=R+(A^E&(I^A))+k[5]+1200080426&4294967295,R=E+(C<<12&4294967295|C>>>20),C=A+(I^R&(E^I))+k[6]+2821735955&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(E^A&(R^E))+k[7]+4249261313&4294967295,I=A+(C<<22&4294967295|C>>>10),C=E+(R^I&(A^R))+k[8]+1770035416&4294967295,E=I+(C<<7&4294967295|C>>>25),C=R+(A^E&(I^A))+k[9]+2336552879&4294967295,R=E+(C<<12&4294967295|C>>>20),C=A+(I^R&(E^I))+k[10]+4294925233&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(E^A&(R^E))+k[11]+2304563134&4294967295,I=A+(C<<22&4294967295|C>>>10),C=E+(R^I&(A^R))+k[12]+1804603682&4294967295,E=I+(C<<7&4294967295|C>>>25),C=R+(A^E&(I^A))+k[13]+4254626195&4294967295,R=E+(C<<12&4294967295|C>>>20),C=A+(I^R&(E^I))+k[14]+2792965006&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(E^A&(R^E))+k[15]+1236535329&4294967295,I=A+(C<<22&4294967295|C>>>10),C=E+(A^R&(I^A))+k[1]+4129170786&4294967295,E=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(E^I))+k[6]+3225465664&4294967295,R=E+(C<<9&4294967295|C>>>23),C=A+(E^I&(R^E))+k[11]+643717713&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^E&(A^R))+k[0]+3921069994&4294967295,I=A+(C<<20&4294967295|C>>>12),C=E+(A^R&(I^A))+k[5]+3593408605&4294967295,E=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(E^I))+k[10]+38016083&4294967295,R=E+(C<<9&4294967295|C>>>23),C=A+(E^I&(R^E))+k[15]+3634488961&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^E&(A^R))+k[4]+3889429448&4294967295,I=A+(C<<20&4294967295|C>>>12),C=E+(A^R&(I^A))+k[9]+568446438&4294967295,E=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(E^I))+k[14]+3275163606&4294967295,R=E+(C<<9&4294967295|C>>>23),C=A+(E^I&(R^E))+k[3]+4107603335&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^E&(A^R))+k[8]+1163531501&4294967295,I=A+(C<<20&4294967295|C>>>12),C=E+(A^R&(I^A))+k[13]+2850285829&4294967295,E=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(E^I))+k[2]+4243563512&4294967295,R=E+(C<<9&4294967295|C>>>23),C=A+(E^I&(R^E))+k[7]+1735328473&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^E&(A^R))+k[12]+2368359562&4294967295,I=A+(C<<20&4294967295|C>>>12),C=E+(I^A^R)+k[5]+4294588738&4294967295,E=I+(C<<4&4294967295|C>>>28),C=R+(E^I^A)+k[8]+2272392833&4294967295,R=E+(C<<11&4294967295|C>>>21),C=A+(R^E^I)+k[11]+1839030562&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^E)+k[14]+4259657740&4294967295,I=A+(C<<23&4294967295|C>>>9),C=E+(I^A^R)+k[1]+2763975236&4294967295,E=I+(C<<4&4294967295|C>>>28),C=R+(E^I^A)+k[4]+1272893353&4294967295,R=E+(C<<11&4294967295|C>>>21),C=A+(R^E^I)+k[7]+4139469664&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^E)+k[10]+3200236656&4294967295,I=A+(C<<23&4294967295|C>>>9),C=E+(I^A^R)+k[13]+681279174&4294967295,E=I+(C<<4&4294967295|C>>>28),C=R+(E^I^A)+k[0]+3936430074&4294967295,R=E+(C<<11&4294967295|C>>>21),C=A+(R^E^I)+k[3]+3572445317&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^E)+k[6]+76029189&4294967295,I=A+(C<<23&4294967295|C>>>9),C=E+(I^A^R)+k[9]+3654602809&4294967295,E=I+(C<<4&4294967295|C>>>28),C=R+(E^I^A)+k[12]+3873151461&4294967295,R=E+(C<<11&4294967295|C>>>21),C=A+(R^E^I)+k[15]+530742520&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^E)+k[2]+3299628645&4294967295,I=A+(C<<23&4294967295|C>>>9),C=E+(A^(I|~R))+k[0]+4096336452&4294967295,E=I+(C<<6&4294967295|C>>>26),C=R+(I^(E|~A))+k[7]+1126891415&4294967295,R=E+(C<<10&4294967295|C>>>22),C=A+(E^(R|~I))+k[14]+2878612391&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~E))+k[5]+4237533241&4294967295,I=A+(C<<21&4294967295|C>>>11),C=E+(A^(I|~R))+k[12]+1700485571&4294967295,E=I+(C<<6&4294967295|C>>>26),C=R+(I^(E|~A))+k[3]+2399980690&4294967295,R=E+(C<<10&4294967295|C>>>22),C=A+(E^(R|~I))+k[10]+4293915773&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~E))+k[1]+2240044497&4294967295,I=A+(C<<21&4294967295|C>>>11),C=E+(A^(I|~R))+k[8]+1873313359&4294967295,E=I+(C<<6&4294967295|C>>>26),C=R+(I^(E|~A))+k[15]+4264355552&4294967295,R=E+(C<<10&4294967295|C>>>22),C=A+(E^(R|~I))+k[6]+2734768916&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~E))+k[13]+1309151649&4294967295,I=A+(C<<21&4294967295|C>>>11),C=E+(A^(I|~R))+k[4]+4149444226&4294967295,E=I+(C<<6&4294967295|C>>>26),C=R+(I^(E|~A))+k[11]+3174756917&4294967295,R=E+(C<<10&4294967295|C>>>22),C=A+(E^(R|~I))+k[2]+718787259&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~E))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var I=E-this.blockSize,k=this.B,A=this.h,R=0;R<E;){if(A==0)for(;R<=I;)s(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<E;)if(k[A++]=T.charCodeAt(R++),A==this.blockSize){s(this,k),A=0;break}}else for(;R<E;)if(k[A++]=T[R++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var I=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=I&255,I/=256;for(this.u(T),T=Array(16),E=I=0;4>E;++E)for(var k=0;32>k;k+=8)T[I++]=this.g[E]>>>k&255;return T};function i(T,E){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=E(T)}function o(T,E){this.h=E;for(var I=[],k=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;k&&R==E||(I[A]=R,k=!1)}this.g=I}var a={};function l(T){return-128<=T&&128>T?i(T,function(E){return new o([E|0],0>E?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return P(u(-T));for(var E=[],I=1,k=0;T>=I;k++)E[k]=T/I|0,I*=4294967296;return new o(E,0)}function h(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return P(h(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(E,8)),k=f,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),C=parseInt(T.substring(A,A+R),E);8>R?(R=u(Math.pow(E,R)),k=k.j(R).add(u(C))):(k=k.j(I),k=k.add(u(C)))}return k}var f=l(0),m=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-P(this).m();for(var T=0,E=1,I=0;I<this.g.length;I++){var k=this.i(I);T+=(0<=k?k:4294967296+k)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(S(this))return"-"+P(this).toString(T);for(var E=u(Math.pow(T,6)),I=this,k="";;){var A=N(I,E).g;I=_(I,A.j(E));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=A,x(I))return R+k;for(;6>R.length;)R="0"+R;k=R+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function S(T){return T.h==-1}t.l=function(T){return T=_(this,T),S(T)?-1:x(T)?0:1};function P(T){for(var E=T.g.length,I=[],k=0;k<E;k++)I[k]=~T.g[k];return new o(I,~T.h).add(m)}t.abs=function(){return S(this)?P(this):this},t.add=function(T){for(var E=Math.max(this.g.length,T.g.length),I=[],k=0,A=0;A<=E;A++){var R=k+(this.i(A)&65535)+(T.i(A)&65535),C=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);k=C>>>16,R&=65535,C&=65535,I[A]=C<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function _(T,E){return T.add(P(E))}t.j=function(T){if(x(this)||x(T))return f;if(S(this))return S(T)?P(this).j(P(T)):P(P(this).j(T));if(S(T))return P(this.j(P(T)));if(0>this.l(v)&&0>T.l(v))return u(this.m()*T.m());for(var E=this.g.length+T.g.length,I=[],k=0;k<2*E;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var A=0;A<T.g.length;A++){var R=this.i(k)>>>16,C=this.i(k)&65535,pe=T.i(A)>>>16,Te=T.i(A)&65535;I[2*k+2*A]+=C*Te,y(I,2*k+2*A),I[2*k+2*A+1]+=R*Te,y(I,2*k+2*A+1),I[2*k+2*A+1]+=C*pe,y(I,2*k+2*A+1),I[2*k+2*A+2]+=R*pe,y(I,2*k+2*A+2)}for(k=0;k<E;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=E;k<2*E;k++)I[k]=0;return new o(I,0)};function y(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function w(T,E){this.g=T,this.h=E}function N(T,E){if(x(E))throw Error("division by zero");if(x(T))return new w(f,f);if(S(T))return E=N(P(T),E),new w(P(E.g),P(E.h));if(S(E))return E=N(T,P(E)),new w(P(E.g),E.h);if(30<T.g.length){if(S(T)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var I=m,k=E;0>=k.l(T);)I=O(I),k=O(k);var A=j(I,1),R=j(k,1);for(k=j(k,2),I=j(I,2);!x(k);){var C=R.add(k);0>=C.l(T)&&(A=A.add(I),R=C),k=j(k,1),I=j(I,1)}return E=_(T,A.j(E)),new w(A,E)}for(A=f;0<=T.l(E);){for(I=Math.max(1,Math.floor(T.m()/E.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),R=u(I),C=R.j(E);S(C)||0<C.l(T);)I-=k,R=u(I),C=R.j(E);x(R)&&(R=m),A=A.add(R),T=_(T,C)}return new w(A,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var E=Math.max(this.g.length,T.g.length),I=[],k=0;k<E;k++)I[k]=this.i(k)&T.i(k);return new o(I,this.h&T.h)},t.or=function(T){for(var E=Math.max(this.g.length,T.g.length),I=[],k=0;k<E;k++)I[k]=this.i(k)|T.i(k);return new o(I,this.h|T.h)},t.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),I=[],k=0;k<E;k++)I[k]=this.i(k)^T.i(k);return new o(I,this.h^T.h)};function O(T){for(var E=T.g.length+1,I=[],k=0;k<E;k++)I[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(I,T.h)}function j(T,E){var I=E>>5;E%=32;for(var k=T.g.length-I,A=[],R=0;R<k;R++)A[R]=0<E?T.i(R+I)>>>E|T.i(R+I+1)<<32-E:T.i(R+I);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Lr=o}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,Oo,NE,_c,Qf,RE,jE,OE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,g){return c==Array.prototype||c==Object.prototype||(c[p]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var p=0;p<c.length;++p){var g=c[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(c,p){if(p)e:{var g=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var D=c[b];if(!(D in g))break e;g=g[D]}c=c[c.length-1],b=g[c],p=p(b),p!=b&&p!=null&&e(g,c,{configurable:!0,writable:!0,value:p})}}function i(c,p){c instanceof String&&(c+="");var g=0,b=!1,D={next:function(){if(!b&&g<c.length){var M=g++;return{value:p(M,c[M]),done:!1}}return b=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(c){return c||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,g){return c.call.apply(c.bind,arguments)}function f(c,p,g){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,b),c.apply(p,D)}}return function(){return c.apply(p,arguments)}}function m(c,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function v(c,p){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function x(c,p){function g(){}g.prototype=p.prototype,c.aa=p.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(b,D,M){for(var B=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)B[ge-2]=arguments[ge];return p.prototype[D].apply(b,B)}}function S(c){const p=c.length;if(0<p){const g=Array(p);for(let b=0;b<p;b++)g[b]=c[b];return g}return[]}function P(c,p){for(let g=1;g<arguments.length;g++){const b=arguments[g];if(l(b)){const D=c.length||0,M=b.length||0;c.length=D+M;for(let B=0;B<M;B++)c[D+B]=b[B]}else c.push(b)}}class _{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(c){return/^[\s\xa0]*$/.test(c)}function w(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function N(c){return N[" "](c),c}N[" "]=function(){};var O=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function j(c,p,g){for(const b in c)p.call(g,c[b],b,c)}function T(c,p){for(const g in c)p.call(void 0,c[g],g,c)}function E(c){const p={};for(const g in c)p[g]=c[g];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,p){let g,b;for(let D=1;D<arguments.length;D++){b=arguments[D];for(g in b)c[g]=b[g];for(let M=0;M<I.length;M++)g=I[M],Object.prototype.hasOwnProperty.call(b,g)&&(c[g]=b[g])}}function A(c){var p=1;c=c.split(":");const g=[];for(;0<p&&c.length;)g.push(c.shift()),p--;return c.length&&g.push(c.join(":")),g}function R(c){a.setTimeout(()=>{throw c},0)}function C(){var c=z;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class pe{constructor(){this.h=this.g=null}add(p,g){const b=Te.get();b.set(p,g),this.h?this.h.next=b:this.g=b,this.h=b}}var Te=new _(()=>new J,c=>c.reset());class J{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,V=!1,z=new pe,q=()=>{const c=a.Promise.resolve(void 0);ne=()=>{c.then(he)}};var he=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(g){R(g)}var p=Te;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}V=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var Nn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return c}();function Rn(c,p){if(Re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(O){e:{try{N(p.nodeName);var D=!0;break e}catch{}D=!1}D||(p=null)}}else g=="mouseover"?p=c.fromElement:g=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:jn[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Rn.aa.h.call(this)}}x(Rn,Re);var jn={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var On="closure_listenable_"+(1e6*Math.random()|0),ib=0;function ob(c,p,g,b,D){this.listener=c,this.proxy=null,this.src=p,this.type=g,this.capture=!!b,this.ha=D,this.key=++ib,this.da=this.fa=!1}function al(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ll(c){this.src=c,this.g={},this.h=0}ll.prototype.add=function(c,p,g,b,D){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var B=_d(c,p,b,D);return-1<B?(p=c[B],g||(p.fa=!1)):(p=new ob(p,this.src,M,!!b,D),p.fa=g,c.push(p)),p};function vd(c,p){var g=p.type;if(g in c.g){var b=c.g[g],D=Array.prototype.indexOf.call(b,p,void 0),M;(M=0<=D)&&Array.prototype.splice.call(b,D,1),M&&(al(p),c.g[g].length==0&&(delete c.g[g],c.h--))}}function _d(c,p,g,b){for(var D=0;D<c.length;++D){var M=c[D];if(!M.da&&M.listener==p&&M.capture==!!g&&M.ha==b)return D}return-1}var wd="closure_lm_"+(1e6*Math.random()|0),xd={};function Ig(c,p,g,b,D){if(Array.isArray(p)){for(var M=0;M<p.length;M++)Ig(c,p[M],g,b,D);return null}return g=Cg(g),c&&c[On]?c.K(p,g,u(b)?!!b.capture:!!b,D):ab(c,p,g,!1,b,D)}function ab(c,p,g,b,D,M){if(!p)throw Error("Invalid event type");var B=u(D)?!!D.capture:!!D,ge=Td(c);if(ge||(c[wd]=ge=new ll(c)),g=ge.add(p,g,b,B,M),g.proxy)return g;if(b=lb(),g.proxy=b,b.src=c,b.listener=g,c.addEventListener)Nn||(D=B),D===void 0&&(D=!1),c.addEventListener(p.toString(),b,D);else if(c.attachEvent)c.attachEvent(Pg(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return g}function lb(){function c(g){return p.call(c.src,c.listener,g)}const p=cb;return c}function kg(c,p,g,b,D){if(Array.isArray(p))for(var M=0;M<p.length;M++)kg(c,p[M],g,b,D);else b=u(b)?!!b.capture:!!b,g=Cg(g),c&&c[On]?(c=c.i,p=String(p).toString(),p in c.g&&(M=c.g[p],g=_d(M,g,b,D),-1<g&&(al(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete c.g[p],c.h--)))):c&&(c=Td(c))&&(p=c.g[p.toString()],c=-1,p&&(c=_d(p,g,b,D)),(g=-1<c?p[c]:null)&&Ed(g))}function Ed(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[On])vd(p.i,c);else{var g=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(g,b,c.capture):p.detachEvent?p.detachEvent(Pg(g),b):p.addListener&&p.removeListener&&p.removeListener(b),(g=Td(p))?(vd(g,c),g.h==0&&(g.src=null,p[wd]=null)):al(c)}}}function Pg(c){return c in xd?xd[c]:xd[c]="on"+c}function cb(c,p){if(c.da)c=!0;else{p=new Rn(p,this);var g=c.listener,b=c.ha||c.src;c.fa&&Ed(c),c=g.call(b,p)}return c}function Td(c){return c=c[wd],c instanceof ll?c:null}var Sd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cg(c){return typeof c=="function"?c:(c[Sd]||(c[Sd]=function(p){return c.handleEvent(p)}),c[Sd])}function nt(){ue.call(this),this.i=new ll(this),this.M=this,this.F=null}x(nt,ue),nt.prototype[On]=!0,nt.prototype.removeEventListener=function(c,p,g,b){kg(this,c,p,g,b)};function gt(c,p){var g,b=c.F;if(b)for(g=[];b;b=b.F)g.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new Re(p,c);else if(p instanceof Re)p.target=p.target||c;else{var D=p;p=new Re(b,c),k(p,D)}if(D=!0,g)for(var M=g.length-1;0<=M;M--){var B=p.g=g[M];D=cl(B,b,!0,p)&&D}if(B=p.g=c,D=cl(B,b,!0,p)&&D,D=cl(B,b,!1,p)&&D,g)for(M=0;M<g.length;M++)B=p.g=g[M],D=cl(B,b,!1,p)&&D}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var g=c.g[p],b=0;b<g.length;b++)al(g[b]);delete c.g[p],c.h--}}this.F=null},nt.prototype.K=function(c,p,g,b){return this.i.add(String(c),p,!1,g,b)},nt.prototype.L=function(c,p,g,b){return this.i.add(String(c),p,!0,g,b)};function cl(c,p,g,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var D=!0,M=0;M<p.length;++M){var B=p[M];if(B&&!B.da&&B.capture==g){var ge=B.listener,Qe=B.ha||B.src;B.fa&&vd(c.i,B),D=ge.call(Qe,b)!==!1&&D}}return D&&!b.defaultPrevented}function Ag(c,p,g){if(typeof c=="function")g&&(c=m(c,g));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function Ng(c){c.g=Ag(()=>{c.g=null,c.i&&(c.i=!1,Ng(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ub extends ue{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ng(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(c){ue.call(this),this.h=c,this.g={}}x(ro,ue);var Rg=[];function jg(c){j(c.g,function(p,g){this.g.hasOwnProperty(g)&&Ed(p)},c),c.g={}}ro.prototype.N=function(){ro.aa.N.call(this),jg(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bd=a.JSON.stringify,db=a.JSON.parse,hb=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Id(){}Id.prototype.h=null;function Og(c){return c.h||(c.h=c.i())}function Dg(){}var so={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kd(){Re.call(this,"d")}x(kd,Re);function Pd(){Re.call(this,"c")}x(Pd,Re);var ts={},Lg=null;function ul(){return Lg=Lg||new nt}ts.La="serverreachability";function Mg(c){Re.call(this,ts.La,c)}x(Mg,Re);function io(c){const p=ul();gt(p,new Mg(p))}ts.STAT_EVENT="statevent";function Vg(c,p){Re.call(this,ts.STAT_EVENT,c),this.stat=p}x(Vg,Re);function yt(c){const p=ul();gt(p,new Vg(p,c))}ts.Ma="timingevent";function Fg(c,p){Re.call(this,ts.Ma,c),this.size=p}x(Fg,Re);function oo(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function ao(){this.g=!0}ao.prototype.xa=function(){this.g=!1};function fb(c,p,g,b,D,M){c.info(function(){if(c.g)if(M)for(var B="",ge=M.split("&"),Qe=0;Qe<ge.length;Qe++){var de=ge[Qe].split("=");if(1<de.length){var rt=de[0];de=de[1];var st=rt.split("_");B=2<=st.length&&st[1]=="type"?B+(rt+"="+de+"&"):B+(rt+"=redacted&")}}else B=null;else B=M;return"XMLHTTP REQ ("+b+") [attempt "+D+"]: "+p+`
`+g+`
`+B})}function pb(c,p,g,b,D,M,B){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+D+"]: "+p+`
`+g+`
`+M+" "+B})}function Bs(c,p,g,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+gb(c,g)+(b?" "+b:"")})}function mb(c,p){c.info(function(){return"TIMEOUT: "+p})}ao.prototype.info=function(){};function gb(c,p){if(!c.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var b=g[c];if(!(2>b.length)){var D=b[1];if(Array.isArray(D)&&!(1>D.length)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return bd(g)}catch{return p}}var dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ug={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cd;function hl(){}x(hl,Id),hl.prototype.g=function(){return new XMLHttpRequest},hl.prototype.i=function(){return{}},Cd=new hl;function or(c,p,g,b){this.j=c,this.i=p,this.l=g,this.R=b||1,this.U=new ro(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $g}function $g(){this.i=null,this.g="",this.h=!1}var Bg={},Ad={};function Nd(c,p,g){c.L=1,c.v=gl(Dn(p)),c.m=g,c.P=!0,zg(c,null)}function zg(c,p){c.F=Date.now(),fl(c),c.A=Dn(c.v);var g=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),ry(g.i,"t",b),c.C=0,g=c.j.J,c.h=new $g,c.g=xy(c.j,g?p:null,!c.m),0<c.O&&(c.M=new ub(m(c.Y,c,c.g),c.O)),p=c.U,g=c.g,b=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(Rg[0]=D.toString()),D=Rg);for(var M=0;M<D.length;M++){var B=Ig(g,D[M],b||p.handleEvent,!1,p.h||p);if(!B)break;p.g[B.key]=B}p=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),io(),fb(c.i,c.u,c.A,c.l,c.R,c.m)}or.prototype.ca=function(c){c=c.target;const p=this.M;p&&Ln(c)==3?p.j():this.Y(c)},or.prototype.Y=function(c){try{if(c==this.g)e:{const st=Ln(this.g);var p=this.g.Ba();const Ws=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||uy(this.g)))){this.J||st!=4||p==7||(p==8||0>=Ws?io(3):io(2)),Rd(this);var g=this.g.Z();this.X=g;t:if(Hg(this)){var b=uy(this.g);c="";var D=b.length,M=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),lo(this);var B="";break t}this.h.i=new a.TextDecoder}for(p=0;p<D;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(M&&p==D-1)});b.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=g==200,pb(this.i,this.u,this.A,this.l,this.R,st,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Qe=this.g;if((ge=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ge)){var de=ge;break t}}de=null}if(g=de)Bs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jd(this,g);else{this.o=!1,this.s=3,yt(12),ns(this),lo(this);break e}}if(this.P){g=!0;let en;for(;!this.J&&this.C<B.length;)if(en=yb(this,B),en==Ad){st==4&&(this.s=4,yt(14),g=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Bg){this.s=4,yt(15),Bs(this.i,this.l,B,"[Invalid Chunk]"),g=!1;break}else Bs(this.i,this.l,en,null),jd(this,en);if(Hg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||B.length!=0||this.h.h||(this.s=1,yt(16),g=!1),this.o=this.o&&g,!g)Bs(this.i,this.l,B,"[Invalid Chunked Response]"),ns(this),lo(this);else if(0<B.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Fd(rt),rt.M=!0,yt(11))}}else Bs(this.i,this.l,B,null),jd(this,B);st==4&&ns(this),this.o&&!this.J&&(st==4?yy(this.j,this):(this.o=!1,fl(this)))}else Ob(this.g),g==400&&0<B.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),ns(this),lo(this)}}}catch{}finally{}};function Hg(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function yb(c,p){var g=c.C,b=p.indexOf(`
`,g);return b==-1?Ad:(g=Number(p.substring(g,b)),isNaN(g)?Bg:(b+=1,b+g>p.length?Ad:(p=p.slice(b,b+g),c.C=b+g,p)))}or.prototype.cancel=function(){this.J=!0,ns(this)};function fl(c){c.S=Date.now()+c.I,Wg(c,c.I)}function Wg(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=oo(m(c.ba,c),p)}function Rd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}or.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(mb(this.i,this.A),this.L!=2&&(io(),yt(17)),ns(this),this.s=2,lo(this)):Wg(this,this.S-c)};function lo(c){c.j.G==0||c.J||yy(c.j,c)}function ns(c){Rd(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,jg(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function jd(c,p){try{var g=c.j;if(g.G!=0&&(g.g==c||Od(g.h,c))){if(!c.K&&Od(g.h,c)&&g.G==3){try{var b=g.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var D=b;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)El(g),wl(g);else break e;Vd(g),yt(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=oo(m(g.Za,g),6e3));if(1>=Kg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ss(g,11)}else if((c.K||g.g==c)&&El(g),!y(p))for(D=g.Da.g.parse(p),p=0;p<D.length;p++){let de=D[p];if(g.T=de[0],de=de[1],g.G==2)if(de[0]=="c"){g.K=de[1],g.ia=de[2];const rt=de[3];rt!=null&&(g.la=rt,g.j.info("VER="+g.la));const st=de[4];st!=null&&(g.Aa=st,g.j.info("SVER="+g.Aa));const Ws=de[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(b=1.5*Ws,g.L=b,g.j.info("backChannelRequestTimeoutMs_="+b)),b=g;const en=c.g;if(en){const Sl=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var M=b.h;M.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Dd(M,M.h),M.h=null))}if(b.D){const Ud=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Ud&&(b.ya=Ud,_e(b.I,b.D,Ud))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),b=g;var B=c;if(b.qa=wy(b,b.J?b.ia:null,b.W),B.K){Qg(b.h,B);var ge=B,Qe=b.L;Qe&&(ge.I=Qe),ge.B&&(Rd(ge),fl(ge)),b.g=B}else my(b);0<g.i.length&&xl(g)}else de[0]!="stop"&&de[0]!="close"||ss(g,7);else g.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?ss(g,7):Md(g):de[0]!="noop"&&g.l&&g.l.ta(de),g.v=0)}}io(4)}catch{}}var vb=class{constructor(c,p){this.g=c,this.map=p}};function qg(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gg(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Kg(c){return c.h?1:c.g?c.g.size:0}function Od(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Dd(c,p){c.g?c.g.add(p):c.h=p}function Qg(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}qg.prototype.cancel=function(){if(this.i=Yg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Yg(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const g of c.g.values())p=p.concat(g.D);return p}return S(c.i)}function _b(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],g=c.length,b=0;b<g;b++)p.push(c[b]);return p}p=[],g=0;for(b in c)p[g++]=c[b];return p}function wb(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var g=0;g<c;g++)p.push(g);return p}p=[],g=0;for(const b in c)p[g++]=b;return p}}}function Jg(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var g=wb(c),b=_b(c),D=b.length,M=0;M<D;M++)p.call(void 0,b[M],g&&g[M],c)}var Xg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xb(c,p){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var b=c[g].indexOf("="),D=null;if(0<=b){var M=c[g].substring(0,b);D=c[g].substring(b+1)}else M=c[g];p(M,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function rs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof rs){this.h=c.h,pl(this,c.j),this.o=c.o,this.g=c.g,ml(this,c.s),this.l=c.l;var p=c.i,g=new ho;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Zg(this,g),this.m=c.m}else c&&(p=String(c).match(Xg))?(this.h=!1,pl(this,p[1]||"",!0),this.o=co(p[2]||""),this.g=co(p[3]||"",!0),ml(this,p[4]),this.l=co(p[5]||"",!0),Zg(this,p[6]||"",!0),this.m=co(p[7]||"")):(this.h=!1,this.i=new ho(null,this.h))}rs.prototype.toString=function(){var c=[],p=this.j;p&&c.push(uo(p,ey,!0),":");var g=this.g;return(g||p=="file")&&(c.push("//"),(p=this.o)&&c.push(uo(p,ey,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(uo(g,g.charAt(0)=="/"?Sb:Tb,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",uo(g,Ib)),c.join("")};function Dn(c){return new rs(c)}function pl(c,p,g){c.j=g?co(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function ml(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Zg(c,p,g){p instanceof ho?(c.i=p,kb(c.i,c.h)):(g||(p=uo(p,bb)),c.i=new ho(p,c.h))}function _e(c,p,g){c.i.set(p,g)}function gl(c){return _e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function co(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function uo(c,p,g){return typeof c=="string"?(c=encodeURI(c).replace(p,Eb),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Eb(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ey=/[#\/\?@]/g,Tb=/[#\?:]/g,Sb=/[#\?]/g,bb=/[#\?@]/g,Ib=/#/g;function ho(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function ar(c){c.g||(c.g=new Map,c.h=0,c.i&&xb(c.i,function(p,g){c.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=ho.prototype,t.add=function(c,p){ar(this),this.i=null,c=zs(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(p),this.h+=1,this};function ty(c,p){ar(c),p=zs(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function ny(c,p){return ar(c),p=zs(c,p),c.g.has(p)}t.forEach=function(c,p){ar(this),this.g.forEach(function(g,b){g.forEach(function(D){c.call(p,D,b,this)},this)},this)},t.na=function(){ar(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let b=0;b<p.length;b++){const D=c[b];for(let M=0;M<D.length;M++)g.push(p[b])}return g},t.V=function(c){ar(this);let p=[];if(typeof c=="string")ny(this,c)&&(p=p.concat(this.g.get(zs(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)p=p.concat(c[g])}return p},t.set=function(c,p){return ar(this),this.i=null,c=zs(this,c),ny(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function ry(c,p,g){ty(c,p),0<g.length&&(c.i=null,c.g.set(zs(c,p),S(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var b=p[g];const M=encodeURIComponent(String(b)),B=this.V(b);for(b=0;b<B.length;b++){var D=M;B[b]!==""&&(D+="="+encodeURIComponent(String(B[b]))),c.push(D)}}return this.i=c.join("&")};function zs(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function kb(c,p){p&&!c.j&&(ar(c),c.i=null,c.g.forEach(function(g,b){var D=b.toLowerCase();b!=D&&(ty(this,b),ry(this,D,g))},c)),c.j=p}function Pb(c,p){const g=new ao;if(a.Image){const b=new Image;b.onload=v(lr,g,"TestLoadImage: loaded",!0,p,b),b.onerror=v(lr,g,"TestLoadImage: error",!1,p,b),b.onabort=v(lr,g,"TestLoadImage: abort",!1,p,b),b.ontimeout=v(lr,g,"TestLoadImage: timeout",!1,p,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function Cb(c,p){const g=new ao,b=new AbortController,D=setTimeout(()=>{b.abort(),lr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(M=>{clearTimeout(D),M.ok?lr(g,"TestPingServer: ok",!0,p):lr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(D),lr(g,"TestPingServer: error",!1,p)})}function lr(c,p,g,b,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),b(g)}catch{}}function Ab(){this.g=new hb}function Nb(c,p,g){const b=g||"";try{Jg(c,function(D,M){let B=D;u(D)&&(B=bd(D)),p.push(b+M+"="+encodeURIComponent(B))})}catch(D){throw p.push(b+"type="+encodeURIComponent("_badmap")),D}}function yl(c){this.l=c.Ub||null,this.j=c.eb||!1}x(yl,Id),yl.prototype.g=function(){return new vl(this.l,this.j)},yl.prototype.i=function(c){return function(){return c}}({});function vl(c,p){nt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(vl,nt),t=vl.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,po(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,po(this)),this.g&&(this.readyState=3,po(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sy(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function sy(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?fo(this):po(this),this.readyState==3&&sy(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,fo(this))},t.Qa=function(c){this.g&&(this.response=c,fo(this))},t.ga=function(){this.g&&fo(this)};function fo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,po(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=p.next();return c.join(`\r
`)};function po(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function iy(c){let p="";return j(c,function(g,b){p+=b,p+=":",p+=g,p+=`\r
`}),p}function Ld(c,p,g){e:{for(b in g){var b=!1;break e}b=!0}b||(g=iy(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):_e(c,p,g))}function Pe(c){nt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Pe,nt);var Rb=/^https?$/i,jb=["POST","PUT"];t=Pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,g,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cd.g(),this.v=this.o?Og(this.o):Og(Cd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(M){oy(this,M);return}if(c=g||"",g=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var D in b)g.set(D,b[D]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const M of b.keys())g.set(M,b.get(M));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jb,p,void 0))||b||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,B]of g)this.g.setRequestHeader(M,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cy(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){oy(this,M)}};function oy(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,ay(c),_l(c)}function ay(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),_l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ly(this):this.bb())},t.bb=function(){ly(this)};function ly(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ln(c)!=4||c.Z()!=2)){if(c.u&&Ln(c)==4)Ag(c.Ea,0,c);else if(gt(c,"readystatechange"),Ln(c)==4){c.h=!1;try{const B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var b;if(b=B===0){var D=String(c.D).match(Xg)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),b=!Rb.test(D?D.toLowerCase():"")}g=b}if(g)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var M=2<Ln(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",ay(c)}}finally{_l(c)}}}}function _l(c,p){if(c.g){cy(c);const g=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||gt(c,"ready");try{g.onreadystatechange=b}catch{}}}function cy(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ln(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),db(p)}};function uy(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ob(c){const p={};c=(c.g&&2<=Ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(y(c[b]))continue;var g=A(c[b]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=p[D]||[];p[D]=M,M.push(g)}T(p,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mo(c,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||p}function dy(c){this.Aa=0,this.i=[],this.j=new ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mo("baseRetryDelayMs",5e3,c),this.cb=mo("retryDelaySeedMs",1e4,c),this.Wa=mo("forwardChannelMaxRetries",2,c),this.wa=mo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new qg(c&&c.concurrentRequestLimit),this.Da=new Ab,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dy.prototype,t.la=8,t.G=1,t.connect=function(c,p,g,b){yt(0),this.W=c,this.H=p||{},g&&b!==void 0&&(this.H.OSID=g,this.H.OAID=b),this.F=this.X,this.I=wy(this,null,this.W),xl(this)};function Md(c){if(hy(c),c.G==3){var p=c.U++,g=Dn(c.I);if(_e(g,"SID",c.K),_e(g,"RID",p),_e(g,"TYPE","terminate"),go(c,g),p=new or(c,c.j,p),p.L=2,p.v=gl(Dn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=xy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),fl(p)}_y(c)}function wl(c){c.g&&(Fd(c),c.g.cancel(),c.g=null)}function hy(c){wl(c),c.u&&(a.clearTimeout(c.u),c.u=null),El(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function xl(c){if(!Gg(c.h)&&!c.s){c.s=!0;var p=c.Ga;ne||q(),V||(ne(),V=!0),z.add(p,c),c.B=0}}function Db(c,p){return Kg(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=oo(m(c.Ga,c,p),vy(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const D=new or(this,this.j,c);let M=this.o;if(this.S&&(M?(M=E(M),k(M,this.S)):M=this.S),this.m!==null||this.O||(D.H=M,M=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var b=this.i[g];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=py(this,D,p),g=Dn(this.I),_e(g,"RID",c),_e(g,"CVER",22),this.D&&_e(g,"X-HTTP-Session-Id",this.D),go(this,g),M&&(this.O?p="headers="+encodeURIComponent(String(iy(M)))+"&"+p:this.m&&Ld(g,this.m,M)),Dd(this.h,D),this.Ua&&_e(g,"TYPE","init"),this.P?(_e(g,"$req",p),_e(g,"SID","null"),D.T=!0,Nd(D,g,null)):Nd(D,g,p),this.G=2}}else this.G==3&&(c?fy(this,c):this.i.length==0||Gg(this.h)||fy(this))};function fy(c,p){var g;p?g=p.l:g=c.U++;const b=Dn(c.I);_e(b,"SID",c.K),_e(b,"RID",g),_e(b,"AID",c.T),go(c,b),c.m&&c.o&&Ld(b,c.m,c.o),g=new or(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),p&&(c.i=p.D.concat(c.i)),p=py(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Dd(c.h,g),Nd(g,b,p)}function go(c,p){c.H&&j(c.H,function(g,b){_e(p,b,g)}),c.l&&Jg({},function(g,b){_e(p,b,g)})}function py(c,p,g){g=Math.min(c.i.length,g);var b=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let M=-1;for(;;){const B=["count="+g];M==-1?0<g?(M=D[0].g,B.push("ofs="+M)):M=0:B.push("ofs="+M);let ge=!0;for(let Qe=0;Qe<g;Qe++){let de=D[Qe].g;const rt=D[Qe].map;if(de-=M,0>de)M=Math.max(0,D[Qe].g-100),ge=!1;else try{Nb(rt,B,"req"+de+"_")}catch{b&&b(rt)}}if(ge){b=B.join("&");break e}}}return c=c.i.splice(0,g),p.D=c,b}function my(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ne||q(),V||(ne(),V=!0),z.add(p,c),c.v=0}}function Vd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=oo(m(c.Fa,c),vy(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,gy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=oo(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),wl(this),gy(this))};function Fd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function gy(c){c.g=new or(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Dn(c.qa);_e(p,"RID","rpc"),_e(p,"SID",c.K),_e(p,"AID",c.T),_e(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&_e(p,"TO",c.ja),_e(p,"TYPE","xmlhttp"),go(c,p),c.m&&c.o&&Ld(p,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=gl(Dn(p)),g.m=null,g.P=!0,zg(g,c)}t.Za=function(){this.C!=null&&(this.C=null,wl(this),Vd(this),yt(19))};function El(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function yy(c,p){var g=null;if(c.g==p){El(c),Fd(c),c.g=null;var b=2}else if(Od(c.h,p))g=p.D,Qg(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var D=c.B;b=ul(),gt(b,new Fg(b,g)),xl(c)}else my(c);else if(D=p.s,D==3||D==0&&0<p.X||!(b==1&&Db(c,p)||b==2&&Vd(c)))switch(g&&0<g.length&&(p=c.h,p.i=p.i.concat(g)),D){case 1:ss(c,5);break;case 4:ss(c,10);break;case 3:ss(c,6);break;default:ss(c,2)}}}function vy(c,p){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*p}function ss(c,p){if(c.j.info("Error code "+p),p==2){var g=m(c.fb,c),b=c.Xa;const D=!b;b=new rs(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pl(b,"https"),gl(b),D?Pb(b.toString(),g):Cb(b.toString(),g)}else yt(2);c.G=0,c.l&&c.l.sa(p),_y(c),hy(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function _y(c){if(c.G=0,c.ka=[],c.l){const p=Yg(c.h);(p.length!=0||c.i.length!=0)&&(P(c.ka,p),P(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function wy(c,p,g){var b=g instanceof rs?Dn(g):new rs(g);if(b.g!="")p&&(b.g=p+"."+b.g),ml(b,b.s);else{var D=a.location;b=D.protocol,p=p?p+"."+D.hostname:D.hostname,D=+D.port;var M=new rs(null);b&&pl(M,b),p&&(M.g=p),D&&ml(M,D),g&&(M.l=g),b=M}return g=c.D,p=c.ya,g&&p&&_e(b,g,p),_e(b,"VER",c.la),go(c,b),b}function xy(c,p,g){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Pe(new yl({eb:g})):new Pe(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ey(){}t=Ey.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(c,p){return new Dt(c,p)};function Dt(c,p){nt.call(this),this.g=new dy(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!y(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Hs(this)}x(Dt,nt),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Md(this.g)},Dt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=bd(c),c=g);p.i.push(new vb(p.Ya++,c)),p.G==3&&xl(p)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Md(this.g),delete this.g,Dt.aa.N.call(this)};function Ty(c){kd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const g in p){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}x(Ty,kd);function Sy(){Pd.call(this),this.status=1}x(Sy,Pd);function Hs(c){this.g=c}x(Hs,Ey),Hs.prototype.ua=function(){gt(this.g,"a")},Hs.prototype.ta=function(c){gt(this.g,new Ty(c))},Hs.prototype.sa=function(c){gt(this.g,new Sy)},Hs.prototype.ra=function(){gt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,OE=function(){return new Tl},jE=function(){return ul()},RE=ts,Qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dl.NO_ERROR=0,dl.TIMEOUT=8,dl.HTTP_ERROR=6,_c=dl,Ug.COMPLETE="complete",NE=Ug,Dg.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Oo=Dg,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,AE=Pe}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const S0="@firebase/firestore",b0="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ji="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Em("@firebase/firestore");function Xs(){return As.logLevel}function H(t,...e){if(As.logLevel<=ie.DEBUG){const n=e.map(Lm);As.debug(`Firestore (${Ji}): ${t}`,...n)}}function rr(t,...e){if(As.logLevel<=ie.ERROR){const n=e.map(Lm);As.error(`Firestore (${Ji}): ${t}`,...n)}}function Li(t,...e){if(As.logLevel<=ie.WARN){const n=e.map(Lm);As.warn(`Firestore (${Ji}): ${t}`,...n)}}function Lm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,DE(t,r,n)}function DE(t,e,n){let r=`FIRESTORE (${Ji}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw rr(r),new Error(r)}function fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||DE(e,s,r)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends An{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class $2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class B2{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new LE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new ut(e)}}class z2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new z2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new I0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new I0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=q2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function te(t,e){return t<e?-1:t>e?1:0}function Yf(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return te(r,s);{const i=ME(),o=G2(i.encode(k0(t,n)),i.encode(k0(e,n)));return o!==0?o:te(r,s)}}n+=r>65535?2:1}return te(t.length,e.length)}function k0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function G2(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return te(t[n],e[n]);return te(t.length,e.length)}function Mi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=-62135596800,C0=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*C0);return new Be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<P0)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C0}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-P0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new Be(0,0))}static max(){return new X(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="__name__";class vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=vn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return te(e.length,n.length)}static compareSegments(e,n){const r=vn.isNumericId(e),s=vn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?vn.extractNumericId(e).compare(vn.extractNumericId(n)):Yf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Lr.fromString(e.substring(4,e.length-2))}}class Ne extends vn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const K2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends vn{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return K2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A0}static keyField(){return new Xe([A0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ne.fromString(e))}static fromName(e){return new Q(Ne.fromString(e).popFirst(5))}static empty(){return new Q(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=-1;function Q2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Br(s,Q.empty(),e)}function Y2(t){return new Br(t.readTime,t.key,Aa)}class Br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Br(X.min(),Q.empty(),Aa)}static max(){return new Br(X.max(),Q.empty(),Aa)}}function J2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==X2)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ej(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Yu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=-1;function Ju(t){return t==null}function iu(t){return t===0&&1/t==-1/0}function tj(t){return typeof t=="number"&&Number.isInteger(t)&&!iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="";function nj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=N0(e)),e=rj(t.get(n),e);return N0(e)}function rj(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case FE:n+="";break;default:n+=i}}return n}function N0(t){return t+FE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function UE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hl(this.root,e,this.comparator,!0)}}class Hl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(e){return new j0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class j0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new cn([])}unionWith(e){let n=new ze(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $E("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const sj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=sj.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="server_timestamp",zE="__type__",HE="__previous_value__",WE="__local_write_time__";function Vm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zE])===null||n===void 0?void 0:n.stringValue)===BE}function Xu(t){const e=t.mapValue.fields[HE];return Vm(e)?Xu(e):e}function Na(t){const e=zr(t.mapValue.fields[WE].timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const ou="(default)";class Ra{constructor(e,n){this.projectId=e,this.database=n||ou}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database===ou}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__type__",GE="__max__",Wl={mapValue:{fields:{__type__:{stringValue:GE}}}},KE="__vector__",au="value";function Wr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vm(t)?4:aj(t)?9007199254740991:oj(t)?10:11:Y(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=Wr(t);if(n!==Wr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Na(t).isEqual(Na(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=zr(s.timestampValue),a=zr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Hr(s.bytesValue).isEqual(Hr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),a=je(i.doubleValue);return o===a?iu(o)===iu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Mi(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(R0(o)!==R0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!kn(o[l],a[l])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function ja(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Vi(t,e){if(t===e)return 0;const n=Wr(t),r=Wr(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=je(i.integerValue||i.doubleValue),l=je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return O0(t.timestampValue,e.timestampValue);case 4:return O0(Na(t),Na(e));case 5:return Yf(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Hr(i),l=Hr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=te(a[u],l[u]);if(h!==0)return h}return te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=te(je(i.latitude),je(o.latitude));return a!==0?a:te(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return D0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,h;const f=i.fields||{},m=o.fields||{},v=(a=f[au])===null||a===void 0?void 0:a.arrayValue,x=(l=m[au])===null||l===void 0?void 0:l.arrayValue,S=te(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:D0(v,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wl.mapValue&&o===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Yf(l[f],h[f]);if(m!==0)return m;const v=Vi(a[l[f]],u[h[f]]);if(v!==0)return v}return te(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{Pe:n})}}function O0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=zr(t),r=zr(e),s=te(n.seconds,r.seconds);return s!==0?s:te(n.nanos,r.nanos)}function D0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Vi(n[s],r[s]);if(i)return i}return te(n.length,r.length)}function Fi(t){return Jf(t)}function Jf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Jf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Jf(n.fields[o])}`;return s+"}"}(t.mapValue):Y(61005,{value:t})}function wc(t){switch(Wr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xu(t);return e?16+wc(e):16;case 5:return 2*t.stringValue.length;case 6:return Hr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+wc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ms(r.fields,(i,o)=>{s+=i.length+wc(o)}),s}(t.mapValue);default:throw Y(13486,{value:t})}}function Xf(t){return!!t&&"integerValue"in t}function Fm(t){return!!t&&"arrayValue"in t}function L0(t){return!!t&&"nullValue"in t}function M0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xc(t){return!!t&&"mapValue"in t}function oj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qE])===null||n===void 0?void 0:n.stringValue)===KE}function Xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xo(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Xo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];xc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ms(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new qt(Xo(this.value))}}function QE(t){const e=[];return Ms(t.fields,(n,r)=>{const s=new Xe([n]);if(xc(r)){const i=QE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ht(e,0,X.min(),X.min(),X.min(),qt.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,X.min(),X.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,X.min(),X.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.position=e,this.inclusive=n}}function V0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Vi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function F0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n="asc"){this.field=e,this.dir=n}}function lj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{}class Ue extends YE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uj(e,n,r):n==="array-contains"?new fj(e,r):n==="in"?new pj(e,r):n==="not-in"?new mj(e,r):n==="array-contains-any"?new gj(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dj(e,r):new hj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vi(n,this.value)):n!==null&&Wr(this.value)===Wr(n)&&this.matchesComparison(Vi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends YE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Pn(e,n)}matches(e){return JE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function JE(t){return t.op==="and"}function XE(t){return cj(t)&&JE(t)}function cj(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function Zf(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Fi(t.value);if(XE(t))return t.filters.map(e=>Zf(e)).join(",");{const e=t.filters.map(n=>Zf(n)).join(",");return`${t.op}(${e})`}}function ZE(t,e){return t instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&kn(r.value,s.value)}(t,e):t instanceof Pn?function(r,s){return s instanceof Pn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&ZE(o,s.filters[a]),!0):!1}(t,e):void Y(19439)}function eT(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Fi(n.value)}`}(t):t instanceof Pn?function(n){return n.op.toString()+" {"+n.getFilters().map(eT).join(" ,")+"}"}(t):"Filter"}class uj extends Ue{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class dj extends Ue{constructor(e,n){super(e,"in",n),this.keys=tT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hj extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=tT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class fj extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fm(n)&&ja(n.arrayValue,this.value)}}class pj extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ja(this.value.arrayValue,n)}}class mj extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ja(this.value.arrayValue,n)}}class gj extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ja(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function U0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new yj(t,e,n,r,s,i,o)}function Um(t){const e=Z(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fi(r)).join(",")),e.Ie=n}return e.Ie}function $m(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!F0(t.startAt,e.startAt)&&F0(t.endAt,e.endAt)}function ep(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function vj(t,e,n,r,s,i,o,a){return new Zu(t,e,n,r,s,i,o,a)}function Bm(t){return new Zu(t)}function $0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _j(t){return t.collectionGroup!==null}function Zo(t){const e=Z(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(Xe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new cu(i,r))}),n.has(Xe.keyField().canonicalString())||e.Ee.push(new cu(Xe.keyField(),r))}return e.Ee}function Sn(t){const e=Z(t);return e.de||(e.de=wj(e,Zo(t))),e.de}function wj(t,e){if(t.limitType==="F")return U0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new cu(s.field,i)});const n=t.endAt?new lu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lu(t.startAt.position,t.startAt.inclusive):null;return U0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tp(t,e,n){return new Zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ed(t,e){return $m(Sn(t),Sn(e))&&t.limitType===e.limitType}function nT(t){return`${Um(Sn(t))}|lt:${t.limitType}`}function Zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>eT(s)).join(", ")}]`),Ju(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fi(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function td(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Zo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=V0(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Zo(r),s)||r.endAt&&!function(o,a,l){const u=V0(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Zo(r),s))}(t,e)}function xj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rT(t){return(e,n)=>{let r=!1;for(const s of Zo(t)){const i=Ej(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Ej(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Vi(l,u):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return UE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=new ke(Q.comparator);function sr(){return Tj}const sT=new ke(Q.comparator);function Do(...t){let e=sT;for(const n of t)e=e.insert(n.key,n);return e}function iT(t){let e=sT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ys(){return ea()}function oT(){return ea()}function ea(){return new Vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Sj=new ke(Q.comparator),bj=new ze(Q.comparator);function oe(...t){let e=bj;for(const n of t)e=e.add(n);return e}const Ij=new ze(te);function kj(){return Ij}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function aT(t){return{integerValue:""+t}}function Pj(t,e){return tj(e)?aT(e):zm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function Cj(t,e,n){return t instanceof uu?function(s,i){const o={fields:{[zE]:{stringValue:BE},[WE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vm(i)&&(i=Xu(i)),i&&(o.fields[HE]=i),{mapValue:o}}(n,e):t instanceof Oa?cT(t,e):t instanceof Da?uT(t,e):function(s,i){const o=lT(s,i),a=B0(o)+B0(s.Re);return Xf(o)&&Xf(s.Re)?aT(a):zm(s.serializer,a)}(t,e)}function Aj(t,e,n){return t instanceof Oa?cT(t,e):t instanceof Da?uT(t,e):n}function lT(t,e){return t instanceof du?function(r){return Xf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class uu extends nd{}class Oa extends nd{constructor(e){super(),this.elements=e}}function cT(t,e){const n=dT(e);for(const r of t.elements)n.some(s=>kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Da extends nd{constructor(e){super(),this.elements=e}}function uT(t,e){let n=dT(e);for(const r of t.elements)n=n.filter(s=>!kn(s,r));return{arrayValue:{values:n}}}class du extends nd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function B0(t){return je(t.integerValue||t.doubleValue)}function dT(t){return Fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Nj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Oa&&s instanceof Oa||r instanceof Da&&s instanceof Da?Mi(r.elements,s.elements,kn):r instanceof du&&s instanceof du?kn(r.Re,s.Re):r instanceof uu&&s instanceof uu}(t.transform,e.transform)}class Rj{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ec(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rd{}function hT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pT(t.key,Yn.none()):new Za(t.key,t.data,Yn.none());{const n=t.data,r=qt.empty();let s=new ze(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Fs(t.key,r,new cn(s.toArray()),Yn.none())}}function jj(t,e,n){t instanceof Za?function(s,i,o){const a=s.value.clone(),l=H0(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Fs?function(s,i,o){if(!Ec(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=H0(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(fT(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ta(t,e,n,r){return t instanceof Za?function(i,o,a,l){if(!Ec(i.precondition,o))return a;const u=i.value.clone(),h=W0(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fs?function(i,o,a,l){if(!Ec(i.precondition,o))return a;const u=W0(i.fieldTransforms,l,o),h=o.data;return h.setAll(fT(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Ec(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Oj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=lT(r.transform,s||null);i!=null&&(n===null&&(n=qt.empty()),n.set(r.field,i))}return n||null}function z0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mi(r,s,(i,o)=>Nj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Za extends rd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fs extends rd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function H0(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Aj(o,a,n[s]))}return r}function W0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Cj(i,o,e))}return r}class pT extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dj extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=hT(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,(n,r)=>z0(n,r))&&Mi(this.baseMutations,e.baseMutations,(n,r)=>z0(n,r))}}class Hm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return Sj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Hm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,le;function Fj(t){switch(t){case U.OK:return Y(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function mT(t){if(t===void 0)return rr("GRPC error has no .code"),U.UNKNOWN;switch(t){case De.OK:return U.OK;case De.CANCELLED:return U.CANCELLED;case De.UNKNOWN:return U.UNKNOWN;case De.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case De.INTERNAL:return U.INTERNAL;case De.UNAVAILABLE:return U.UNAVAILABLE;case De.UNAUTHENTICATED:return U.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case De.NOT_FOUND:return U.NOT_FOUND;case De.ALREADY_EXISTS:return U.ALREADY_EXISTS;case De.PERMISSION_DENIED:return U.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case De.ABORTED:return U.ABORTED;case De.OUT_OF_RANGE:return U.OUT_OF_RANGE;case De.UNIMPLEMENTED:return U.UNIMPLEMENTED;case De.DATA_LOSS:return U.DATA_LOSS;default:return Y(39323,{code:t})}}(le=De||(De={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=new Lr([4294967295,4294967295],0);function q0(t){const e=ME().encode(t),n=new CE;return n.update(e),new Uint8Array(n.digest())}function G0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Lr([n,r],0),new Lr([s,i],0)]}class Wm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lo(`Invalid padding: ${n}`);if(r<0)throw new Lo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Lr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Lr.fromNumber(r)));return s.compare(Uj)===1&&(s=new Lr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=q0(e),[r,s]=G0(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Wm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=q0(e),[r,s]=G0(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,el.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sd(X.min(),s,new ke(te),sr(),oe())}}class el{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new el(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class gT{constructor(e,n){this.targetId=e,this.Ce=n}}class yT{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class K0{constructor(){this.Fe=0,this.Me=Q0(),this.xe=tt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=oe(),n=oe(),r=oe();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y(38017,{changeType:i})}}),new el(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Q0()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,fe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class $j{constructor(e){this.ze=e,this.je=new Map,this.He=sr(),this.Je=ql(),this.Ye=ql(),this.Ze=new ke(te)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(ep(i))if(r===0){const o=new Q(i.path);this.tt(n,o,ht.newNoDocument(o,X.min()))}else fe(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Hr(r).toUint8Array()}catch(l){if(l instanceof $E)return Li("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Wm(o,s,i)}catch(l){return Li(l instanceof Lo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&ep(a.target)){const l=new Q(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,ht.newNoDocument(l,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=oe();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new sd(e,n,this.Ze,this.He,r);return this.He=sr(),this.Je=ql(),this.Ye=ql(),this.Ze=new ke(te),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new K0,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ze(te),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ze(te),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new K0),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function ql(){return new ke(Q.comparator)}function Q0(){return new ke(Q.comparator)}const Bj={asc:"ASCENDING",desc:"DESCENDING"},zj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hj={and:"AND",or:"OR"};class Wj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(t,e){return t.useProto3Json||Ju(e)?e:{value:e}}function hu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qj(t,e){return hu(t,e.toTimestamp())}function bn(t){return fe(!!t,49232),X.fromTimestamp(function(n){const r=zr(n);return new Be(r.seconds,r.nanos)}(t))}function qm(t,e){return rp(t,e).canonicalString()}function rp(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _T(t){const e=Ne.fromString(t);return fe(ST(e),10190,{key:e.toString()}),e}function sp(t,e){return qm(t.databaseId,e.path)}function Th(t,e){const n=_T(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(xT(n))}function wT(t,e){return qm(t.databaseId,e)}function Gj(t){const e=_T(t);return e.length===4?Ne.emptyPath():xT(e)}function ip(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xT(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Y0(t,e,n){return{name:sp(t,e),fields:n.value.mapValue.fields}}function Kj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Y(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(fe(h===void 0||typeof h=="string",58123),tt.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),tt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?U.UNKNOWN:mT(u.code);return new K(h,u.message||"")}(o);n=new yT(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Th(t,r.document.name),i=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):X.min(),a=new qt({mapValue:{fields:r.document.fields}}),l=ht.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Tc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Th(t,r.document),i=r.readTime?bn(r.readTime):X.min(),o=ht.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Tc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Th(t,r.document),i=r.removedTargetIds||[];n=new Tc([],i,s,null)}else{if(!("filter"in e))return Y(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Vj(s,i),a=r.targetId;n=new gT(a,o)}}return n}function Qj(t,e){let n;if(e instanceof Za)n={update:Y0(t,e.key,e.value)};else if(e instanceof pT)n={delete:sp(t,e.key)};else if(e instanceof Fs)n={update:Y0(t,e.key,e.data),updateMask:sO(e.fieldMask)};else{if(!(e instanceof Dj))return Y(16599,{ft:e.type});n={verify:sp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof uu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Da)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof du)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw Y(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:qj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y(27497)}(t,e.precondition)),n}function Yj(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?bn(s.updateTime):bn(i);return o.isEqual(X.min())&&(o=bn(i)),new Rj(o,s.transformResults||[])}(n,e))):[]}function Jj(t,e){return{documents:[wT(t,e.path)]}}function Xj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wT(t,s);const i=function(u){if(u.length!==0)return TT(Pn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:ei(m.field),direction:tO(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=np(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:s}}function Zj(t){let e=Gj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=ET(f);return m instanceof Pn&&XE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new cu(ti(x.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Ju(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,v=f.values||[];return new lu(v,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,v=f.values||[];return new lu(v,m)}(n.endAt)),vj(e,s,o,i,a,"F",l,u)}function eO(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ET(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ti(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ti(n.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ti(n.unaryFilter.field);return Ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ti(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(ti(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pn.create(n.compositeFilter.filters.map(r=>ET(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function tO(t){return Bj[t]}function nO(t){return zj[t]}function rO(t){return Hj[t]}function ei(t){return{fieldPath:t.canonicalString()}}function ti(t){return Xe.fromServerFormat(t.fieldPath)}function TT(t){return t instanceof Ue?function(n){if(n.op==="=="){if(M0(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NAN"}};if(L0(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(M0(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NAN"}};if(L0(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(n.field),op:nO(n.op),value:n.value}}}(t):t instanceof Pn?function(n){const r=n.getFilters().map(s=>TT(s));return r.length===1?r[0]:{compositeFilter:{op:rO(n.op),filters:r}}}(t):Y(54877,{filter:t})}function sO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ST(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,s,i=X.min(),o=X.min(),a=tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.wt=e}}function oO(t){const e=Zj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.Cn=new lO}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Br.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class lO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bT=41943040;class It{static withCacheSize(e){return new It(e,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(bT,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ui(0)}static lr(){return new Ui(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="LruGarbageCollector",cO=1048576;function Z0([t,e],[n,r]){const s=te(t,n);return s===0?te(e,r):s}class uO{constructor(e){this.Er=e,this.buffer=new ze(Z0),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Z0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){H(X0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zi(n)?H(X0,"Ignoring IndexedDB error during garbage collection: ",n):await Xi(n)}await this.mr(3e5)})}}class hO{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Yu.le);const r=new uO(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(J0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J0):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Xs()<=ie.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function fO(t,e){return new hO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.changes=new Vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ta(r.mutation,s,cn.empty(),Be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Do();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=sr();const o=ea(),a=function(){return ea()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Fs)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ta(h.mutation,u,h.mutation.getFieldMask(),Be.now())):o.set(u.key,cn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new mO(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ea();let s=new ke((o,a)=>o-a),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||cn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||oe()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=oT();h.forEach(m=>{if(!i.has(m)){const v=hT(n.get(m),r.get(m));v!==null&&f.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_j(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ys());let a=Aa,l=i;return o.next(u=>F.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,oe())).next(h=>({batchId:a,changes:iT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=Do();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Do();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const u=function(f,m){return new Zu(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,ht.newInvalidDocument(h)))});let a=Do();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&ta(h.mutation,u,cn.empty(),Be.now()),td(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return F.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:oO(s.bundledQuery),readTime:bn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.overlays=new ke(Q.comparator),this.Qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ys();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ys(),i=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ys(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=ys(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return F.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mj(n,r));let i=this.Qr.get(n);i===void 0&&(i=oe(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.$r=new ze(We.Ur),this.Kr=new ze(We.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new We(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new We(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Q(new Ne([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Q(new Ne([])),r=new We(n,e),s=new We(n,e+1);let i=oe();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Q.comparator(e.key,n.key)||te(e.Zr,n.Zr)}static Wr(e,n){return te(e.Zr,n.Zr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new ze(We.Ur)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lj(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Xr=this.Xr.add(new We(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Mm:this.nr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const a=this.ei(o.Zr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(te);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{r=r.add(a.Zr)})}),F.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new We(new Q(i),0);let a=new ze(te);return this.Xr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Zr)),!0)},o),F.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return F.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new We(n,0),s=this.Xr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.ii=e,this.docs=function(){return new ke(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=sr();const o=n.path,a=new Q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||J2(Y2(h),r)<=0||(s.has(h.key)||td(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y(9500)}si(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EO(this)}getSize(e){return F.resolve(this.size)}}class EO extends pO{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.persistence=e,this.oi=new Vs(n=>Um(n),$m),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this._i=0,this.ai=new Gm,this.targetCount=0,this.ui=Ui.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),F.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ui(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Tr(n),F.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n){this.ci={},this.overlays={},this.li=new Yu(0),this.hi=!1,this.hi=!0,this.Pi=new _O,this.referenceDelegate=e(this),this.Ti=new TO(this),this.indexManager=new aO,this.remoteDocumentCache=function(s){return new xO(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new iO(n),this.Ei=new yO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new wO(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new SO(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return F.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class SO extends Z2{constructor(e){super(),this.currentSequenceNumber=e}}class Km{constructor(e){this.persistence=e,this.Vi=new Gm,this.mi=null}static fi(e){return new Km(e)}get gi(){if(this.mi)return this.mi;throw Y(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.gi,r=>{const s=Q.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return F.or([()=>F.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class fu{constructor(e,n){this.persistence=e,this.yi=new Vs(r=>nj(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=fO(this,n)}static fi(e,n){return new fu(e,n)}di(){}Ai(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return F.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),F.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wc(e.data.value)),n}Dr(e,n,r){return F.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Qm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return FC()?8:ej(pt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new bO;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Xs()<=ie.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),F.resolve()):(Xs()<=ie.DEBUG&&H("QueryEngine","Query:",Zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Xs()<=ie.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):F.resolve())}ws(e,n){if($0(n))return F.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tp(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.vs(n,a);return this.Cs(n,u,o,l.readTime)?this.ws(e,tp(n,null,"F")):this.Fs(e,u,n,l)}))})))}bs(e,n,r,s){return $0(n)||s.isEqual(X.min())?F.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?F.resolve(null):(Xs()<=ie.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zs(n)),this.Fs(e,o,n,Q2(s,Aa)).next(a=>a))})}vs(e,n){let r=new ze(rT(e));return n.forEach((s,i)=>{td(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Xs()<=ie.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Zs(n)),this.ys.getDocumentsMatchingQuery(e,n,Br.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="LocalStore",kO=3e8;class PO{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new ke(te),this.Os=new Vs(i=>Um(i),$m),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gO(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function CO(t,e,n,r){return new PO(t,e,n,r)}async function kT(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=oe();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ks:u,removedBatchIds:o,addedBatchIds:a}))})})}function AO(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,m=f.keys();let v=F.resolve();return m.forEach(x=>{v=v.next(()=>h.getEntry(l,x)).next(S=>{const P=u.docVersions.get(x);fe(P!==null,48541),S.version.compareTo(P)<0&&(f.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),h.addEntry(S)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=oe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function PT(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function NO(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,f)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(tt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(S,P,_){return S.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=kO?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,v,h)&&a.push(n.Ti.updateTargetData(i,v))});let l=sr(),u=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(RO(i,o,e.documentUpdates).next(h=>{l=h.qs,u=h.Qs})),!r.isEqual(X.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(f=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.xs=s,i))}function RO(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=sr();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(X.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H(Ym,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{qs:o,Qs:s}})}function jO(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Mm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OO(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function op(t,e,n){const r=Z(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Zi(o))throw o;H(Ym,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function e_(t,e,n){const r=Z(t);let s=X.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=Z(l),m=f.Os.get(h);return m!==void 0?F.resolve(f.xs.get(m)):f.Ti.getTargetData(u,h)}(r,o,Sn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:oe())).next(a=>(DO(r,xj(e),a),{documents:a,$s:i})))}function DO(t,e,n){let r=t.Ns.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class t_{constructor(){this.activeTargetIds=kj()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LO{constructor(){this.xo=new t_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new t_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="ConnectivityMonitor";class r_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){H(n_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){H(n_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl=null;function ap(){return Gl===null?Gl=function(){return 268435456+Math.round(2147483648*Math.random())}():Gl++,"0x"+Gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="RestConnection",VO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===ou?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=ap(),a=this.jo(e,n.toUriEncodedString());H(Sh,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,s,i);const{host:u}=new URL(a),h=Ds(u);return this.Jo(e,a,l,r,h).then(f=>(H(Sh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Li(Sh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ji}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=VO[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class $O extends FO{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=ap();return new Promise((a,l)=>{const u=new AE;u.setWithCredentials(!0),u.listenOnce(NE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _c.NO_ERROR:const f=u.getResponseJson();H(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case _c.TIMEOUT:H(at,`RPC '${e}' ${o} timed out`),l(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case _c.HTTP_ERROR:const m=u.getStatus();if(H(at,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const S=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(x.status);l(new K(S,x.message))}else l(new K(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(U.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{h_:e,streamId:o,P_:u.getLastErrorCode(),T_:u.getLastError()})}}finally{H(at,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);H(at,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}I_(e,n,r){const s=ap(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OE(),a=jE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");H(at,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);this.E_(f);let m=!1,v=!1;const x=new UO({Zo:P=>{v?H(at,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(H(at,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),H(at,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Xo:()=>f.close()}),S=(P,_,y)=>{P.listen(_,w=>{try{y(w)}catch(N){setTimeout(()=>{throw N},0)}})};return S(f,Oo.EventType.OPEN,()=>{v||(H(at,`RPC '${e}' stream ${s} transport opened.`),x.__())}),S(f,Oo.EventType.CLOSE,()=>{v||(v=!0,H(at,`RPC '${e}' stream ${s} transport closed`),x.u_(),this.d_(f))}),S(f,Oo.EventType.ERROR,P=>{v||(v=!0,Li(at,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),x.u_(new K(U.UNAVAILABLE,"The operation could not be completed")))}),S(f,Oo.EventType.MESSAGE,P=>{var _;if(!v){const y=P.data[0];fe(!!y,16349);const w=y,N=(w==null?void 0:w.error)||((_=w[0])===null||_===void 0?void 0:_.error);if(N){H(at,`RPC '${e}' stream ${s} received error:`,N);const O=N.status;let j=function(I){const k=De[I];if(k!==void 0)return mT(k)}(O),T=N.message;j===void 0&&(j=U.INTERNAL,T="Unknown error status: "+O+" with message "+N.message),v=!0,x.u_(new K(j,T)),f.close()}else H(at,`RPC '${e}' stream ${s} received:`,y),x.c_(y)}}),S(a,RE.STAT_EVENT,P=>{P.stat===Qf.PROXY?H(at,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Qf.NOPROXY&&H(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return new Wj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="PersistentStream";class AT{constructor(e,n,r,s,i,o,a,l){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new CT(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return H(s_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(H(s_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BO extends AT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=Kj(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?bn(o.readTime):X.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=ip(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ep(l)?{documents:Jj(i,l)}:{query:Xj(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vT(i,o.resumeToken);const u=np(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=hu(i,o.snapshotVersion.toTimestamp());const u=np(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=eO(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=ip(this.serializer),n.removeTarget=e,this.Q_(n)}}class zO extends AT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=Yj(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=ip(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Qj(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{}class WO extends HO{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,rp(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,rp(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(U.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class qO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(rr(n),this.ua=!1):H("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class GO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{Us(this)&&(H(Ns,"Restarting streams for network reachability change."),await async function(l){const u=Z(l);u.da.add(4),await tl(u),u.Va.set("Unknown"),u.da.delete(4),await od(u)}(this))})}),this.Va=new qO(r,s)}}async function od(t){if(Us(t))for(const e of t.Aa)await e(!0)}async function tl(t){for(const e of t.Aa)await e(!1)}function NT(t,e){const n=Z(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),eg(n)?Zm(n):eo(n).N_()&&Xm(n,e))}function Jm(t,e){const n=Z(t),r=eo(n);n.Ea.delete(e),r.N_()&&RT(n,e),n.Ea.size===0&&(r.N_()?r.k_():Us(n)&&n.Va.set("Unknown"))}function Xm(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eo(t).Z_(e)}function RT(t,e){t.ma.Ke(e),eo(t).X_(e)}function Zm(t){t.ma=new $j({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),eo(t).start(),t.Va.ca()}function eg(t){return Us(t)&&!eo(t).O_()&&t.Ea.size>0}function Us(t){return Z(t).da.size===0}function jT(t){t.ma=void 0}async function KO(t){t.Va.set("Online")}async function QO(t){t.Ea.forEach((e,n)=>{Xm(t,e)})}async function YO(t,e){jT(t),eg(t)?(t.Va.Pa(e),Zm(t)):t.Va.set("Unknown")}async function JO(t,e,n){if(t.Va.set("Online"),e instanceof yT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ea.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ea.delete(a),s.ma.removeTarget(a))}(t,e)}catch(r){H(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pu(t,r)}else if(e instanceof Tc?t.ma.Xe(e):e instanceof gT?t.ma.ot(e):t.ma.nt(e),!n.isEqual(X.min()))try{const r=await PT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ea.get(u);h&&i.Ea.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Ea.get(l);if(!h)return;i.Ea.set(l,h.withResumeToken(tt.EMPTY_BYTE_STRING,h.snapshotVersion)),RT(i,l);const f=new Sr(h.target,l,u,h.sequenceNumber);Xm(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(Ns,"Failed to raise snapshot:",r),await pu(t,r)}}async function pu(t,e,n){if(!Zi(e))throw e;t.da.add(1),await tl(t),t.Va.set("Offline"),n||(n=()=>PT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Ns,"Retrying IndexedDB access"),await n(),t.da.delete(1),await od(t)})}function OT(t,e){return e().catch(n=>pu(t,n,e))}async function ad(t){const e=Z(t),n=qr(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Mm;for(;XO(e);)try{const s=await jO(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,ZO(e,s)}catch(s){await pu(e,s)}DT(e)&&LT(e)}function XO(t){return Us(t)&&t.Ia.length<10}function ZO(t,e){t.Ia.push(e);const n=qr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function DT(t){return Us(t)&&!qr(t).O_()&&t.Ia.length>0}function LT(t){qr(t).start()}async function eD(t){qr(t).ia()}async function tD(t){const e=qr(t);for(const n of t.Ia)e.ta(n.mutations)}async function nD(t,e,n){const r=t.Ia.shift(),s=Hm.from(r,e,n);await OT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ad(t)}async function rD(t,e){e&&qr(t).ea&&await async function(r,s){if(function(o){return Fj(o)&&o!==U.ABORTED}(s.code)){const i=r.Ia.shift();qr(r).L_(),await OT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ad(r)}}(t,e),DT(t)&&LT(t)}async function i_(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H(Ns,"RemoteStore received new credentials");const r=Us(n);n.da.add(3),await tl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await od(n)}async function sD(t,e){const n=Z(t);e?(n.da.delete(2),await od(n)):e||(n.da.add(2),await tl(n),n.Va.set("Unknown"))}function eo(t){return t.fa||(t.fa=function(n,r,s){const i=Z(n);return i.oa(),new BO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:KO.bind(null,t),n_:QO.bind(null,t),i_:YO.bind(null,t),Y_:JO.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),eg(t)?Zm(t):t.Va.set("Unknown")):(await t.fa.stop(),jT(t))})),t.fa}function qr(t){return t.ga||(t.ga=function(n,r,s){const i=Z(n);return i.oa(),new zO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:eD.bind(null,t),i_:rD.bind(null,t),na:tD.bind(null,t),ra:nD.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await ad(t)):(await t.ga.stop(),t.Ia.length>0&&(H(Ns,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new tg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ng(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Zi(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{static emptySet(e){return new bi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Do(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.pa=new ke(Q.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Y(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class $i{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $i(e,n,bi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class oD{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=a_(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function a_(){return new Vs(t=>nT(t),ed)}async function aD(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new iD,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ng(o,`Initialization of query '${Zs(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&rg(n)}async function lD(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cD(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(s)&&(r=!0);o.ba=s}}r&&rg(n)}function uD(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function rg(t){t.Ca.forEach(e=>{e.next()})}var lp,l_;(l_=lp||(lp={})).xa="default",l_.Cache="cache";class dD{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=$i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.key=e}}class VT{constructor(e){this.key=e}}class hD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oe(),this.mutatedKeys=oe(),this.Za=rT(e),this.Xa=new bi(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new o_,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),v=td(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let P=!1;m&&v?m.data.isEqual(v.data)?x!==S&&(r.track({type:3,doc:v}),P=!0):this.ru(m,v)||(r.track({type:2,doc:v}),P=!0,(l&&this.Za(v,l)>0||u&&this.Za(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),P=!0):m&&!v&&(r.track({type:1,doc:m}),P=!0,(l||u)&&(a=!0)),P&&(v?(o=o.add(v),i=S?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,f)=>function(v,x){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Vt:P})}};return S(v)-S(x)}(h.type,f.type)||this.Za(h.doc,f.doc)),this.iu(r),s=s!=null&&s;const a=n&&!s?this.su():[],l=this.Ya.size===0&&this.current&&!s?1:0,u=l!==this.Ja;return this.Ja=l,o.length!==0||u?{snapshot:new $i(this.query,e.Xa,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new o_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=oe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new VT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new MT(r))}),n}au(e){this.Ha=e.$s,this.Ya=oe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return $i.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const sg="SyncEngine";class fD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pD{constructor(e){this.key=e,this.cu=!1}}class mD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Vs(a=>nT(a),ed),this.Pu=new Map,this.Tu=new Set,this.Iu=new ke(Q.comparator),this.Eu=new Map,this.du=new Gm,this.Au={},this.Ru=new Map,this.Vu=Ui.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function gD(t,e,n=!0){const r=HT(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await FT(r,e,n,!0),s}async function yD(t,e){const n=HT(t);await FT(n,e,!0,!1)}async function FT(t,e,n,r){const s=await OO(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await vD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&NT(t.remoteStore,s),a}async function vD(t,e,n,r,s){t.fu=(f,m,v)=>async function(S,P,_,y){let w=P.view.tu(_);w.Cs&&(w=await e_(S.localStore,P.query,!1).then(({documents:T})=>P.view.tu(T,w)));const N=y&&y.targetChanges.get(P.targetId),O=y&&y.targetMismatches.get(P.targetId)!=null,j=P.view.applyChanges(w,S.isPrimaryClient,N,O);return u_(S,P.targetId,j.ou),j.snapshot}(t,f,m,v);const i=await e_(t.localStore,e,!0),o=new hD(e,i.$s),a=o.tu(i.documents),l=el.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);u_(t,n,u.ou);const h=new fD(e,n,o);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),u.snapshot}async function _D(t,e,n){const r=Z(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!ed(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await op(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Jm(r.remoteStore,s.targetId),cp(r,s.targetId)}).catch(Xi)):(cp(r,s.targetId),await op(r.localStore,s.targetId,!0))}async function wD(t,e){const n=Z(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(n.remoteStore,r.targetId))}async function xD(t,e,n){const r=PD(t);try{const s=await function(o,a){const l=Z(o),u=Be.now(),h=a.reduce((v,x)=>v.add(x.key),oe());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=sr(),S=oe();return l.Bs.getEntries(v,h).next(P=>{x=P,x.forEach((_,y)=>{y.isValidDocument()||(S=S.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,x)).next(P=>{f=P;const _=[];for(const y of a){const w=Oj(y,f.get(y.key).overlayedDocument);w!=null&&_.push(new Fs(y.key,w,QE(w.value.mapValue),Yn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,_,a)}).next(P=>{m=P;const _=P.applyToLocalDocumentSet(f,S);return l.documentOverlayCache.saveOverlays(v,P.batchId,_)})}).then(()=>({batchId:m.batchId,changes:iT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Au[o.currentUser.toKey()];u||(u=new ke(te)),u=u.insert(a,l),o.Au[o.currentUser.toKey()]=u}(r,s.batchId,n),await nl(r,s.changes),await ad(r.remoteStore)}catch(s){const i=ng(s,"Failed to persist write");n.reject(i)}}async function UT(t,e){const n=Z(t);try{const r=await NO(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?fe(o.cu,14607):s.removedDocuments.size>0&&(fe(o.cu,42227),o.cu=!1))}),await nl(n,r,e)}catch(r){await Xi(r)}}function c_(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.Sa)m.Fa(a)&&(u=!0)}),u&&rg(l)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ED(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new ke(Q.comparator);o=o.insert(i,ht.newNoDocument(i,X.min()));const a=oe().add(i),l=new sd(X.min(),new Map,new ke(te),o,a);await UT(r,l),r.Iu=r.Iu.remove(i),r.Eu.delete(e),ig(r)}else await op(r.localStore,e,!1).then(()=>cp(r,e,n)).catch(Xi)}async function TD(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await AO(n.localStore,e);BT(n,r,null),$T(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nl(n,s)}catch(s){await Xi(s)}}async function SD(t,e,n){const r=Z(t);try{const s=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(fe(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);BT(r,e,n),$T(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nl(r,s)}catch(s){await Xi(s)}}function $T(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function BT(t,e,n){const r=Z(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function cp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||zT(t,r)})}function zT(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Jm(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),ig(t))}function u_(t,e,n){for(const r of n)r instanceof MT?(t.du.addReference(r.key,e),bD(t,r)):r instanceof VT?(H(sg,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||zT(t,r.key)):Y(19791,{pu:r})}function bD(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(H(sg,"New document in limbo: "+n),t.Tu.add(r),ig(t))}function ig(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Q(Ne.fromString(e)),r=t.Vu.next();t.Eu.set(r,new pD(n)),t.Iu=t.Iu.insert(n,r),NT(t.remoteStore,new Sr(Sn(Bm(n.path)),r,"TargetPurposeLimboResolution",Yu.le))}}async function nl(t,e,n){const r=Z(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((a,l)=>{o.push(r.fu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Qm.Rs(l.targetId,u);i.push(f)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(l,u){const h=Z(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(u,m=>F.forEach(m.ds,v=>h.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>F.forEach(m.As,v=>h.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Zi(f))throw f;H(Ym,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const v=h.xs.get(m),x=v.snapshotVersion,S=v.withLastLimboFreeSnapshotVersion(x);h.xs=h.xs.insert(m,S)}}}(r.localStore,i))}async function ID(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H(sg,"User change. New user:",e.toKey());const r=await kT(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(l=>{l.reject(new K(U.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nl(n,r.ks)}}function kD(t,e){const n=Z(t),r=n.Eu.get(e);if(r&&r.cu)return oe().add(r.key);{let s=oe();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const a=n.hu.get(o);s=s.unionWith(a.view.eu)}return s}}function HT(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ED.bind(null,e),e.lu.Y_=cD.bind(null,e.eventManager),e.lu.gu=uD.bind(null,e.eventManager),e}function PD(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SD.bind(null,e),e}class mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return CO(this.persistence,new IO,e.initialUser,this.serializer)}Su(e){return new IT(Km.fi,this.serializer)}bu(e){return new LO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mu.provider={build:()=>new mu};class CD extends mu{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){fe(this.persistence.referenceDelegate instanceof fu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dO(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new IT(r=>fu.fi(r,n),this.serializer)}}class up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>c_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ID.bind(null,this.syncEngine),await sD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oD}()}createDatastore(e){const n=id(e.databaseInfo.databaseId),r=function(i){return new $O(i)}(e.databaseInfo);return function(i,o,a,l){return new WO(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new GO(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>c_(this.syncEngine,n,0),function(){return r_.C()?new r_:new MO}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const f=new mD(s,i,o,a,l,u);return h&&(f.mu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);H(Ns,"RemoteStore shutting down."),i.da.add(5),await tl(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="FirestoreClient";class ND{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=VE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(Gr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Gr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ng(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ih(t,e){t.asyncQueue.verifyOperationInProgress(),H(Gr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await kT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function d_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RD(t);H(Gr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>i_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>i_(e.remoteStore,s)),t._onlineComponents=e}async function RD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Gr,"Using user provided OfflineComponentProvider");try{await Ih(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Li("Error using user provided cache. Falling back to memory cache: "+n),await Ih(t,new mu)}}else H(Gr,"Using default OfflineComponentProvider"),await Ih(t,new CD(void 0));return t._offlineComponents}async function WT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Gr,"Using user provided OnlineComponentProvider"),await d_(t,t._uninitializedComponentsProvider._online)):(H(Gr,"Using default OnlineComponentProvider"),await d_(t,new up))),t._onlineComponents}function jD(t){return WT(t).then(e=>e.syncEngine)}async function OD(t){const e=await WT(t),n=e.eventManager;return n.onListen=gD.bind(null,e.syncEngine),n.onUnlisten=_D.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wD.bind(null,e.syncEngine),n}function DD(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new AD({next:m=>{h.xu(),o.enqueueAndForget(()=>lD(i,f));const v=m.docs.has(a);!v&&m.fromCache?u.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?u.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new dD(Bm(a.path),h,{includeMetadataChanges:!0,Qa:!0});return aD(i,f)}(await OD(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MD(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function f_(t){if(!Q.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function og(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function La(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=og(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firestore.googleapis.com",p_=!0;class m_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GT,this.ssl=p_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:p_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cO)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ag{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new U2;switch(r.type){case"firstParty":return new H2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=h_.get(n);r&&(H("ComponentProvider","Removing Datastore"),h_.delete(n),r.terminate())}(this),Promise.resolve()}}function VD(t,e,n,r={}){var s;t=La(t,ag);const i=Ds(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(wm(`https://${l}`),xm("Firestore",!0)),o.host!==GT&&o.host!==l&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!Is(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=ut.MOCK_USER;else{h=$1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ut(m)}t._authCredentials=new $2(new LE(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lg(this.firestore,e,this._query)}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class Ma extends lg{constructor(e,n,r){super(e,n,Bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Q(e))}withConverter(e){return new Ma(this.firestore,e,this._path)}}function KT(t,e,...n){if(t=mt(t),arguments.length===1&&(e=VE.newId()),LD("doc","path",e),t instanceof ag){const r=Ne.fromString(e,...n);return f_(r),new Qt(t,null,new Q(r))}{if(!(t instanceof Qt||t instanceof Ma))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return f_(r),new Qt(t.firestore,t instanceof Ma?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="AsyncQueue";class y_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new CT(this,"async_queue_retry"),this.rc=()=>{const r=bh();r&&H(g_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=bh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=bh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Mr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Zi(e))throw e;H(g_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,rr("INTERNAL UNHANDLED ERROR: ",v_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=tg.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&Y(47125,{cc:v_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function v_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class cg extends ag{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new y_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y_(e),this._firestoreClient=void 0,await e}}}function FD(t,e){const n=typeof t=="object"?t:qu(),r=typeof t=="string"?t:ou,s=Wu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=V1("firestore");i&&VD(s,...i)}return s}function QT(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UD(t),t._firestoreClient}function UD(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,h){return new ij(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ND(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bi(tt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bi(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=/^__.*__$/;class BD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Za(e,this.data,n,this.fieldTransforms)}}function JT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ic:t})}}class fg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return gu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(JT(this.Ic)&&$D.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class zD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||id(e)}bc(e,n,r,s=!1){return new fg({Ic:e,methodName:n,wc:r,path:Xe.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function HD(t){const e=t._freezeSettings(),n=id(t._databaseId);return new zD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WD(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);tS("Data must be an object, but it was:",o,r);const a=ZT(r,o);let l,u;if(i.merge)l=new cn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=qD(e,f,n);if(!o.contains(m))throw new K(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);KD(h,m)||h.push(m)}l=new cn(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new BD(new qt(a),l,u)}function XT(t,e){if(eS(t=mt(t)))return tS("Unsupported field value:",e,t),ZT(t,e);if(t instanceof YT)return function(r,s){if(!JT(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=XT(a,s.fc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Pj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:hu(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hu(s.serializer,i)}}if(r instanceof dg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bi)return{bytesValue:vT(s.serializer,r._byteString)};if(r instanceof Qt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hg)return function(o,a){return{mapValue:{fields:{[qE]:{stringValue:KE},[au]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.gc("VectorValues must only contain numeric values.");return zm(a.serializer,u)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${og(r)}`)}(t,e)}function ZT(t,e){const n={};return UE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,(r,s)=>{const i=XT(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function eS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof dg||t instanceof Bi||t instanceof Qt||t instanceof YT||t instanceof hg)}function tS(t,e,n){if(!eS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=og(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function qD(t,e,n){if((e=mt(e))instanceof ug)return e._internalPath;if(typeof e=="string")return nS(t,e);throw gu("Field path arguments must be of type string or ",t,!1,void 0,n)}const GD=new RegExp("[~\\*/\\[\\]]");function nS(t,e,n){if(e.search(GD)>=0)throw gu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ug(...e.split("."))._internalPath}catch{throw gu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(U.INVALID_ARGUMENT,a+t+l)}function KD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QD extends rS{data(){return super.data()}}function sS(t,e){return typeof e=="string"?nS(t,e):e instanceof ug?e._internalPath:e._delegate._internalPath}class YD{convertValue(e,n="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ms(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[au].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new hg(i)}convertGeoPoint(e){return new dg(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Na(e));default:return null}}convertTimestamp(e){const n=zr(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);fe(ST(r),9688,{name:e});const s=new Ra(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||rr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iS extends rS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ZD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ZD extends iS{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){t=La(t,Qt);const e=La(t.firestore,cg);return DD(QT(e),t._key).then(n=>s4(e,t,n))}class t4 extends YD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function n4(t,e,n){t=La(t,Qt);const r=La(t.firestore,cg),s=JD(t.converter,e,n);return r4(r,[WD(HD(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yn.none())])}function r4(t,e){return function(r,s){const i=new Mr;return r.asyncQueue.enqueueAndForget(async()=>xD(await jD(r),s,i)),i.promise}(QT(t),e)}function s4(t,e,n){const r=n.docs.get(e._key),s=new t4(t);return new iS(t,s,e._key,r,new XD(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ji=s})(Ls),ks(new $r("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new cg(new B2(r.getProvider("auth-internal")),new W2(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),En(S0,b0,e),En(S0,b0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firebasestorage.googleapis.com",i4="storageBucket",o4=2*60*1e3,a4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zr=class aS extends An{constructor(e,n,r=0){super(kh(e),`Firebase Storage: ${n} (${kh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,aS.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return kh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cn||(Cn={}));function kh(t){return"storage/"+t}function l4(){const t="An unknown error occurred, please check the error payload for server response.";return new Zr(Cn.UNKNOWN,t)}function c4(){return new Zr(Cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function u4(){return new Zr(Cn.CANCELED,"User canceled the upload/download.")}function d4(t){return new Zr(Cn.INVALID_URL,"Invalid URL '"+t+"'.")}function h4(t){return new Zr(Cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function __(t){return new Zr(Cn.INVALID_ARGUMENT,t)}function lS(){return new Zr(Cn.APP_DELETED,"The Firebase app was deleted.")}function f4(t){return new Zr(Cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=un.makeFromUrl(e,n)}catch{return new un(e,"")}if(r.path==="")return r;throw h4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),x={bucket:1,path:3},S=n===oS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",_=new RegExp(`^https?://${S}/${s}/${P}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:v,indices:x,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<w.length;N++){const O=w[N],j=O.regex.exec(e);if(j){const T=j[O.indices.bucket];let E=j[O.indices.path];E||(E=""),r=new un(T,E),O.postModify(r);break}}if(r==null)throw d4(e);return r}}class p4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function f(P){s=setTimeout(()=>{s=null,t(v,l())},P)}function m(){i&&clearTimeout(i)}function v(P,..._){if(u){m();return}if(P){m(),h.call(null,P,..._);return}if(l()||o){m(),h.call(null,P,..._);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let x=!1;function S(P){x||(x=!0,m(),!u&&(s!==null?(P||(a=2),clearTimeout(s),f(0)):P||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,S(!0)},n),S}function g4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){return t!==void 0}function w_(t,e,n,r){if(r<e)throw __(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw __(`Invalid value for '${t}'. Expected ${n} or less.`)}function v4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var yu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(yu||(yu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n,r,s,i,o,a,l,u,h,f,m=!0,v=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,S)=>{this.resolve_=x,this.reject_=S,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Kl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===yu.NO_ERROR,l=i.getStatus();if(!a||_4(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===yu.ABORT;r(!1,new Kl(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Kl(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());y4(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=l4();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?lS():u4();o(l)}else{const l=c4();o(l)}};this.canceled_?n(!1,new Kl(!1,null,!0)):this.backoffId_=m4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function x4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function T4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function S4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function b4(t,e,n,r,s,i,o=!0,a=!1){const l=v4(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return T4(h,e),x4(h,n),E4(h,i),S4(h,r),new w4(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function k4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this._service=e,n instanceof un?this._location=n:this._location=un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vu(e,n)}get root(){const e=new un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k4(this._location.path)}get storage(){return this._service}get parent(){const e=I4(this._location.path);if(e===null)return null;const n=new un(this._location.bucket,e);return new vu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw f4(e)}}function x_(t,e){const n=e==null?void 0:e[i4];return n==null?null:un.makeFromBucketSpec(n,t)}function P4(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ds(e);s&&(wm(`https://${t.host}/b`),xm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:$1(i,t.app.options.projectId))}class C4{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=oS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o4,this._maxUploadRetryTime=a4,this._requests=new Set,s!=null?this._bucket=un.makeFromBucketSpec(s,this._host):this._bucket=x_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,e):this._bucket=x_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){w_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){w_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(_t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new p4(lS());{const o=b4(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const E_="@firebase/storage",T_="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="storage";function A4(t=qu(),e){t=mt(t);const r=Wu(t,cS).getImmediate({identifier:e}),s=V1("storage");return s&&N4(r,...s),r}function N4(t,e,n,r={}){P4(t,e,n,r)}function R4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new C4(n,r,s,e,Ls)}function j4(){ks(new $r(cS,R4,"PUBLIC").setMultipleInstances(!0)),En(E_,T_,""),En(E_,T_,"esm2017")}j4();const O4={apiKey:"AIzaSyCKQSBMUGnzEQkKTpcbsdVRJBAdbbPx5J8",authDomain:"villagefress.firebaseapp.com",projectId:"villagefress",storageBucket:"villagefress.appspot.com",messagingSenderId:"137619969533",appId:"1:137619969533:web:16e81dd66da680a9b7b594",measurementId:"G-EYC469WREV"},pg=GA().length?qu():H1(O4),uS=FD(pg),ds=L2(pg);A4(pg);const D4=new zn;async function Ph(t){const e=KT(uS,"users",t.uid);await n4(e,{name:t.displayName||"User",email:t.email||"",phone:t.phoneNumber||"",createdAt:new Date,updatedAt:new Date},{merge:!0})}function pn(){const[t,e]=L.useState(null),[n,r]=L.useState(!1),[s,i]=L.useState(!0),[o,a]=L.useState(!0);return L.useEffect(()=>{const h=pR(ds,async f=>{if(f){const v=(await e4(KT(uS,"users",f.uid))).data();e({...f,...v}),r(!0),a((v==null?void 0:v.admin)===!0)}else e(null),r(!1),a(!1);i(!1)});return()=>h()},[]),{user:t,isAuthenticated:n,isAdmin:o,login:h=>{e(h),r(!0)},logout:()=>{mR(ds),e(null),a(!1),r(!1)},loading:s}}function dS(){const[t,e]=L.useState(!0),[n,r]=L.useState("email"),[s,i]=L.useState(!1),[o,a]=L.useState(!1),[l,u]=L.useState(!1),[h,f]=L.useState(null),{login:m}=pn(),v=Ke(),[x,S]=L.useState({name:"",email:"",phone:"",password:"",otp:""}),P=j=>{S({...x,[j.target.name]:j.target.value})},_=async()=>{a(!0);try{const T=(await WR(ds,D4)).user;console.log("Google user:",T),m(T),Ph(T),v("/home")}catch(j){console.error("Google Sign-In Error:",j),alert("Google sign-in failed.")}finally{a(!1)}},y=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new LR("recaptcha-container",{size:"invisible",callback:j=>{console.log("reCAPTCHA verified")}},ds))},w=async()=>{a(!0);try{if(l){const T=(await h.confirm(x.otp)).user;m(T),Ph(T),v("/home")}else{y();const j=window.recaptchaVerifier,T=await FR(ds,"+917617028576",j);f(T),u(!0),alert("OTP sent to your phone.")}}catch(j){console.error("Phone auth error:",j),alert("Failed to authenticate. Check phone number or OTP.")}finally{a(!1)}},N=async()=>{a(!0);const{email:j,password:T,name:E}=x;if(!j||!T){alert("Email and password are required"),a(!1);return}try{let I;t?I=await cR(ds,j,T):(I=await lR(ds,j,T),await dR(I.user,{displayName:E||"User"}));const k=I.user;m(k),Ph(k),v("/home"),console.log("User authenticated:",k)}catch(I){alert(I.message),console.error("Email auth error:",I)}finally{a(!1)}},O=()=>{v("/")};return d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-50 to-white",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:d.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:O,className:"p-2 text-gray-600 hover:text-gray-900 transition-colors",children:d.jsx(Oi,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:t?"Welcome Back":"Create Account"})]})})}),d.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx("span",{className:"text-white font-bold text-xl",children:""})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t?"Sign In":"Join VillageFresh"}),d.jsx("p",{className:"text-gray-600",children:t?"Welcome back! Sign in to continue shopping":"Create your account to start fresh shopping"})]}),d.jsxs("button",{onClick:_,disabled:o,className:"w-full bg-white border-2 border-gray-200 hover:border-gray-300 text-gray-700 py-4 px-6 rounded-xl font-medium flex items-center justify-center space-x-3 transition-all mb-4 disabled:opacity-50",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),d.jsx("span",{children:o?"Signing in...":"Continue with Google"})]}),d.jsxs("div",{className:"flex items-center my-6",children:[d.jsx("div",{className:"flex-1 border-t border-gray-200"}),d.jsx("span",{className:"px-4 text-sm text-gray-500",children:"or"}),d.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),d.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 mb-6",children:[d.jsxs("button",{onClick:()=>r("email"),className:`flex-1 py-2 px-4 rounded-md font-medium text-sm transition-all ${n==="email"?"bg-white text-gray-900 shadow-sm":"text-gray-600"}`,children:[d.jsx(hC,{className:"w-4 h-4 inline mr-2"}),"Email"]}),d.jsxs("button",{onClick:()=>r("phone"),className:`flex-1 py-2 px-4 rounded-md font-medium text-sm transition-all ${n==="phone"?"bg-white text-gray-900 shadow-sm":"text-gray-600"}`,children:[d.jsx(fC,{className:"w-4 h-4 inline mr-2"}),"Phone"]})]}),d.jsxs("div",{className:"space-y-4",children:[!t&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),d.jsx("input",{type:"text",name:"name",value:x.name,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:"Enter your full name"})]}),n==="email"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),d.jsx("input",{type:"email",name:"email",value:x.email,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:"Enter your email"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),d.jsx("input",{type:s?"text":"password",name:"password",value:x.password,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-lg pr-12",placeholder:"Enter your password"}),d.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:s?d.jsx(lC,{className:"w-5 h-5"}):d.jsx(cC,{className:"w-5 h-5"})})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),d.jsx("input",{type:"tel",name:"phone",value:x.phone,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:"+91 9876543210"})]}),l&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter OTP"}),d.jsx("input",{type:"text",name:"otp",value:x.otp,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:"Enter 6-digit OTP",maxLength:6})]})]})]}),d.jsx("button",{onClick:n==="email"?N:w,disabled:o,className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white py-4 px-6 rounded-xl font-semibold mt-6",children:o?"Please wait...":n==="phone"&&!l?"Send OTP":t?"Sign In":"Create Account"}),d.jsx("div",{className:"text-center mt-6",children:d.jsx("button",{onClick:()=>e(!t),className:"text-emerald-600 font-medium hover:text-emerald-700 transition-colors",children:t?"Don't have an account? Sign up":"Already have an account? Sign in"})}),d.jsx("div",{id:"recaptcha-container"}),d.jsx("p",{className:"text-xs text-gray-500 text-center mt-6 leading-relaxed",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})]})]})}const Ch=[{id:1,name:"Majhawalia"},{id:2,name:"Saghwalia"},{id:3,name:"Basudevpur"},{id:4,name:"Saraia"},{id:5,name:"Basdila"},{id:6,name:"Narouli Bhism"},{id:7,name:"Pipar Patti"},{id:8,name:"Belwa"},{id:9,name:"Radi"},{id:10,name:"Tadawa Tola"},{id:11,name:"SabarmatiTaluka"},{id:12,name:"SabarmatiTaluk"}],hS=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(null),[s,i]=L.useState(!0),[o,a]=L.useState(null);L.useEffect(()=>{const f=localStorage.getItem("manual-village-id");if(f){const v=Ch.find(x=>x.id===Number(f));if(v){r(v),i(!1);return}}(async()=>{try{const v=await l(),x=await u(v.coords.latitude,v.coords.longitude);e(x);const S=h(x);r(S||null)}catch(v){a(v.message||"Location fetch error")}finally{i(!1)}})()},[]);const l=()=>new Promise((f,m)=>{navigator.geolocation||m(new Error("Geolocation is not supported by your browser")),navigator.geolocation.getCurrentPosition(f,m,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),u=async(f,m)=>{var _,y,w,N;const v=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${f}&lon=${m}`,x=`https://corsproxy.io/?${encodeURIComponent(v)}`,P=await(await fetch(x)).json();return console.log(P),((_=P.address)==null?void 0:_.village)||((y=P.address)==null?void 0:y.town)||((w=P.address)==null?void 0:w.city)||((N=P.address)==null?void 0:N.county)||"Unknown"},h=f=>Ch.find(m=>m.name.toLowerCase().includes(f.toLowerCase()));return{locationName:t,matchedVillage:n,geoLoading:s,error:o,isInServiceArea:!!n,allVillages:Ch,setMatchedVillage:r}};function mg({cart:t,store:e,theme:n,onCartClick:r,onUserClick:s,onStoreSettingsClick:i}){const o=t.reduce((m,v)=>m+v.quantity,0),{locationName:a}=hS(),l=n==="grocery",u=n==="fashion",{user:h}=pn();console.log("user",h==null?void 0:h.photoURL);const f={icon:l?"":u?"":"",gradient:l?"bg-gradient-to-br from-emerald-500 to-emerald-600":u?"bg-gradient-to-br from-pink-500 to-pink-600":"bg-gradient-to-br from-purple-500 to-pink-600",hover:l?"hover:text-emerald-600":u?"hover:text-pink-600":"hover:text-purple-600",badge:l?"bg-emerald-500":u?"bg-pink-500":"bg-purple-500",border:l?"border-emerald-100":u?"border-pink-100":"border-purple-100",title:l?"VillageFresh":u?"Fashion Hub":"Beauty Hub",subtitle:l?a:u?"Trendy & Affordable":"Glow & Glamour"};return d.jsx("header",{className:`bg-white shadow-sm sticky top-0 z-50 border-b ${f.border}`,children:d.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:`w-8 h-8 ${f.gradient} rounded-lg flex items-center justify-center`,children:d.jsx("span",{className:"text-white font-bold text-sm",children:f.icon})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-lg font-bold text-gray-900",children:f.title}),d.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[l&&d.jsx(_m,{className:"w-3 h-3"}),d.jsx("span",{className:"truncate max-w-[120px]",children:f.subtitle})]})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:s,className:`relative p-2 text-gray-600 ${f.hover} transition-colors`,children:h&&(h!=null&&h.photoURL||h.avatar)?d.jsx("img",{src:h==null?void 0:h.photoURL,alt:h.displayName,className:"w-6 h-6 rounded-full object-cover"}):d.jsx(R1,{className:"w-6 h-6"})}),r&&d.jsxs("button",{onClick:r,className:`relative p-2 text-gray-600 ${f.hover} transition-colors`,children:[d.jsx(A1,{className:"w-6 h-6"}),o>0&&d.jsx("span",{className:`absolute -top-1 -right-1 ${f.badge} text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium`,children:o})]})]})]})})})}const L4=[{id:"vegetables",name:"Vegetables",icon:"",image:"https://images.pexels.com/photos/1128678/pexels-photo-1128678.jpeg?auto=compress&cs=tinysrgb&w=300"},{id:"fruits",name:"Fruits",icon:"",image:"https://images.pexels.com/photos/1132047/pexels-photo-1132047.jpeg?auto=compress&cs=tinysrgb&w=300"},{id:"dairy",name:"Dairy",icon:"",image:"https://images.pexels.com/photos/416656/pexels-photo-416656.jpeg?auto=compress&cs=tinysrgb&w=300"},{id:"grains",name:"Grains",icon:"",image:"https://images.pexels.com/photos/1537086/pexels-photo-1537086.jpeg?auto=compress&cs=tinysrgb&w=300"},{id:"spices",name:"Spices",icon:"",image:"https://images.pexels.com/photos/277253/pexels-photo-277253.jpeg?auto=compress&cs=tinysrgb&w=300"},{id:"household",name:"Household",icon:"",image:"https://images.pexels.com/photos/4099355/pexels-photo-4099355.jpeg?auto=compress&cs=tinysrgb&w=300"}],S_=[{id:"all",name:"All",icon:"",image:""},{id:"skincare",name:"Skincare",icon:"",image:""},{id:"makeup",name:"Makeup",icon:"",image:""},{id:"haircare",name:"Hair Care",icon:"",image:""},{id:"fragrance",name:"Fragrance",icon:"",image:""},{id:"jewelry",name:"Jewelry",icon:"",image:""}],b_=[{id:"all",name:"All",icon:"",image:""},{id:"men",name:"Men",icon:"",image:""},{id:"women",name:"Women",icon:"",image:""},{id:"kids",name:"Kids",icon:"",image:""},{id:"accessories",name:"Accessories",icon:"",image:""},{id:"footwear",name:"Footwear",icon:"",image:""}];function M4({selectedCategory:t,onCategorySelect:e}){return d.jsx("div",{className:"h-screen sticky top-0 bg-white flex items-start justify-center px-1 py-4 overflow-y-auto",children:d.jsxs("div",{className:"flex flex-col gap-6 ",children:[d.jsxs("button",{onClick:()=>e(null),className:`flex items-center flex-col md:flex-row md:p-4 gap-2 transition-all text-left  ${t===null?"bg-emerald-100 text-emerald-800 rounded-sm":"text-gray-700"}`,children:[d.jsx("div",{className:"text-xl",children:""}),d.jsx("span",{className:"text-sm font-medium text-gray-900",children:"All Items"})]}),L4.map(n=>d.jsxs("button",{onClick:()=>e(n.id),className:`flex items-center md:flex-row flex-col md:p-4  p-1 transition-all text-left text-balance  ${t===n.id?"bg-emerald-100 text-emerald-800 rounded-sm":"text-gray-700"}`,children:[d.jsx("div",{className:"text-xl",children:n.icon}),d.jsx("span",{className:"text-sm  font-medium text-gray-900",children:n.name})]},n.id))]})})}function fS({product:t,cartItem:e,onAddToCart:n,onUpdateQuantity:r}){const s=(e==null?void 0:e.quantity)||0,i=Ke(),o=()=>{s===0?n(t):r(t.id,s+1)},a=()=>{s>0&&r(t.id,s-1)};return d.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[d.jsxs("div",{className:"aspect-square relative overflow-hidden",children:[d.jsx("img",{onClick:()=>i(`/shop/product/${t.id}`),src:t.image,alt:t.name,className:"w-full h-full object-cover"}),t.originalPrice&&d.jsxs("div",{className:"absolute top-2 left-2 bg-emerald-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:[Math.round((t.originalPrice-t.price)/t.originalPrice*100),"% OFF"]}),d.jsx("div",{className:"absolute bottom-0 right-2",children:s===0?d.jsx("button",{onClick:o,className:"bg-emerald-500 hover:bg-emerald-600 text-white p-2 rounded-lg transition-colors",children:d.jsx(Ur,{className:"w-4 h-4"})}):d.jsxs("div",{className:"flex items-center space-x-2 bg-emerald-500 rounded-lg",children:[d.jsx("button",{onClick:a,className:"text-white p-2 hover:bg-emerald-600 rounded-l-lg transition-colors",children:d.jsx(zu,{className:"w-4 h-4"})}),d.jsx("span",{className:"text-white font-medium px-2 min-w-8 text-center",children:s}),d.jsx("button",{onClick:o,className:"text-white p-2 hover:bg-emerald-600 rounded-r-lg transition-colors",children:d.jsx(Ur,{className:"w-4 h-4"})})]})})]}),d.jsxs("div",{className:"p-2",children:[d.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1 leading-tight",children:t.name}),d.jsx("p",{className:"text-xs text-gray-600 mb-2",children:t.unit}),d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("span",{className:"font-bold text-gray-900",children:["",t.price]}),t.originalPrice&&d.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["",t.originalPrice]})]})})]})]})}function V4({products:t,cart:e,onAddToCart:n,onUpdateQuantity:r}){const s=i=>e.find(o=>o.product.id===i);return t.length===0?d.jsxs("div",{className:" py-8 text-center",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No products found"}),d.jsx("p",{className:"text-gray-600",children:"Try selecting a different category or check back later."})]}):d.jsx("div",{className:" pb-2",children:d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4  gap-1",children:t.map(i=>d.jsx(fS,{product:i,cartItem:s(i.id),onAddToCart:n,onUpdateQuantity:r},i.id))})})}const I_=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(v=>v(e,m))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(r,s,a);return a},F4=t=>t?I_(t):I_,U4=t=>t;function $4(t,e=U4){const n=Ce.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return Ce.useDebugValue(n),n}const k_=t=>{const e=F4(t),n=r=>$4(e,r);return Object.assign(n,e),n},gg=t=>t?k_(t):k_,rl=gg(t=>({selectedAddress:null,paymentMethod:null,paymentDetails:null,deliveryType:"instant",setAddress:e=>t({selectedAddress:e}),setPayment:(e,n=null)=>t({paymentMethod:e,paymentDetails:n}),setDeliveryType:e=>t({deliveryType:e}),resetOrderFlow:()=>t({selectedAddress:null,paymentMethod:null,paymentDetails:null,deliveryType:"instant"})})),Ah=149,B4=20;function ld({isOpen:t,onClose:e,cart:n,store:r,onUpdateQuantity:s,onOrderViaWhatsApp:i}){const o=n.reduce((_,y)=>_+y.product.price*y.quantity,0),a=o>=Ah?0:B4,l=o+a,u=Ah-o,h=n.reduce((_,y)=>_+y.quantity,0),f=Ke(),{selectedAddress:m,paymentMethod:v,paymentDetails:x,resetOrderFlow:S}=rl(),P=()=>{m?v?i():f("/payment"):f("/delivery-address")};return t?d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",children:d.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl overflow-hidden",style:{maxHeight:"90vh"},children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[d.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["My Cart (",h," items)"]}),d.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",children:d.jsx(Jc,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"overflow-y-auto p-4 space-y-4",style:{maxHeight:"calc(90vh - 280px)"},children:n.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),d.jsx("p",{className:"text-gray-600",children:"Add some products to get started!"})]}):n.map(_=>d.jsxs("div",{className:"flex items-center space-x-4 bg-gray-50 rounded-lg p-4",children:[d.jsx("img",{src:_.product.image,alt:_.product.name,className:"w-16 h-16 object-cover rounded-lg"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:_.product.name}),d.jsx("p",{className:"text-xs text-gray-600",children:_.product.unit}),d.jsxs("p",{className:"font-bold text-emerald-600",children:["",_.product.price]})]}),d.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-lg border",children:[d.jsx("button",{onClick:()=>s(_.product.id,_.quantity-1),className:"p-2 text-gray-600 hover:text-emerald-600 transition-colors",children:d.jsx(zu,{className:"w-4 h-4"})}),d.jsx("span",{className:"font-medium px-2 min-w-8 text-center",children:_.quantity}),d.jsx("button",{onClick:()=>s(_.product.id,_.quantity+1),className:"p-2 text-gray-600 hover:text-emerald-600 transition-colors",children:d.jsx(Ur,{className:"w-4 h-4"})})]})]},_.product.id))}),n.length>0&&d.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4 bg-white",children:[d.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Subtotal"}),d.jsxs("span",{children:["",o]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Delivery"}),d.jsx("span",{children:a===0?"Free":`${a}`})]}),d.jsxs("div",{className:"flex justify-between font-bold text-gray-900 text-base pt-2 border-t border-gray-200",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{children:["",l]})]})]}),o<Ah?d.jsxs("p",{className:"text-sm text-yellow-600 font-medium text-center",children:[" Add ",u," more for free delivery!"]}):d.jsx("p",{className:"text-sm text-green-600 font-medium text-center",children:" You got free delivery!"}),d.jsxs("button",{onClick:P,className:"w-full bg-green-500 hover:bg-green-600 text-white py-4 px-6 rounded-xl font-semibold flex items-center justify-center space-x-2 transition-colors",children:[d.jsx(C1,{className:"w-5 h-5"}),d.jsx("span",{children:"Select Address"})]}),d.jsxs("p",{className:"text-xs text-gray-600 text-center",children:["Your order will be sent to ",r.name," via WhatsApp"]})]})]})}):null}function z4({isOpen:t,onClose:e,store:n,onSaveStore:r}){const[s,i]=L.useState(n),o=()=>{r(s),e()};return t?d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",children:d.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[80vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[d.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[d.jsx(_C,{className:"w-5 h-5"}),d.jsx("span",{children:"Store Settings"})]}),d.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",children:d.jsx(Jc,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Name"}),d.jsx("input",{type:"text",value:s.name,onChange:a=>i({...s,name:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter your store name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name"}),d.jsx("input",{type:"text",value:s.ownerName,onChange:a=>i({...s,ownerName:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter owner name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),d.jsx("input",{type:"tel",value:s.phone,onChange:a=>i({...s,phone:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter phone number"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp Number"}),d.jsx("input",{type:"tel",value:s.whatsappNumber,onChange:a=>i({...s,whatsappNumber:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter WhatsApp number (with country code)"}),d.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Example: +917617028576 (include country code)"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Address"}),d.jsx("textarea",{value:s.address,onChange:a=>i({...s,address:a.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter complete store address"})]})]}),d.jsx("div",{className:"border-t border-gray-200 p-4",children:d.jsxs("button",{onClick:o,className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white py-4 px-6 rounded-xl font-semibold flex items-center justify-center space-x-2 transition-colors",children:[d.jsx(pC,{className:"w-5 h-5"}),d.jsx("span",{children:"Save Settings"})]})})]})}):null}function yg({user:t,isOpen:e,onClose:n,onLogout:r}){return e?d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex justify-center items-center",children:d.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-lg relative",children:[d.jsx("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-red-500",onClick:n,children:""}),d.jsxs("div",{className:"flex flex-col items-center text-center",children:[d.jsx("img",{src:(t==null?void 0:t.avatar)||(t==null?void 0:t.photoURL)||"/default-user.png",alt:t.name,className:"w-20 h-20 rounded-full object-cover mb-3"}),d.jsx("h3",{className:"text-lg font-bold text-gray-900",children:t.name||t.displayName}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t.email}),d.jsx("button",{onClick:r,className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all",children:"Logout"})]})]})}):null}const Va=[{id:"shop-v1",name:"Fresh Tomatoes",price:40,originalPrice:50,image:"https://images.pexels.com/photos/533280/pexels-photo-533280.jpeg?auto=compress&cs=tinysrgb&w=300",category:"vegetables",unit:"1 kg",inStock:!0,description:"Fresh local tomatoes, perfect for cooking"},{id:"shop-v2",name:"Green Onions",price:25,image:"https://images.pexels.com/photos/928251/pexels-photo-928251.jpeg?auto=compress&cs=tinysrgb&w=300",category:"vegetables",unit:"per bunch",inStock:!0,description:"Fresh green onions from local farms"},{id:"shop-v3",name:"Fresh Potatoes",price:30,image:"https://images.pexels.com/photos/144248/potatoes-vegetables-erdfrucht-bio-144248.jpeg?auto=compress&cs=tinysrgb&w=300",category:"vegetables",unit:"1 kg",inStock:!0,description:"High quality potatoes for all your cooking needs"},{id:"shop-v4",name:"Fresh Carrots",price:45,image:"https://images.pexels.com/photos/143133/pexels-photo-143133.jpeg?auto=compress&cs=tinysrgb&w=300",category:"vegetables",unit:"1 kg",inStock:!0,description:"Sweet and crunchy carrots, rich in vitamins"},{id:"shop-f1",name:"Fresh Apples",price:120,originalPrice:140,image:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=300",category:"fruits",unit:"1 kg",inStock:!0,description:"Crisp and sweet apples, perfect for snacking"},{id:"shop-f2",name:"Ripe Bananas",price:60,image:"https://images.pexels.com/photos/61127/pexels-photo-61127.jpeg?auto=compress&cs=tinysrgb&w=300",category:"fruits",unit:"per dozen",inStock:!0,description:"Sweet and ripe bananas, rich in potassium"},{id:"shop-f3",name:"Fresh Oranges",price:80,image:"https://images.pexels.com/photos/1000084/pexels-photo-1000084.jpeg?auto=compress&cs=tinysrgb&w=300",category:"fruits",unit:"1 kg",inStock:!0,description:"Juicy oranges packed with vitamin C"},{id:"shop-d1",name:"Fresh Milk",price:55,image:"https://images.pexels.com/photos/248412/pexels-photo-248412.jpeg?auto=compress&cs=tinysrgb&w=300",category:"dairy",unit:"per liter",inStock:!0,description:"Pure and fresh milk from local dairy farms"},{id:"shop-d2",name:"Farm Eggs",price:6,image:"https://images.pexels.com/photos/162712/egg-white-food-protein-162712.jpeg?auto=compress&cs=tinysrgb&w=300",category:"dairy",unit:"per piece",inStock:!0,description:"Fresh farm eggs, rich in protein"},{id:"shop-g1",name:"Basmati Rice",price:180,image:"https://images.pexels.com/photos/723198/pexels-photo-723198.jpeg?auto=compress&cs=tinysrgb&w=300",category:"grains",unit:"1 kg",inStock:!0,description:"Premium quality basmati rice"},{id:"shop-g2",name:"Wheat Flour",price:45,image:"https://images.pexels.com/photos/1117386/pexels-photo-1117386.jpeg?auto=compress&cs=tinysrgb&w=300",category:"grains",unit:"1 kg",inStock:!0,description:"Fresh ground wheat flour for rotis and bread"},{id:"shop-s1",name:"Turmeric Powder",price:120,image:"https://images.pexels.com/photos/1340116/pexels-photo-1340116.jpeg?auto=compress&cs=tinysrgb&w=300",category:"spices",unit:"per 100g",inStock:!0,description:"Pure turmeric powder with natural color"},{id:"shop-s2",name:"Red Chili Powder",price:150,image:"https://images.pexels.com/photos/1340113/pexels-photo-1340113.jpeg?auto=compress&cs=tinysrgb&w=300",category:"spices",unit:"per 100g",inStock:!0,description:"Spicy red chili powder for authentic taste"},{id:"shop-h1",name:"Dish Soap",price:85,image:"https://images.pexels.com/photos/4099355/pexels-photo-4099355.jpeg?auto=compress&cs=tinysrgb&w=300",category:"household",unit:"per bottle",inStock:!0,description:"Effective dish cleaning soap"},{id:"shop-h2",name:"Toilet Paper",price:120,image:"https://images.pexels.com/photos/4099354/pexels-photo-4099354.jpeg?auto=compress&cs=tinysrgb&w=300",category:"household",unit:"per pack",inStock:!0,description:"Soft and absorbent toilet paper"}],_u=[{id:"beauty-b1",name:"Himalaya Face Wash",price:149,originalPrice:199,image:"https://images.pexels.com/photos/3685530/pexels-photo-3685530.jpeg?auto=compress&cs=tinysrgb&w=300",category:"skincare",rating:4.5,reviews:1234,brand:"Himalaya",type:"Neem Face Wash"},{id:"beauty-b2",name:"Lakme Lipstick",price:299,originalPrice:399,image:"https://images.pexels.com/photos/2533266/pexels-photo-2533266.jpeg?auto=compress&cs=tinysrgb&w=300",category:"makeup",rating:4.3,reviews:856,brand:"Lakme",type:"Matte Lipstick"},{id:"beauty-b3",name:"L'Oreal Shampoo",price:249,originalPrice:329,image:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=300",category:"haircare",rating:4.4,reviews:567,brand:"L'Oreal",type:"Anti-Dandruff"},{id:"beauty-b4",name:"Gold Ring",price:2999,originalPrice:3999,image:"https://images.pexels.com/photos/1191531/pexels-photo-1191531.jpeg?auto=compress&cs=tinysrgb&w=300",category:"jewelry",rating:4.8,reviews:234,brand:"Tanishq",type:"18K Gold Ring"},{id:"beauty-b5",name:"Fogg Perfume",price:199,originalPrice:299,image:"https://images.pexels.com/photos/965989/pexels-photo-965989.jpeg?auto=compress&cs=tinysrgb&w=300",category:"fragrance",rating:4.2,reviews:445,brand:"Fogg",type:"Body Spray"},{id:"beauty-b6",name:"Nivea Moisturizer",price:179,originalPrice:229,image:"https://images.pexels.com/photos/3685530/pexels-photo-3685530.jpeg?auto=compress&cs=tinysrgb&w=300",category:"skincare",rating:4.6,reviews:789,brand:"Nivea",type:"Daily Moisturizer"},{id:"beauty-b7",name:"Maybelline Mascara",price:399,originalPrice:499,image:"https://images.pexels.com/photos/2533266/pexels-photo-2533266.jpeg?auto=compress&cs=tinysrgb&w=300",category:"makeup",rating:4.4,reviews:623,brand:"Maybelline",type:"Volume Express"},{id:"beauty-b8",name:"Silver Earrings",price:899,originalPrice:1299,image:"https://images.pexels.com/photos/1191531/pexels-photo-1191531.jpeg?auto=compress&cs=tinysrgb&w=300",category:"jewelry",rating:4.5,reviews:156,brand:"Kalyan Jewellers",type:"Sterling Silver"}],wu=[{id:"fashion-f1",name:"Cotton Kurta Set",price:1299,originalPrice:1599,image:"https://images.pexels.com/photos/1040945/pexels-photo-1040945.jpeg?auto=compress&cs=tinysrgb&w=300",category:"men",rating:4.5,reviews:234,brand:"Village Wear"},{id:"fashion-f2",name:"Handloom Saree",price:2499,originalPrice:3199,image:"https://images.pexels.com/photos/1055691/pexels-photo-1055691.jpeg?auto=compress&cs=tinysrgb&w=300",category:"women",rating:4.8,reviews:156,brand:"Traditional Craft"},{id:"fashion-f3",name:"Kids Ethnic Wear",price:899,originalPrice:1199,image:"https://images.pexels.com/photos/1620760/pexels-photo-1620760.jpeg?auto=compress&cs=tinysrgb&w=300",category:"kids",rating:4.6,reviews:89,brand:"Little Angels"},{id:"fashion-f4",name:"Leather Handbag",price:1899,originalPrice:2499,image:"https://images.pexels.com/photos/1152077/pexels-photo-1152077.jpeg?auto=compress&cs=tinysrgb&w=300",category:"accessories",rating:4.4,reviews:67,brand:"Craft House"},{id:"fashion-f5",name:"Casual T-Shirt",price:599,originalPrice:799,image:"https://images.pexels.com/photos/1040945/pexels-photo-1040945.jpeg?auto=compress&cs=tinysrgb&w=300",category:"men",rating:4.2,reviews:145,brand:"Comfort Zone"},{id:"fashion-f6",name:"Designer Sandals",price:1299,originalPrice:1699,image:"https://images.pexels.com/photos/1598505/pexels-photo-1598505.jpeg?auto=compress&cs=tinysrgb&w=300",category:"footwear",rating:4.3,reviews:78,brand:"Step Style"}],H4=[{id:"g1",name:"Basmati Rice",image:"https://images.pexels.com/photos/723198/pexels-photo-723198.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/shop"},{id:"g2",name:"Wheat Flour",image:"https://images.pexels.com/photos/1117386/pexels-photo-1117386.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/shop"},{id:"g3",name:"Turmeric Powder",image:"https://images.pexels.com/photos/1340116/pexels-photo-1340116.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/shop"},{id:"g4",name:"Red Chili Powder",image:"https://images.pexels.com/photos/1340113/pexels-photo-1340113.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/shop"}],W4=[{id:"v1",name:"Fresh Tomatoes",image:"https://images.pexels.com/photos/533280/pexels-photo-533280.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/shop"},{id:"v2",name:"Fresh Potatoes",image:"https://images.pexels.com/photos/144248/potatoes-vegetables-erdfrucht-bio-144248.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/shop"},{id:"v3",name:"Fresh Carrots",image:"https://images.pexels.com/photos/143133/pexels-photo-143133.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/shop"},{id:"v4",name:"Fresh Apples",image:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/shop"}],q4=[{id:"f1",name:"Cotton Kurta Set",image:"https://images.pexels.com/photos/1040945/pexels-photo-1040945.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/fashion"},{id:"f2",name:"Handloom Saree",image:"https://images.pexels.com/photos/1055691/pexels-photo-1055691.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/fashion"},{id:"f3",name:"Casual T-Shirt",image:"https://images.pexels.com/photos/1040945/pexels-photo-1040945.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/fashion"},{id:"f4",name:"Designer Sandals",image:"https://images.pexels.com/photos/1598505/pexels-photo-1598505.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/fashion"}],G4=[{id:"b1",name:"Face Wash",image:"https://images.pexels.com/photos/3685530/pexels-photo-3685530.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/beauty"},{id:"b2",name:"Lipstick",image:"https://images.pexels.com/photos/2533266/pexels-photo-2533266.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/beauty"},{id:"b3",name:"Hair Shampoo",image:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/beauty"},{id:"b4",name:"Moisturizer",image:"https://images.pexels.com/photos/3685530/pexels-photo-3685530.jpeg?auto=compress&cs=tinysrgb&w=200",category:"/beauty"}],P_=[...Va,..._u,...wu];function C_(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function vg(t,e){t===void 0&&(t={}),e===void 0&&(e={});const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:C_(e[r])&&C_(t[r])&&Object.keys(e[r]).length>0&&vg(t[r],e[r])})}const pS={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function In(){const t=typeof document<"u"?document:{};return vg(t,pS),t}const K4={document:pS,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function St(){const t=typeof window<"u"?window:{};return vg(t,K4),t}function Q4(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function Y4(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function dp(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function xu(){return Date.now()}function J4(t){const e=St();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function X4(t,e){e===void 0&&(e="x");const n=St();let r,s,i;const o=J4(t);return n.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(a=>a.replace(",",".")).join(", ")),i=new n.WebKitCSSMatrix(s==="none"?"":s)):(i=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=i.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?s=i.m41:r.length===16?s=parseFloat(r[12]):s=parseFloat(r[4])),e==="y"&&(n.WebKitCSSMatrix?s=i.m42:r.length===16?s=parseFloat(r[13]):s=parseFloat(r[5])),s||0}function Ql(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Z4(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Mt(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const r=n<0||arguments.length<=n?void 0:arguments[n];if(r!=null&&!Z4(r)){const s=Object.keys(Object(r)).filter(i=>e.indexOf(i)<0);for(let i=0,o=s.length;i<o;i+=1){const a=s[i],l=Object.getOwnPropertyDescriptor(r,a);l!==void 0&&l.enumerable&&(Ql(t[a])&&Ql(r[a])?r[a].__swiper__?t[a]=r[a]:Mt(t[a],r[a]):!Ql(t[a])&&Ql(r[a])?(t[a]={},r[a].__swiper__?t[a]=r[a]:Mt(t[a],r[a])):t[a]=r[a])}}}return t}function Yl(t,e,n){t.style.setProperty(e,n)}function mS(t){let{swiper:e,targetPosition:n,side:r}=t;const s=St(),i=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const u=n>i?"next":"prev",h=(m,v)=>u==="next"&&m>=v||u==="prev"&&m<=v,f=()=>{a=new Date().getTime(),o===null&&(o=a);const m=Math.max(Math.min((a-o)/l,1),0),v=.5-Math.cos(m*Math.PI)/2;let x=i+v*(n-i);if(h(x,n)&&(x=n),e.wrapperEl.scrollTo({[r]:x}),h(x,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:x})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(f)};f()}function Kn(t,e){e===void 0&&(e="");const n=St(),r=[...t.children];return n.HTMLSlotElement&&t instanceof HTMLSlotElement&&r.push(...t.assignedElements()),e?r.filter(s=>s.matches(e)):r}function eL(t,e){const n=[e];for(;n.length>0;){const r=n.shift();if(t===r)return!0;n.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function tL(t,e){const n=St();let r=e.contains(t);return!r&&n.HTMLSlotElement&&e instanceof HTMLSlotElement&&(r=[...e.assignedElements()].includes(t),r||(r=eL(t,e))),r}function Eu(t){try{console.warn(t);return}catch{}}function hp(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:Q4(e)),n}function nL(t,e){const n=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function rL(t,e){const n=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function br(t,e){return St().getComputedStyle(t,null).getPropertyValue(e)}function A_(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function sL(t,e){const n=[];let r=t.parentElement;for(;r;)n.push(r),r=r.parentElement;return n}function N_(t,e,n){const r=St();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function R_(t,e){e===void 0&&(e=""),typeof trustedTypes<"u"?t.innerHTML=trustedTypes.createPolicy("html",{createHTML:n=>n}).createHTML(e):t.innerHTML=e}let Nh;function iL(){const t=St(),e=In();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function gS(){return Nh||(Nh=iL()),Nh}let Rh;function oL(t){let{userAgent:e}=t===void 0?{}:t;const n=gS(),r=St(),s=r.navigator.platform,i=e||r.navigator.userAgent,o={ios:!1,android:!1},a=r.screen.width,l=r.screen.height,u=i.match(/(Android);?[\s\/]+([\d.]+)?/);let h=i.match(/(iPad).*OS\s([\d_]+)/);const f=i.match(/(iPod)(.*OS\s([\d_]+))?/),m=!h&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),v=s==="Win32";let x=s==="MacIntel";const S=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&x&&n.touch&&S.indexOf(`${a}x${l}`)>=0&&(h=i.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),x=!1),u&&!v&&(o.os="android",o.android=!0),(h||m||f)&&(o.os="ios",o.ios=!0),o}function yS(t){return t===void 0&&(t={}),Rh||(Rh=oL(t)),Rh}let jh;function aL(){const t=St(),e=yS();let n=!1;function r(){const a=t.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(r()){const a=String(t.navigator.userAgent);if(a.includes("Version/")){const[l,u]=a.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));n=l<16||l===16&&u<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),i=r(),o=i||s&&e.ios;return{isSafari:n||i,needPerspectiveFix:n,need3dFix:o,isWebView:s}}function vS(){return jh||(jh=aL()),jh}function lL(t){let{swiper:e,on:n,emit:r}=t;const s=St();let i=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(i=new ResizeObserver(f=>{o=s.requestAnimationFrame(()=>{const{width:m,height:v}=e;let x=m,S=v;f.forEach(P=>{let{contentBoxSize:_,contentRect:y,target:w}=P;w&&w!==e.el||(x=y?y.width:(_[0]||_).inlineSize,S=y?y.height:(_[0]||_).blockSize)}),(x!==m||S!==v)&&a()})}),i.observe(e.el))},u=()=>{o&&s.cancelAnimationFrame(o),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null)},h=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",a),s.addEventListener("orientationchange",h)}),n("destroy",()=>{u(),s.removeEventListener("resize",a),s.removeEventListener("orientationchange",h)})}function cL(t){let{swiper:e,extendParams:n,on:r,emit:s}=t;const i=[],o=St(),a=function(h,f){f===void 0&&(f={});const m=o.MutationObserver||o.WebkitMutationObserver,v=new m(x=>{if(e.__preventObserver__)return;if(x.length===1){s("observerUpdate",x[0]);return}const S=function(){s("observerUpdate",x[0])};o.requestAnimationFrame?o.requestAnimationFrame(S):o.setTimeout(S,0)});v.observe(h,{attributes:typeof f.attributes>"u"?!0:f.attributes,childList:e.isElement||(typeof f.childList>"u"?!0:f).childList,characterData:typeof f.characterData>"u"?!0:f.characterData}),i.push(v)},l=()=>{if(e.params.observer){if(e.params.observeParents){const h=sL(e.hostEl);for(let f=0;f<h.length;f+=1)a(h[f])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},u=()=>{i.forEach(h=>{h.disconnect()}),i.splice(0,i.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",u)}var uL={on(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const s=n?"unshift":"push";return t.split(" ").forEach(i=>{r.eventsListeners[i]||(r.eventsListeners[i]=[]),r.eventsListeners[i][s](e)}),r},once(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function s(){r.off(t,s),s.__emitterProxy&&delete s.__emitterProxy;for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];e.apply(r,o)}return s.__emitterProxy=e,r.on(t,s,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const r=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[r](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(r=>{typeof e>"u"?n.eventsListeners[r]=[]:n.eventsListeners[r]&&n.eventsListeners[r].forEach((s,i)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&n.eventsListeners[r].splice(i,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,r;for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return typeof i[0]=="string"||Array.isArray(i[0])?(e=i[0],n=i.slice(1,i.length),r=t):(e=i[0].events,n=i[0].data,r=i[0].context||t),n.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(u=>{u.apply(r,[l,...n])}),t.eventsListeners&&t.eventsListeners[l]&&t.eventsListeners[l].forEach(u=>{u.apply(r,n)})}),t}};function dL(){const t=this;let e,n;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=r.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(br(r,"padding-left")||0,10)-parseInt(br(r,"padding-right")||0,10),n=n-parseInt(br(r,"padding-top")||0,10)-parseInt(br(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function hL(){const t=this;function e(k,A){return parseFloat(k.getPropertyValue(t.getDirectionLabel(A))||0)}const n=t.params,{wrapperEl:r,slidesEl:s,size:i,rtlTranslate:o,wrongRTL:a}=t,l=t.virtual&&n.virtual.enabled,u=l?t.virtual.slides.length:t.slides.length,h=Kn(s,`.${t.params.slideClass}, swiper-slide`),f=l?t.virtual.slides.length:h.length;let m=[];const v=[],x=[];let S=n.slidesOffsetBefore;typeof S=="function"&&(S=n.slidesOffsetBefore.call(t));let P=n.slidesOffsetAfter;typeof P=="function"&&(P=n.slidesOffsetAfter.call(t));const _=t.snapGrid.length,y=t.slidesGrid.length;let w=n.spaceBetween,N=-S,O=0,j=0;if(typeof i>"u")return;typeof w=="string"&&w.indexOf("%")>=0?w=parseFloat(w.replace("%",""))/100*i:typeof w=="string"&&(w=parseFloat(w)),t.virtualSize=-w,h.forEach(k=>{o?k.style.marginLeft="":k.style.marginRight="",k.style.marginBottom="",k.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Yl(r,"--swiper-centered-offset-before",""),Yl(r,"--swiper-centered-offset-after",""));const T=n.grid&&n.grid.rows>1&&t.grid;T?t.grid.initSlides(h):t.grid&&t.grid.unsetSlides();let E;const I=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(k=>typeof n.breakpoints[k].slidesPerView<"u").length>0;for(let k=0;k<f;k+=1){E=0;let A;if(h[k]&&(A=h[k]),T&&t.grid.updateSlide(k,A,h),!(h[k]&&br(A,"display")==="none")){if(n.slidesPerView==="auto"){I&&(h[k].style[t.getDirectionLabel("width")]="");const R=getComputedStyle(A),C=A.style.transform,pe=A.style.webkitTransform;if(C&&(A.style.transform="none"),pe&&(A.style.webkitTransform="none"),n.roundLengths)E=t.isHorizontal()?N_(A,"width"):N_(A,"height");else{const Te=e(R,"width"),J=e(R,"padding-left"),ne=e(R,"padding-right"),V=e(R,"margin-left"),z=e(R,"margin-right"),q=R.getPropertyValue("box-sizing");if(q&&q==="border-box")E=Te+V+z;else{const{clientWidth:he,offsetWidth:ue}=A;E=Te+J+ne+V+z+(ue-he)}}C&&(A.style.transform=C),pe&&(A.style.webkitTransform=pe),n.roundLengths&&(E=Math.floor(E))}else E=(i-(n.slidesPerView-1)*w)/n.slidesPerView,n.roundLengths&&(E=Math.floor(E)),h[k]&&(h[k].style[t.getDirectionLabel("width")]=`${E}px`);h[k]&&(h[k].swiperSlideSize=E),x.push(E),n.centeredSlides?(N=N+E/2+O/2+w,O===0&&k!==0&&(N=N-i/2-w),k===0&&(N=N-i/2-w),Math.abs(N)<1/1e3&&(N=0),n.roundLengths&&(N=Math.floor(N)),j%n.slidesPerGroup===0&&m.push(N),v.push(N)):(n.roundLengths&&(N=Math.floor(N)),(j-Math.min(t.params.slidesPerGroupSkip,j))%t.params.slidesPerGroup===0&&m.push(N),v.push(N),N=N+E+w),t.virtualSize+=E+w,O=E,j+=1}}if(t.virtualSize=Math.max(t.virtualSize,i)+P,o&&a&&(n.effect==="slide"||n.effect==="coverflow")&&(r.style.width=`${t.virtualSize+w}px`),n.setWrapperSize&&(r.style[t.getDirectionLabel("width")]=`${t.virtualSize+w}px`),T&&t.grid.updateWrapperSize(E,m),!n.centeredSlides){const k=[];for(let A=0;A<m.length;A+=1){let R=m[A];n.roundLengths&&(R=Math.floor(R)),m[A]<=t.virtualSize-i&&k.push(R)}m=k,Math.floor(t.virtualSize-i)-Math.floor(m[m.length-1])>1&&m.push(t.virtualSize-i)}if(l&&n.loop){const k=x[0]+w;if(n.slidesPerGroup>1){const A=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),R=k*n.slidesPerGroup;for(let C=0;C<A;C+=1)m.push(m[m.length-1]+R)}for(let A=0;A<t.virtual.slidesBefore+t.virtual.slidesAfter;A+=1)n.slidesPerGroup===1&&m.push(m[m.length-1]+k),v.push(v[v.length-1]+k),t.virtualSize+=k}if(m.length===0&&(m=[0]),w!==0){const k=t.isHorizontal()&&o?"marginLeft":t.getDirectionLabel("marginRight");h.filter((A,R)=>!n.cssMode||n.loop?!0:R!==h.length-1).forEach(A=>{A.style[k]=`${w}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let k=0;x.forEach(R=>{k+=R+(w||0)}),k-=w;const A=k>i?k-i:0;m=m.map(R=>R<=0?-S:R>A?A+P:R)}if(n.centerInsufficientSlides){let k=0;x.forEach(R=>{k+=R+(w||0)}),k-=w;const A=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(k+A<i){const R=(i-k-A)/2;m.forEach((C,pe)=>{m[pe]=C-R}),v.forEach((C,pe)=>{v[pe]=C+R})}}if(Object.assign(t,{slides:h,snapGrid:m,slidesGrid:v,slidesSizesGrid:x}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Yl(r,"--swiper-centered-offset-before",`${-m[0]}px`),Yl(r,"--swiper-centered-offset-after",`${t.size/2-x[x.length-1]/2}px`);const k=-t.snapGrid[0],A=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(R=>R+k),t.slidesGrid=t.slidesGrid.map(R=>R+A)}if(f!==u&&t.emit("slidesLengthChange"),m.length!==_&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),v.length!==y&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const k=`${n.containerModifierClass}backface-hidden`,A=t.el.classList.contains(k);f<=n.maxBackfaceHiddenSlides?A||t.el.classList.add(k):A&&t.el.classList.remove(k)}}function fL(t){const e=this,n=[],r=e.virtual&&e.params.virtual.enabled;let s=0,i;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>r?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{n.push(a)});else for(i=0;i<Math.ceil(e.params.slidesPerView);i+=1){const a=e.activeIndex+i;if(a>e.slides.length&&!r)break;n.push(o(a))}else n.push(o(e.activeIndex));for(i=0;i<n.length;i+=1)if(typeof n[i]<"u"){const a=n[i].offsetHeight;s=a>s?a:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function pL(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-n-t.cssOverflowAdjustment()}const j_=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function mL(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:r,rtlTranslate:s,snapGrid:i}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;s&&(o=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=n.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<r.length;l+=1){const u=r[l];let h=u.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(h-=r[0].swiperSlideOffset);const f=(o+(n.centeredSlides?e.minTranslate():0)-h)/(u.swiperSlideSize+a),m=(o-i[0]+(n.centeredSlides?e.minTranslate():0)-h)/(u.swiperSlideSize+a),v=-(o-h),x=v+e.slidesSizesGrid[l],S=v>=0&&v<=e.size-e.slidesSizesGrid[l],P=v>=0&&v<e.size-1||x>1&&x<=e.size||v<=0&&x>=e.size;P&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l)),j_(u,P,n.slideVisibleClass),j_(u,S,n.slideFullyVisibleClass),u.progress=s?-f:f,u.originalProgress=s?-m:m}}function gL(t){const e=this;if(typeof t>"u"){const h=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*h||0}const n=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:i,isEnd:o,progressLoop:a}=e;const l=i,u=o;if(r===0)s=0,i=!0,o=!0;else{s=(t-e.minTranslate())/r;const h=Math.abs(t-e.minTranslate())<1,f=Math.abs(t-e.maxTranslate())<1;i=h||s<=0,o=f||s>=1,h&&(s=0),f&&(s=1)}if(n.loop){const h=e.getSlideIndexByData(0),f=e.getSlideIndexByData(e.slides.length-1),m=e.slidesGrid[h],v=e.slidesGrid[f],x=e.slidesGrid[e.slidesGrid.length-1],S=Math.abs(t);S>=m?a=(S-m)/x:a=(S+x-v)/x,a>1&&(a-=1)}Object.assign(e,{progress:s,progressLoop:a,isBeginning:i,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),i&&!l&&e.emit("reachBeginning toEdge"),o&&!u&&e.emit("reachEnd toEdge"),(l&&!i||u&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}const Oh=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function yL(){const t=this,{slides:e,params:n,slidesEl:r,activeIndex:s}=t,i=t.virtual&&n.virtual.enabled,o=t.grid&&n.grid&&n.grid.rows>1,a=f=>Kn(r,`.${n.slideClass}${f}, swiper-slide${f}`)[0];let l,u,h;if(i)if(n.loop){let f=s-t.virtual.slidesBefore;f<0&&(f=t.virtual.slides.length+f),f>=t.virtual.slides.length&&(f-=t.virtual.slides.length),l=a(`[data-swiper-slide-index="${f}"]`)}else l=a(`[data-swiper-slide-index="${s}"]`);else o?(l=e.find(f=>f.column===s),h=e.find(f=>f.column===s+1),u=e.find(f=>f.column===s-1)):l=e[s];l&&(o||(h=rL(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!h&&(h=e[0]),u=nL(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(f=>{Oh(f,f===l,n.slideActiveClass),Oh(f,f===h,n.slideNextClass),Oh(f,f===u,n.slidePrevClass)}),t.emitSlidesClasses()}const Sc=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=e.closest(n());if(r){let s=r.querySelector(`.${t.params.lazyPreloaderClass}`);!s&&t.isElement&&(r.shadowRoot?s=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(s=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},Dh=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},fp=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const r=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),s=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const o=s,a=[o-e];a.push(...Array.from({length:e}).map((l,u)=>o+r+u)),t.slides.forEach((l,u)=>{a.includes(l.column)&&Dh(t,u)});return}const i=s+r-1;if(t.params.rewind||t.params.loop)for(let o=s-e;o<=i+e;o+=1){const a=(o%n+n)%n;(a<s||a>i)&&Dh(t,a)}else for(let o=Math.max(s-e,0);o<=Math.min(i+e,n-1);o+=1)o!==s&&(o>i||o<s)&&Dh(t,o)};function vL(t){const{slidesGrid:e,params:n}=t,r=t.rtlTranslate?t.translate:-t.translate;let s;for(let i=0;i<e.length;i+=1)typeof e[i+1]<"u"?r>=e[i]&&r<e[i+1]-(e[i+1]-e[i])/2?s=i:r>=e[i]&&r<e[i+1]&&(s=i+1):r>=e[i]&&(s=i);return n.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function _L(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:s,activeIndex:i,realIndex:o,snapIndex:a}=e;let l=t,u;const h=v=>{let x=v-e.virtual.slidesBefore;return x<0&&(x=e.virtual.slides.length+x),x>=e.virtual.slides.length&&(x-=e.virtual.slides.length),x};if(typeof l>"u"&&(l=vL(e)),r.indexOf(n)>=0)u=r.indexOf(n);else{const v=Math.min(s.slidesPerGroupSkip,l);u=v+Math.floor((l-v)/s.slidesPerGroup)}if(u>=r.length&&(u=r.length-1),l===i&&!e.params.loop){u!==a&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(l===i&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=h(l);return}const f=e.grid&&s.grid&&s.grid.rows>1;let m;if(e.virtual&&s.virtual.enabled&&s.loop)m=h(l);else if(f){const v=e.slides.find(S=>S.column===l);let x=parseInt(v.getAttribute("data-swiper-slide-index"),10);Number.isNaN(x)&&(x=Math.max(e.slides.indexOf(v),0)),m=Math.floor(x/s.grid.rows)}else if(e.slides[l]){const v=e.slides[l].getAttribute("data-swiper-slide-index");v?m=parseInt(v,10):m=l}else m=l;Object.assign(e,{previousSnapIndex:a,snapIndex:u,previousRealIndex:o,realIndex:m,previousIndex:i,activeIndex:l}),e.initialized&&fp(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==m&&e.emit("realIndexChange"),e.emit("slideChange"))}function wL(t,e){const n=this,r=n.params;let s=t.closest(`.${r.slideClass}, swiper-slide`);!s&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(a=>{!s&&a.matches&&a.matches(`.${r.slideClass}, swiper-slide`)&&(s=a)});let i=!1,o;if(s){for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===s){i=!0,o=a;break}}if(s&&i)n.clickedSlide=s,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}r.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var xL={updateSize:dL,updateSlides:hL,updateAutoHeight:fL,updateSlidesOffset:pL,updateSlidesProgress:mL,updateProgress:gL,updateSlidesClasses:yL,updateActiveIndex:_L,updateClickedSlide:wL};function EL(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:r,translate:s,wrapperEl:i}=e;if(n.virtualTranslate)return r?-s:s;if(n.cssMode)return s;let o=X4(i,t);return o+=e.cssOverflowAdjustment(),r&&(o=-o),o||0}function TL(t,e){const n=this,{rtlTranslate:r,params:s,wrapperEl:i,progress:o}=n;let a=0,l=0;const u=0;n.isHorizontal()?a=r?-t:t:l=t,s.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?a:l,s.cssMode?i[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-a:-l:s.virtualTranslate||(n.isHorizontal()?a-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),i.style.transform=`translate3d(${a}px, ${l}px, ${u}px)`);let h;const f=n.maxTranslate()-n.minTranslate();f===0?h=0:h=(t-n.minTranslate())/f,h!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function SL(){return-this.snapGrid[0]}function bL(){return-this.snapGrid[this.snapGrid.length-1]}function IL(t,e,n,r,s){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),r===void 0&&(r=!0);const i=this,{params:o,wrapperEl:a}=i;if(i.animating&&o.preventInteractionOnTransition)return!1;const l=i.minTranslate(),u=i.maxTranslate();let h;if(r&&t>l?h=l:r&&t<u?h=u:h=t,i.updateProgress(h),o.cssMode){const f=i.isHorizontal();if(e===0)a[f?"scrollLeft":"scrollTop"]=-h;else{if(!i.support.smoothScroll)return mS({swiper:i,targetPosition:-h,side:f?"left":"top"}),!0;a.scrollTo({[f?"left":"top"]:-h,behavior:"smooth"})}return!0}return e===0?(i.setTransition(0),i.setTranslate(h),n&&(i.emit("beforeTransitionStart",e,s),i.emit("transitionEnd"))):(i.setTransition(e),i.setTranslate(h),n&&(i.emit("beforeTransitionStart",e,s),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(m){!i||i.destroyed||m.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,n&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}var kL={getTranslate:EL,setTranslate:TL,minTranslate:SL,maxTranslate:bL,translateTo:IL};function PL(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function _S(t){let{swiper:e,runCallbacks:n,direction:r,step:s}=t;const{activeIndex:i,previousIndex:o}=e;let a=r;a||(i>o?a="next":i<o?a="prev":a="reset"),e.emit(`transition${s}`),n&&a==="reset"?e.emit(`slideResetTransition${s}`):n&&i!==o&&(e.emit(`slideChangeTransition${s}`),a==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`))}function CL(t,e){t===void 0&&(t=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),_S({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function AL(t,e){t===void 0&&(t=!0);const n=this,{params:r}=n;n.animating=!1,!r.cssMode&&(n.setTransition(0),_S({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var NL={setTransition:PL,transitionStart:CL,transitionEnd:AL};function RL(t,e,n,r,s){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const i=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:u,previousIndex:h,activeIndex:f,rtlTranslate:m,wrapperEl:v,enabled:x}=i;if(!x&&!r&&!s||i.destroyed||i.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=i.params.speed);const S=Math.min(i.params.slidesPerGroupSkip,o);let P=S+Math.floor((o-S)/i.params.slidesPerGroup);P>=l.length&&(P=l.length-1);const _=-l[P];if(a.normalizeSlideIndex)for(let T=0;T<u.length;T+=1){const E=-Math.floor(_*100),I=Math.floor(u[T]*100),k=Math.floor(u[T+1]*100);typeof u[T+1]<"u"?E>=I&&E<k-(k-I)/2?o=T:E>=I&&E<k&&(o=T+1):E>=I&&(o=T)}if(i.initialized&&o!==f&&(!i.allowSlideNext&&(m?_>i.translate&&_>i.minTranslate():_<i.translate&&_<i.minTranslate())||!i.allowSlidePrev&&_>i.translate&&_>i.maxTranslate()&&(f||0)!==o))return!1;o!==(h||0)&&n&&i.emit("beforeSlideChangeStart"),i.updateProgress(_);let y;o>f?y="next":o<f?y="prev":y="reset";const w=i.virtual&&i.params.virtual.enabled;if(!(w&&s)&&(m&&-_===i.translate||!m&&_===i.translate))return i.updateActiveIndex(o),a.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),a.effect!=="slide"&&i.setTranslate(_),y!=="reset"&&(i.transitionStart(n,y),i.transitionEnd(n,y)),!1;if(a.cssMode){const T=i.isHorizontal(),E=m?_:-_;if(e===0)w&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),w&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{v[T?"scrollLeft":"scrollTop"]=E})):v[T?"scrollLeft":"scrollTop"]=E,w&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1});else{if(!i.support.smoothScroll)return mS({swiper:i,targetPosition:E,side:T?"left":"top"}),!0;v.scrollTo({[T?"left":"top"]:E,behavior:"smooth"})}return!0}const j=vS().isSafari;return w&&!s&&j&&i.isElement&&i.virtual.update(!1,!1,o),i.setTransition(e),i.setTranslate(_),i.updateActiveIndex(o),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,r),i.transitionStart(n,y),e===0?i.transitionEnd(n,y):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(E){!i||i.destroyed||E.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(n,y))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0}function jL(t,e,n,r){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const i=s.grid&&s.params.grid&&s.params.grid.rows>1;let o=t;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let a;if(i){const m=o*s.params.grid.rows;a=s.slides.find(v=>v.getAttribute("data-swiper-slide-index")*1===m).column}else a=s.getSlideIndexByData(o);const l=i?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:u}=s.params;let h=s.params.slidesPerView;h==="auto"?h=s.slidesPerViewDynamic():(h=Math.ceil(parseFloat(s.params.slidesPerView,10)),u&&h%2===0&&(h=h+1));let f=l-a<h;if(u&&(f=f||a<Math.ceil(h/2)),r&&u&&s.params.slidesPerView!=="auto"&&!i&&(f=!1),f){const m=u?a<s.activeIndex?"prev":"next":a-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:m,slideTo:!0,activeSlideIndex:m==="next"?a+1:a-l+1,slideRealIndex:m==="next"?s.realIndex:void 0})}if(i){const m=o*s.params.grid.rows;o=s.slides.find(v=>v.getAttribute("data-swiper-slide-index")*1===m).column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,e,n,r)}),s}function OL(t,e,n){e===void 0&&(e=!0);const r=this,{enabled:s,params:i,animating:o}=r;if(!s||r.destroyed)return r;typeof t>"u"&&(t=r.params.speed);let a=i.slidesPerGroup;i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<i.slidesPerGroupSkip?1:a,u=r.virtual&&i.virtual.enabled;if(i.loop){if(o&&!u&&i.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,t,e,n)}),!0}return i.rewind&&r.isEnd?r.slideTo(0,t,e,n):r.slideTo(r.activeIndex+l,t,e,n)}function DL(t,e,n){e===void 0&&(e=!0);const r=this,{params:s,snapGrid:i,slidesGrid:o,rtlTranslate:a,enabled:l,animating:u}=r;if(!l||r.destroyed)return r;typeof t>"u"&&(t=r.params.speed);const h=r.virtual&&s.virtual.enabled;if(s.loop){if(u&&!h&&s.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const f=a?r.translate:-r.translate;function m(y){return y<0?-Math.floor(Math.abs(y)):Math.floor(y)}const v=m(f),x=i.map(y=>m(y)),S=s.freeMode&&s.freeMode.enabled;let P=i[x.indexOf(v)-1];if(typeof P>"u"&&(s.cssMode||S)){let y;i.forEach((w,N)=>{v>=w&&(y=N)}),typeof y<"u"&&(P=S?i[y]:i[y>0?y-1:y])}let _=0;if(typeof P<"u"&&(_=o.indexOf(P),_<0&&(_=r.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(_=_-r.slidesPerViewDynamic("previous",!0)+1,_=Math.max(_,0))),s.rewind&&r.isBeginning){const y=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(y,t,e,n)}else if(s.loop&&r.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(_,t,e,n)}),!0;return r.slideTo(_,t,e,n)}function LL(t,e,n){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof t>"u"&&(t=r.params.speed),r.slideTo(r.activeIndex,t,e,n)}function ML(t,e,n,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const s=this;if(s.destroyed)return;typeof t>"u"&&(t=s.params.speed);let i=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,i),a=o+Math.floor((i-o)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[a]){const u=s.snapGrid[a],h=s.snapGrid[a+1];l-u>(h-u)*r&&(i+=s.params.slidesPerGroup)}else{const u=s.snapGrid[a-1],h=s.snapGrid[a];l-u<=(h-u)*r&&(i-=s.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,s.slidesGrid.length-1),s.slideTo(i,t,e,n)}function VL(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,r=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let s=t.clickedIndex,i;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;i=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<t.loopedSlides-r/2||s>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),s=t.getSlideIndex(Kn(n,`${o}[data-swiper-slide-index="${i}"]`)[0]),dp(()=>{t.slideTo(s)})):t.slideTo(s):s>t.slides.length-r?(t.loopFix(),s=t.getSlideIndex(Kn(n,`${o}[data-swiper-slide-index="${i}"]`)[0]),dp(()=>{t.slideTo(s)})):t.slideTo(s)}else t.slideTo(s)}var FL={slideTo:RL,slideToLoop:jL,slideNext:OL,slidePrev:DL,slideReset:LL,slideToClosest:ML,slideToClickedSlide:VL};function UL(t,e){const n=this,{params:r,slidesEl:s}=n;if(!r.loop||n.virtual&&n.params.virtual.enabled)return;const i=()=>{Kn(s,`.${r.slideClass}, swiper-slide`).forEach((m,v)=>{m.setAttribute("data-swiper-slide-index",v)})},o=n.grid&&r.grid&&r.grid.rows>1,a=r.slidesPerGroup*(o?r.grid.rows:1),l=n.slides.length%a!==0,u=o&&n.slides.length%r.grid.rows!==0,h=f=>{for(let m=0;m<f;m+=1){const v=n.isElement?hp("swiper-slide",[r.slideBlankClass]):hp("div",[r.slideClass,r.slideBlankClass]);n.slidesEl.append(v)}};if(l){if(r.loopAddBlankSlides){const f=a-n.slides.length%a;h(f),n.recalcSlides(),n.updateSlides()}else Eu("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(u){if(r.loopAddBlankSlides){const f=r.grid.rows-n.slides.length%r.grid.rows;h(f),n.recalcSlides(),n.updateSlides()}else Eu("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();n.loopFix({slideRealIndex:t,direction:r.centeredSlides?void 0:"next",initial:e})}function $L(t){let{slideRealIndex:e,slideTo:n=!0,direction:r,setTranslate:s,activeSlideIndex:i,initial:o,byController:a,byMousewheel:l}=t===void 0?{}:t;const u=this;if(!u.params.loop)return;u.emit("beforeLoopFix");const{slides:h,allowSlidePrev:f,allowSlideNext:m,slidesEl:v,params:x}=u,{centeredSlides:S,initialSlide:P}=x;if(u.allowSlidePrev=!0,u.allowSlideNext=!0,u.virtual&&x.virtual.enabled){n&&(!x.centeredSlides&&u.snapIndex===0?u.slideTo(u.virtual.slides.length,0,!1,!0):x.centeredSlides&&u.snapIndex<x.slidesPerView?u.slideTo(u.virtual.slides.length+u.snapIndex,0,!1,!0):u.snapIndex===u.snapGrid.length-1&&u.slideTo(u.virtual.slidesBefore,0,!1,!0)),u.allowSlidePrev=f,u.allowSlideNext=m,u.emit("loopFix");return}let _=x.slidesPerView;_==="auto"?_=u.slidesPerViewDynamic():(_=Math.ceil(parseFloat(x.slidesPerView,10)),S&&_%2===0&&(_=_+1));const y=x.slidesPerGroupAuto?_:x.slidesPerGroup;let w=y;w%y!==0&&(w+=y-w%y),w+=x.loopAdditionalSlides,u.loopedSlides=w;const N=u.grid&&x.grid&&x.grid.rows>1;h.length<_+w||u.params.effect==="cards"&&h.length<_+w*2?Eu("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):N&&x.grid.fill==="row"&&Eu("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const O=[],j=[],T=N?Math.ceil(h.length/x.grid.rows):h.length,E=o&&T-P<_&&!S;let I=E?P:u.activeIndex;typeof i>"u"?i=u.getSlideIndex(h.find(J=>J.classList.contains(x.slideActiveClass))):I=i;const k=r==="next"||!r,A=r==="prev"||!r;let R=0,C=0;const Te=(N?h[i].column:i)+(S&&typeof s>"u"?-_/2+.5:0);if(Te<w){R=Math.max(w-Te,y);for(let J=0;J<w-Te;J+=1){const ne=J-Math.floor(J/T)*T;if(N){const V=T-ne-1;for(let z=h.length-1;z>=0;z-=1)h[z].column===V&&O.push(z)}else O.push(T-ne-1)}}else if(Te+_>T-w){C=Math.max(Te-(T-w*2),y),E&&(C=Math.max(C,_-T+P+1));for(let J=0;J<C;J+=1){const ne=J-Math.floor(J/T)*T;N?h.forEach((V,z)=>{V.column===ne&&j.push(z)}):j.push(ne)}}if(u.__preventObserver__=!0,requestAnimationFrame(()=>{u.__preventObserver__=!1}),u.params.effect==="cards"&&h.length<_+w*2&&(j.includes(i)&&j.splice(j.indexOf(i),1),O.includes(i)&&O.splice(O.indexOf(i),1)),A&&O.forEach(J=>{h[J].swiperLoopMoveDOM=!0,v.prepend(h[J]),h[J].swiperLoopMoveDOM=!1}),k&&j.forEach(J=>{h[J].swiperLoopMoveDOM=!0,v.append(h[J]),h[J].swiperLoopMoveDOM=!1}),u.recalcSlides(),x.slidesPerView==="auto"?u.updateSlides():N&&(O.length>0&&A||j.length>0&&k)&&u.slides.forEach((J,ne)=>{u.grid.updateSlide(ne,J,u.slides)}),x.watchSlidesProgress&&u.updateSlidesOffset(),n){if(O.length>0&&A){if(typeof e>"u"){const J=u.slidesGrid[I],V=u.slidesGrid[I+R]-J;l?u.setTranslate(u.translate-V):(u.slideTo(I+Math.ceil(R),0,!1,!0),s&&(u.touchEventsData.startTranslate=u.touchEventsData.startTranslate-V,u.touchEventsData.currentTranslate=u.touchEventsData.currentTranslate-V))}else if(s){const J=N?O.length/x.grid.rows:O.length;u.slideTo(u.activeIndex+J,0,!1,!0),u.touchEventsData.currentTranslate=u.translate}}else if(j.length>0&&k)if(typeof e>"u"){const J=u.slidesGrid[I],V=u.slidesGrid[I-C]-J;l?u.setTranslate(u.translate-V):(u.slideTo(I-C,0,!1,!0),s&&(u.touchEventsData.startTranslate=u.touchEventsData.startTranslate-V,u.touchEventsData.currentTranslate=u.touchEventsData.currentTranslate-V))}else{const J=N?j.length/x.grid.rows:j.length;u.slideTo(u.activeIndex-J,0,!1,!0)}}if(u.allowSlidePrev=f,u.allowSlideNext=m,u.controller&&u.controller.control&&!a){const J={slideRealIndex:e,direction:r,setTranslate:s,activeSlideIndex:i,byController:!0};Array.isArray(u.controller.control)?u.controller.control.forEach(ne=>{!ne.destroyed&&ne.params.loop&&ne.loopFix({...J,slideTo:ne.params.slidesPerView===x.slidesPerView?n:!1})}):u.controller.control instanceof u.constructor&&u.controller.control.params.loop&&u.controller.control.loopFix({...J,slideTo:u.controller.control.params.slidesPerView===x.slidesPerView?n:!1})}u.emit("loopFix")}function BL(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||!n||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const r=[];t.slides.forEach(s=>{const i=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;r[i]=s}),t.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),r.forEach(s=>{n.append(s)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var zL={loopCreate:UL,loopFix:$L,loopDestroy:BL};function HL(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function WL(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var qL={setGrabCursor:HL,unsetGrabCursor:WL};function GL(t,e){e===void 0&&(e=this);function n(r){if(!r||r===In()||r===St())return null;r.assignedSlot&&(r=r.assignedSlot);const s=r.closest(t);return!s&&!r.getRootNode?null:s||n(r.getRootNode().host)}return n(e)}function O_(t,e,n){const r=St(),{params:s}=t,i=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return i&&(n<=o||n>=r.innerWidth-o)?i==="prevent"?(e.preventDefault(),!0):!1:!0}function KL(t){const e=this,n=In();let r=t;r.originalEvent&&(r=r.originalEvent);const s=e.touchEventsData;if(r.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==r.pointerId)return;s.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(s.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){O_(e,r,r.targetTouches[0].pageX);return}const{params:i,touches:o,enabled:a}=e;if(!a||!i.simulateTouch&&r.pointerType==="mouse"||e.animating&&i.preventInteractionOnTransition)return;!e.animating&&i.cssMode&&i.loop&&e.loopFix();let l=r.target;if(i.touchEventsTarget==="wrapper"&&!tL(l,e.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||s.isTouched&&s.isMoved)return;const u=!!i.noSwipingClass&&i.noSwipingClass!=="",h=r.composedPath?r.composedPath():r.path;u&&r.target&&r.target.shadowRoot&&h&&(l=h[0]);const f=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,m=!!(r.target&&r.target.shadowRoot);if(i.noSwiping&&(m?GL(f,l):l.closest(f))){e.allowClick=!0;return}if(i.swipeHandler&&!l.closest(i.swipeHandler))return;o.currentX=r.pageX,o.currentY=r.pageY;const v=o.currentX,x=o.currentY;if(!O_(e,r,v))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=v,o.startY=x,s.touchStartTime=xu(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,i.threshold>0&&(s.allowThresholdMove=!1);let S=!0;l.matches(s.focusableElements)&&(S=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),n.activeElement&&n.activeElement.matches(s.focusableElements)&&n.activeElement!==l&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&n.activeElement.blur();const P=S&&e.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||P)&&!l.isContentEditable&&r.preventDefault(),i.freeMode&&i.freeMode.enabled&&e.freeMode&&e.animating&&!i.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function QL(t){const e=In(),n=this,r=n.touchEventsData,{params:s,touches:i,rtlTranslate:o,enabled:a}=n;if(!a||!s.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(r.touchId!==null||l.pointerId!==r.pointerId))return;let u;if(l.type==="touchmove"){if(u=[...l.changedTouches].find(j=>j.identifier===r.touchId),!u||u.identifier!==r.touchId)return}else u=l;if(!r.isTouched){r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l);return}const h=u.pageX,f=u.pageY;if(l.preventedByNestedSwiper){i.startX=h,i.startY=f;return}if(!n.allowTouchMove){l.target.matches(r.focusableElements)||(n.allowClick=!1),r.isTouched&&(Object.assign(i,{startX:h,startY:f,currentX:h,currentY:f}),r.touchStartTime=xu());return}if(s.touchReleaseOnEdges&&!s.loop)if(n.isVertical()){if(f<i.startY&&n.translate<=n.maxTranslate()||f>i.startY&&n.translate>=n.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else{if(o&&(h>i.startX&&-n.translate<=n.maxTranslate()||h<i.startX&&-n.translate>=n.minTranslate()))return;if(!o&&(h<i.startX&&n.translate<=n.maxTranslate()||h>i.startX&&n.translate>=n.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,n.allowClick=!1;return}r.allowTouchCallbacks&&n.emit("touchMove",l),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=h,i.currentY=f;const m=i.currentX-i.startX,v=i.currentY-i.startY;if(n.params.threshold&&Math.sqrt(m**2+v**2)<n.params.threshold)return;if(typeof r.isScrolling>"u"){let j;n.isHorizontal()&&i.currentY===i.startY||n.isVertical()&&i.currentX===i.startX?r.isScrolling=!1:m*m+v*v>=25&&(j=Math.atan2(Math.abs(v),Math.abs(m))*180/Math.PI,r.isScrolling=n.isHorizontal()?j>s.touchAngle:90-j>s.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(r.startMoving=!0),r.isScrolling||l.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;n.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let x=n.isHorizontal()?m:v,S=n.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;s.oneWayMovement&&(x=Math.abs(x)*(o?1:-1),S=Math.abs(S)*(o?1:-1)),i.diff=x,x*=s.touchRatio,o&&(x=-x,S=-S);const P=n.touchesDirection;n.swipeDirection=x>0?"prev":"next",n.touchesDirection=S>0?"prev":"next";const _=n.params.loop&&!s.cssMode,y=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!r.isMoved){if(_&&y&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const j=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(j)}r.allowMomentumBounce=!1,s.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let w;if(new Date().getTime(),s._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&P!==n.touchesDirection&&_&&y&&Math.abs(x)>=1){Object.assign(i,{startX:h,startY:f,currentX:h,currentY:f,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=x+r.startTranslate;let N=!0,O=s.resistanceRatio;if(s.touchReleaseOnEdges&&(O=0),x>0?(_&&y&&!w&&r.allowThresholdMove&&r.currentTranslate>(s.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(s.slidesPerView!=="auto"&&n.slides.length-s.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(N=!1,s.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+x)**O))):x<0&&(_&&y&&!w&&r.allowThresholdMove&&r.currentTranslate<(s.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(s.slidesPerView!=="auto"&&n.slides.length-s.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(s.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(N=!1,s.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-x)**O))),N&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(r.currentTranslate=r.startTranslate),s.threshold>0)if(Math.abs(x)>s.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,r.currentTranslate=r.startTranslate,i.diff=n.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{r.currentTranslate=r.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&n.freeMode||s.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function YL(t){const e=this,n=e.touchEventsData;let r=t;r.originalEvent&&(r=r.originalEvent);let s;if(r.type==="touchend"||r.type==="touchcancel"){if(s=[...r.changedTouches].find(O=>O.identifier===n.touchId),!s||s.identifier!==n.touchId)return}else{if(n.touchId!==null||r.pointerId!==n.pointerId)return;s=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:u,enabled:h}=e;if(!h||!o.simulateTouch&&r.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",r),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const f=xu(),m=f-n.touchStartTime;if(e.allowClick){const O=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(O&&O[0]||r.target,O),e.emit("tap click",r),m<300&&f-n.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(n.lastClickTime=xu(),dp(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||a.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let v;if(o.followFinger?v=l?e.translate:-e.translate:v=-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:v});return}const x=v>=-e.maxTranslate()&&!e.params.loop;let S=0,P=e.slidesSizesGrid[0];for(let O=0;O<u.length;O+=O<o.slidesPerGroupSkip?1:o.slidesPerGroup){const j=O<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof u[O+j]<"u"?(x||v>=u[O]&&v<u[O+j])&&(S=O,P=u[O+j]-u[O]):(x||v>=u[O])&&(S=O,P=u[u.length-1]-u[u.length-2])}let _=null,y=null;o.rewind&&(e.isBeginning?y=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(_=0));const w=(v-u[S])/P,N=S<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(m>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(w>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?_:S+N):e.slideTo(S)),e.swipeDirection==="prev"&&(w>1-o.longSwipesRatio?e.slideTo(S+N):y!==null&&w<0&&Math.abs(w)>o.longSwipesRatio?e.slideTo(y):e.slideTo(S))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(S+N):e.slideTo(S):(e.swipeDirection==="next"&&e.slideTo(_!==null?_:S+N),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:S))}}function D_(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:s,snapGrid:i}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!a?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=s,t.allowSlideNext=r,t.params.watchOverflow&&i!==t.snapGrid&&t.checkOverflow()}function JL(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function XL(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let s;const i=t.maxTranslate()-t.minTranslate();i===0?s=0:s=(t.translate-t.minTranslate())/i,s!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function ZL(t){const e=this;Sc(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function eM(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const wS=(t,e)=>{const n=In(),{params:r,el:s,wrapperEl:i,device:o}=t,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;!s||typeof s=="string"||(n[l]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:a}),s[l]("touchstart",t.onTouchStart,{passive:!1}),s[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("touchmove",t.onTouchMove,{passive:!1,capture:a}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:a}),n[l]("touchend",t.onTouchEnd,{passive:!0}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("touchcancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),n[l]("contextmenu",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&s[l]("click",t.onClick,!0),r.cssMode&&i[l]("scroll",t.onScroll),r.updateOnWindowResize?t[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",D_,!0):t[u]("observerUpdate",D_,!0),s[l]("load",t.onLoad,{capture:!0}))};function tM(){const t=this,{params:e}=t;t.onTouchStart=KL.bind(t),t.onTouchMove=QL.bind(t),t.onTouchEnd=YL.bind(t),t.onDocumentTouchStart=eM.bind(t),e.cssMode&&(t.onScroll=XL.bind(t)),t.onClick=JL.bind(t),t.onLoad=ZL.bind(t),wS(t,"on")}function nM(){wS(this,"off")}var rM={attachEvents:tM,detachEvents:nM};const L_=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function sM(){const t=this,{realIndex:e,initialized:n,params:r,el:s}=t,i=r.breakpoints;if(!i||i&&Object.keys(i).length===0)return;const o=In(),a=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",l=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?t.el:o.querySelector(r.breakpointsBase),u=t.getBreakpoint(i,a,l);if(!u||t.currentBreakpoint===u)return;const f=(u in i?i[u]:void 0)||t.originalParams,m=L_(t,r),v=L_(t,f),x=t.params.grabCursor,S=f.grabCursor,P=r.enabled;m&&!v?(s.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!m&&v&&(s.classList.add(`${r.containerModifierClass}grid`),(f.grid.fill&&f.grid.fill==="column"||!f.grid.fill&&r.grid.fill==="column")&&s.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),x&&!S?t.unsetGrabCursor():!x&&S&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(j=>{if(typeof f[j]>"u")return;const T=r[j]&&r[j].enabled,E=f[j]&&f[j].enabled;T&&!E&&t[j].disable(),!T&&E&&t[j].enable()});const _=f.direction&&f.direction!==r.direction,y=r.loop&&(f.slidesPerView!==r.slidesPerView||_),w=r.loop;_&&n&&t.changeDirection(),Mt(t.params,f);const N=t.params.enabled,O=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),P&&!N?t.disable():!P&&N&&t.enable(),t.currentBreakpoint=u,t.emit("_beforeBreakpoint",f),n&&(y?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!w&&O?(t.loopCreate(e),t.updateSlides()):w&&!O&&t.loopDestroy()),t.emit("breakpoint",f)}function iM(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let r=!1;const s=St(),i=e==="window"?s.innerHeight:n.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:i*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:u}=o[a];e==="window"?s.matchMedia(`(min-width: ${u}px)`).matches&&(r=l):u<=n.clientWidth&&(r=l)}return r||"max"}var oM={setBreakpoint:sM,getBreakpoint:iM};function aM(t,e){const n=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(s=>{r[s]&&n.push(e+s)}):typeof r=="string"&&n.push(e+r)}),n}function lM(){const t=this,{classNames:e,params:n,rtl:r,el:s,device:i}=t,o=aM(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:i.android},{ios:i.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...o),s.classList.add(...e),t.emitContainerClasses()}function cM(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var uM={addClasses:lM,removeClasses:cM};function dM(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:r}=n;if(r){const s=t.slides.length-1,i=t.slidesGrid[s]+t.slidesSizesGrid[s]+r*2;t.isLocked=t.size>i}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var hM={checkOverflow:dM},pp={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function fM(t,e){return function(r){r===void 0&&(r={});const s=Object.keys(r)[0],i=r[s];if(typeof i!="object"||i===null){Mt(e,r);return}if(t[s]===!0&&(t[s]={enabled:!0}),s==="navigation"&&t[s]&&t[s].enabled&&!t[s].prevEl&&!t[s].nextEl&&(t[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&t[s]&&t[s].enabled&&!t[s].el&&(t[s].auto=!0),!(s in t&&"enabled"in i)){Mt(e,r);return}typeof t[s]=="object"&&!("enabled"in t[s])&&(t[s].enabled=!0),t[s]||(t[s]={enabled:!1}),Mt(e,r)}}const Lh={eventsEmitter:uL,update:xL,translate:kL,transition:NL,slide:FL,loop:zL,grabCursor:qL,events:rM,breakpoints:oM,checkOverflow:hM,classes:uM},Mh={};let _g=class Vn{constructor(){let e,n;for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?n=s[0]:[e,n]=s,n||(n={}),n=Mt({},n),e&&!n.el&&(n.el=e);const o=In();if(n.el&&typeof n.el=="string"&&o.querySelectorAll(n.el).length>1){const h=[];return o.querySelectorAll(n.el).forEach(f=>{const m=Mt({},n,{el:f});h.push(new Vn(m))}),h}const a=this;a.__swiper__=!0,a.support=gS(),a.device=yS({userAgent:n.userAgent}),a.browser=vS(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],n.modules&&Array.isArray(n.modules)&&a.modules.push(...n.modules);const l={};a.modules.forEach(h=>{h({params:n,swiper:a,extendParams:fM(n,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const u=Mt({},pp,l);return a.params=Mt({},u,Mh,n),a.originalParams=Mt({},a.params),a.passedParams=Mt({},n),a.params&&a.params.on&&Object.keys(a.params.on).forEach(h=>{a.on(h,a.params.on[h])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:r}=this,s=Kn(n,`.${r.slideClass}, swiper-slide`),i=A_(s[0]);return A_(e)-i}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:n,params:r}=e;e.slides=Kn(n,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const r=this;e=Math.min(Math.max(e,0),1);const s=r.minTranslate(),o=(r.maxTranslate()-s)*e+s;r.translateTo(o,typeof n>"u"?0:n),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(r=>{const s=e.getSlideClasses(r);n.push({slideEl:r,classNames:s}),e.emit("_slideClass",r,s)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const r=this,{params:s,slides:i,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:u}=r;let h=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let f=i[u]?Math.ceil(i[u].swiperSlideSize):0,m;for(let v=u+1;v<i.length;v+=1)i[v]&&!m&&(f+=Math.ceil(i[v].swiperSlideSize),h+=1,f>l&&(m=!0));for(let v=u-1;v>=0;v-=1)i[v]&&!m&&(f+=i[v].swiperSlideSize,h+=1,f>l&&(m=!0))}else if(e==="current")for(let f=u+1;f<i.length;f+=1)(n?o[f]+a[f]-o[u]<l:o[f]-o[u]<l)&&(h+=1);else for(let f=u-1;f>=0;f-=1)o[u]-o[f]<l&&(h+=1);return h}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&Sc(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)s(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const o=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(o.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||s()}r.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const r=this,s=r.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${s}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(i=>{e==="vertical"?i.style.width="":i.style.height=""}),r.emit("changeDirection"),n&&r.update()),r}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let r=e||n.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=n,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const s=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(s()):Kn(r,s())[0];return!o&&n.params.createElements&&(o=hp("div",n.params.wrapperClass),r.append(o),Kn(r,`.${n.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(n,{el:r,wrapperEl:o,slidesEl:n.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:o,hostEl:n.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||br(r,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||br(r,"direction")==="rtl"),wrongRTL:br(o,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(void 0,!0),n.attachEvents();const s=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&s.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(i=>{i.complete?Sc(n,i):i.addEventListener("load",o=>{Sc(n,o.target)})}),fp(n),n.initialized=!0,fp(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const r=this,{params:s,el:i,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),s.loop&&r.loopDestroy(),n&&(r.removeClasses(),i&&typeof i!="string"&&i.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),Y4(r)),r.destroyed=!0),null}static extendDefaults(e){Mt(Mh,e)}static get extendedDefaults(){return Mh}static get defaults(){return pp}static installModule(e){Vn.prototype.__modules__||(Vn.prototype.__modules__=[]);const n=Vn.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Vn.installModule(n)),Vn):(Vn.installModule(e),Vn)}};Object.keys(Lh).forEach(t=>{Object.keys(Lh[t]).forEach(e=>{_g.prototype[e]=Lh[t][e]})});_g.use([lL,cL]);const xS=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Rs(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function Ii(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:Rs(e[r])&&Rs(t[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?t[r]=e[r]:Ii(t[r],e[r]):t[r]=e[r]})}function ES(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function TS(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function SS(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function bS(t){t===void 0&&(t="");const e=t.split(" ").map(r=>r.trim()).filter(r=>!!r),n=[];return e.forEach(r=>{n.indexOf(r)<0&&n.push(r)}),n.join(" ")}function pM(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function mM(t){let{swiper:e,slides:n,passedParams:r,changedParams:s,nextEl:i,prevEl:o,scrollbarEl:a,paginationEl:l}=t;const u=s.filter(I=>I!=="children"&&I!=="direction"&&I!=="wrapperClass"),{params:h,pagination:f,navigation:m,scrollbar:v,virtual:x,thumbs:S}=e;let P,_,y,w,N,O,j,T;s.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&h.thumbs&&(!h.thumbs.swiper||h.thumbs.swiper.destroyed)&&(P=!0),s.includes("controller")&&r.controller&&r.controller.control&&h.controller&&!h.controller.control&&(_=!0),s.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(h.pagination||h.pagination===!1)&&f&&!f.el&&(y=!0),s.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(h.scrollbar||h.scrollbar===!1)&&v&&!v.el&&(w=!0),s.includes("navigation")&&r.navigation&&(r.navigation.prevEl||o)&&(r.navigation.nextEl||i)&&(h.navigation||h.navigation===!1)&&m&&!m.prevEl&&!m.nextEl&&(N=!0);const E=I=>{e[I]&&(e[I].destroy(),I==="navigation"?(e.isElement&&(e[I].prevEl.remove(),e[I].nextEl.remove()),h[I].prevEl=void 0,h[I].nextEl=void 0,e[I].prevEl=void 0,e[I].nextEl=void 0):(e.isElement&&e[I].el.remove(),h[I].el=void 0,e[I].el=void 0))};s.includes("loop")&&e.isElement&&(h.loop&&!r.loop?O=!0:!h.loop&&r.loop?j=!0:T=!0),u.forEach(I=>{if(Rs(h[I])&&Rs(r[I]))Object.assign(h[I],r[I]),(I==="navigation"||I==="pagination"||I==="scrollbar")&&"enabled"in r[I]&&!r[I].enabled&&E(I);else{const k=r[I];(k===!0||k===!1)&&(I==="navigation"||I==="pagination"||I==="scrollbar")?k===!1&&E(I):h[I]=r[I]}}),u.includes("controller")&&!_&&e.controller&&e.controller.control&&h.controller&&h.controller.control&&(e.controller.control=h.controller.control),s.includes("children")&&n&&x&&h.virtual.enabled?(x.slides=n,x.update(!0)):s.includes("virtual")&&x&&h.virtual.enabled&&(n&&(x.slides=n),x.update(!0)),s.includes("children")&&n&&h.loop&&(T=!0),P&&S.init()&&S.update(!0),_&&(e.controller.control=h.controller.control),y&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(h.pagination.el=l),f.init(),f.render(),f.update()),w&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(h.scrollbar.el=a),v.init(),v.updateSize(),v.setTranslate()),N&&(e.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),R_(i,e.hostEl.constructor.nextButtonSvg),i.part.add("button-next"),e.el.appendChild(i)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),R_(o,e.hostEl.constructor.prevButtonSvg),o.part.add("button-prev"),e.el.appendChild(o))),i&&(h.navigation.nextEl=i),o&&(h.navigation.prevEl=o),m.init(),m.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),s.includes("direction")&&e.changeDirection(r.direction,!1),(O||T)&&e.loopDestroy(),(j||T)&&e.loopCreate(),e.update()}function gM(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const n={on:{}},r={},s={};Ii(n,pp),n._emitClasses=!0,n.init=!1;const i={},o=xS.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?Rs(t[l])?(n[l]={},s[l]={},Ii(n[l],t[l]),Ii(s[l],t[l])):(n[l]=t[l],s[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:i[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:s,rest:i,events:r}}function yM(t,e){let{el:n,nextEl:r,prevEl:s,paginationEl:i,scrollbarEl:o,swiper:a}=t;ES(e)&&r&&s&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=s,a.originalParams.navigation.prevEl=s),TS(e)&&i&&(a.params.pagination.el=i,a.originalParams.pagination.el=i),SS(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(n)}function vM(t,e,n,r,s){const i=[];if(!e)return i;const o=l=>{i.indexOf(l)<0&&i.push(l)};if(n&&r){const l=r.map(s),u=n.map(s);l.join("")!==u.join("")&&o("children"),r.length!==n.length&&o("children")}return xS.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(Rs(t[l])&&Rs(e[l])){const u=Object.keys(t[l]),h=Object.keys(e[l]);u.length!==h.length?o(l):(u.forEach(f=>{t[l][f]!==e[l][f]&&o(l)}),h.forEach(f=>{t[l][f]!==e[l][f]&&o(l)}))}else t[l]!==e[l]&&o(l)}),i}const _M=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.emit("_virtualUpdated"),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tu.apply(this,arguments)}function IS(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function kS(t){const e=[];return Ce.Children.toArray(t).forEach(n=>{IS(n)?e.push(n):n.props&&n.props.children&&kS(n.props.children).forEach(r=>e.push(r))}),e}function wM(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Ce.Children.toArray(t).forEach(r=>{if(IS(r))e.push(r);else if(r.props&&r.props.slot&&n[r.props.slot])n[r.props.slot].push(r);else if(r.props&&r.props.children){const s=kS(r.props.children);s.length>0?s.forEach(i=>e.push(i)):n["container-end"].push(r)}else n["container-end"].push(r)}),{slides:e,slots:n}}function xM(t,e,n){if(!n)return null;const r=h=>{let f=h;return h<0?f=e.length+h:f>=e.length&&(f=f-e.length),f},s=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:i,to:o}=n,a=t.params.loop?-e.length:0,l=t.params.loop?e.length*2:e.length,u=[];for(let h=a;h<l;h+=1)h>=i&&h<=o&&u.push(e[r(h)]);return u.map((h,f)=>Ce.cloneElement(h,{swiper:t,style:s,key:h.props.virtualIndex||h.key||`slide-${f}`}))}function na(t,e){return typeof window>"u"?L.useEffect(t,e):L.useLayoutEffect(t,e)}const M_=L.createContext(null),EM=L.createContext(null),PS=L.forwardRef(function(t,e){let{className:n,tag:r="div",wrapperTag:s="div",children:i,onSwiper:o,...a}=t===void 0?{}:t,l=!1;const[u,h]=L.useState("swiper"),[f,m]=L.useState(null),[v,x]=L.useState(!1),S=L.useRef(!1),P=L.useRef(null),_=L.useRef(null),y=L.useRef(null),w=L.useRef(null),N=L.useRef(null),O=L.useRef(null),j=L.useRef(null),T=L.useRef(null),{params:E,passedParams:I,rest:k,events:A}=gM(a),{slides:R,slots:C}=wM(i),pe=()=>{x(!v)};Object.assign(E.on,{_containerClasses(z,q){h(q)}});const Te=()=>{Object.assign(E.on,A),l=!0;const z={...E};if(delete z.wrapperClass,_.current=new _g(z),_.current.virtual&&_.current.params.virtual.enabled){_.current.virtual.slides=R;const q={cache:!1,slides:R,renderExternal:m,renderExternalUpdate:!1};Ii(_.current.params.virtual,q),Ii(_.current.originalParams.virtual,q)}};P.current||Te(),_.current&&_.current.on("_beforeBreakpoint",pe);const J=()=>{l||!A||!_.current||Object.keys(A).forEach(z=>{_.current.on(z,A[z])})},ne=()=>{!A||!_.current||Object.keys(A).forEach(z=>{_.current.off(z,A[z])})};L.useEffect(()=>()=>{_.current&&_.current.off("_beforeBreakpoint",pe)}),L.useEffect(()=>{!S.current&&_.current&&(_.current.emitSlidesClasses(),S.current=!0)}),na(()=>{if(e&&(e.current=P.current),!!P.current)return _.current.destroyed&&Te(),yM({el:P.current,nextEl:N.current,prevEl:O.current,paginationEl:j.current,scrollbarEl:T.current,swiper:_.current},E),o&&!_.current.destroyed&&o(_.current),()=>{_.current&&!_.current.destroyed&&_.current.destroy(!0,!1)}},[]),na(()=>{J();const z=vM(I,y.current,R,w.current,q=>q.key);return y.current=I,w.current=R,z.length&&_.current&&!_.current.destroyed&&mM({swiper:_.current,slides:R,passedParams:I,changedParams:z,nextEl:N.current,prevEl:O.current,scrollbarEl:T.current,paginationEl:j.current}),()=>{ne()}}),na(()=>{_M(_.current)},[f]);function V(){return E.virtual?xM(_.current,R,f):R.map((z,q)=>Ce.cloneElement(z,{swiper:_.current,swiperSlideIndex:q}))}return Ce.createElement(r,Tu({ref:P,className:bS(`${u}${n?` ${n}`:""}`)},k),Ce.createElement(EM.Provider,{value:_.current},C["container-start"],Ce.createElement(s,{className:pM(E.wrapperClass)},C["wrapper-start"],V(),C["wrapper-end"]),ES(E)&&Ce.createElement(Ce.Fragment,null,Ce.createElement("div",{ref:O,className:"swiper-button-prev"}),Ce.createElement("div",{ref:N,className:"swiper-button-next"})),SS(E)&&Ce.createElement("div",{ref:T,className:"swiper-scrollbar"}),TS(E)&&Ce.createElement("div",{ref:j,className:"swiper-pagination"}),C["container-end"]))});PS.displayName="Swiper";const CS=L.forwardRef(function(t,e){let{tag:n="div",children:r,className:s="",swiper:i,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:u,...h}=t===void 0?{}:t;const f=L.useRef(null),[m,v]=L.useState("swiper-slide"),[x,S]=L.useState(!1);function P(N,O,j){O===f.current&&v(j)}na(()=>{if(typeof u<"u"&&(f.current.swiperSlideIndex=u),e&&(e.current=f.current),!(!f.current||!i)){if(i.destroyed){m!=="swiper-slide"&&v("swiper-slide");return}return i.on("_slideClass",P),()=>{i&&i.off("_slideClass",P)}}}),na(()=>{i&&f.current&&!i.destroyed&&v(i.getSlideClasses(f.current))},[i]);const _={isActive:m.indexOf("swiper-slide-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0},y=()=>typeof r=="function"?r(_):r,w=()=>{S(!0)};return Ce.createElement(n,Tu({ref:f,className:bS(`${m}${s?` ${s}`:""}`),"data-swiper-slide-index":l,onLoad:w},h),o&&Ce.createElement(M_.Provider,{value:_},Ce.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},y(),a&&!x&&Ce.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Ce.createElement(M_.Provider,{value:_},y(),a&&!x&&Ce.createElement("div",{className:"swiper-lazy-preloader"})))});CS.displayName="SwiperSlide";function TM(t){let{swiper:e,extendParams:n,on:r,emit:s,params:i}=t;e.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=i&&i.autoplay?i.autoplay.delay:3e3,u=i&&i.autoplay?i.autoplay.delay:3e3,h,f=new Date().getTime(),m,v,x,S,P,_,y;function w(V){!e||e.destroyed||!e.wrapperEl||V.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",w),!(y||V.detail&&V.detail.bySwiperTouchMove)&&k())}const N=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?m=!0:m&&(u=h,m=!1);const V=e.autoplay.paused?h:f+u-new Date().getTime();e.autoplay.timeLeft=V,s("autoplayTimeLeft",V,V/l),a=requestAnimationFrame(()=>{N()})},O=()=>{let V;return e.virtual&&e.params.virtual.enabled?V=e.slides.find(q=>q.classList.contains("swiper-slide-active")):V=e.slides[e.activeIndex],V?parseInt(V.getAttribute("data-swiper-autoplay"),10):void 0},j=V=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),N();let z=typeof V>"u"?e.params.autoplay.delay:V;l=e.params.autoplay.delay,u=e.params.autoplay.delay;const q=O();!Number.isNaN(q)&&q>0&&typeof V>"u"&&(z=q,l=q,u=q),h=z;const he=e.params.speed,ue=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(he,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,he,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(he,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,he,!0,!0),s("autoplay")),e.params.cssMode&&(f=new Date().getTime(),requestAnimationFrame(()=>{j()})))};return z>0?(clearTimeout(o),o=setTimeout(()=>{ue()},z)):requestAnimationFrame(()=>{ue()}),z},T=()=>{f=new Date().getTime(),e.autoplay.running=!0,j(),s("autoplayStart")},E=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),s("autoplayStop")},I=(V,z)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),V||(_=!0);const q=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",w):k()};if(e.autoplay.paused=!0,z){P&&(h=e.params.autoplay.delay),P=!1,q();return}h=(h||e.params.autoplay.delay)-(new Date().getTime()-f),!(e.isEnd&&h<0&&!e.params.loop)&&(h<0&&(h=0),q())},k=()=>{e.isEnd&&h<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(f=new Date().getTime(),_?(_=!1,j(h)):j(),e.autoplay.paused=!1,s("autoplayResume"))},A=()=>{if(e.destroyed||!e.autoplay.running)return;const V=In();V.visibilityState==="hidden"&&(_=!0,I(!0)),V.visibilityState==="visible"&&k()},R=V=>{V.pointerType==="mouse"&&(_=!0,y=!0,!(e.animating||e.autoplay.paused)&&I(!0))},C=V=>{V.pointerType==="mouse"&&(y=!1,e.autoplay.paused&&k())},pe=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",R),e.el.addEventListener("pointerleave",C))},Te=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",R),e.el.removeEventListener("pointerleave",C))},J=()=>{In().addEventListener("visibilitychange",A)},ne=()=>{In().removeEventListener("visibilitychange",A)};r("init",()=>{e.params.autoplay.enabled&&(pe(),J(),T())}),r("destroy",()=>{Te(),ne(),e.autoplay.running&&E()}),r("_freeModeStaticRelease",()=>{(x||_)&&k()}),r("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?E():I(!0,!0)}),r("beforeTransitionStart",(V,z,q)=>{e.destroyed||!e.autoplay.running||(q||!e.params.autoplay.disableOnInteraction?I(!0,!0):E())}),r("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){E();return}v=!0,x=!1,_=!1,S=setTimeout(()=>{_=!0,x=!0,I(!0)},200)}}),r("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!v)){if(clearTimeout(S),clearTimeout(o),e.params.autoplay.disableOnInteraction){x=!1,v=!1;return}x&&e.params.cssMode&&k(),x=!1,v=!1}}),r("slideChange",()=>{e.destroyed||!e.autoplay.running||(P=!0)}),Object.assign(e.autoplay,{start:T,stop:E,pause:I,resume:k})}const SM=()=>d.jsx("div",{className:" p-2",children:d.jsx(PS,{spaceBetween:4,slidesPerView:1,autoplay:{delay:2500,disableOnInteraction:!1},modules:[TM],loop:!0,className:"w-ful",children:Va.map(t=>d.jsx(CS,{children:d.jsxs("div",{className:"w-full bg-white rounded-xl shadow border overflow-hidden",children:[d.jsx("img",{src:t.image,alt:t.name,className:"w-full h-32 object-cover"}),d.jsxs("div",{className:"p-2",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:t.name}),d.jsx("p",{className:"text-xs text-gray-600",children:t.description})]})]})},t.id))})}),bM=()=>d.jsx("div",{className:"min-h-screen bg-white p-4 animate-pulse",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsx("div",{className:"h-10 bg-gray-200 rounded w-full mb-6"}),d.jsxs("div",{className:"flex gap-6",children:[d.jsx("div",{className:"w-1/4 h-dvh space-y-4",children:Array.from({length:6}).map((t,e)=>d.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded"},e))}),d.jsxs("div",{className:"flex-1 space-y-6",children:[d.jsx("div",{className:"h-80 w-full bg-gray-200 rounded"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:8}).map((t,e)=>d.jsx("div",{className:"bg-gray-200 h-40 rounded-lg"},e))})]})]})]})}),IM="modulepreload",kM=function(t){return"/"+t},V_={},sl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=kM(l),l in V_)return;V_[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":IM,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,v)=>{f.addEventListener("load",m),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},PM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>to);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class wg extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class CM extends wg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class AM extends wg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class NM extends wg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mp||(mp={}));var RM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class jM{constructor(e,{headers:n={},customFetch:r,region:s=mp.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=PM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return RM(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(x=>{throw new CM(x)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new AM(h);if(!h.ok)throw new NM(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return m==="application/json"?v=yield h.json():m==="application/octet-stream"?v=yield h.blob():m==="text/event-stream"?v=h:m==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null}}catch(s){return{data:null,error:s}}})}}var Pt={},xg={},cd={},il={},ud={},dd={},OM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zi=OM();const DM=zi.fetch,AS=zi.fetch.bind(zi),NS=zi.Headers,LM=zi.Request,MM=zi.Response,to=Object.freeze(Object.defineProperty({__proto__:null,Headers:NS,Request:LM,Response:MM,default:AS,fetch:DM},Symbol.toStringTag,{value:"Module"})),VM=Vb(to);var hd={};Object.defineProperty(hd,"__esModule",{value:!0});let FM=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};hd.default=FM;var RS=Yt&&Yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dd,"__esModule",{value:!0});const UM=RS(VM),$M=RS(hd);let BM=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=UM.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,h=null,f=null,m=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const _=await i.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=_:h=JSON.parse(_))}const S=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),P=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");S&&P&&P.length>1&&(f=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const S=await i.text();try{u=JSON.parse(S),Array.isArray(u)&&i.status===404&&(h=[],u=null,m=200,v="OK")}catch{i.status===404&&S===""?(m=204,v="No Content"):u={message:S}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,m=200,v="OK"),u&&this.shouldThrowOnError)throw new $M.default(u)}return{error:u,data:h,count:f,status:m,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};dd.default=BM;var zM=Yt&&Yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ud,"__esModule",{value:!0});const HM=zM(dd);let WM=class extends HM.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ud.default=WM;var qM=Yt&&Yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(il,"__esModule",{value:!0});const GM=qM(ud);let KM=class extends GM.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};il.default=KM;var QM=Yt&&Yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cd,"__esModule",{value:!0});const Io=QM(il);let YM=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Io.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Io.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new Io.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Io.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Io.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};cd.default=YM;var fd={},pd={};Object.defineProperty(pd,"__esModule",{value:!0});pd.version=void 0;pd.version="0.0.0-automated";Object.defineProperty(fd,"__esModule",{value:!0});fd.DEFAULT_HEADERS=void 0;const JM=pd;fd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${JM.version}`};var jS=Yt&&Yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xg,"__esModule",{value:!0});const XM=jS(cd),ZM=jS(il),eV=fd;let tV=class OS{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},eV.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new XM.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new OS(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{a.searchParams.append(h,f)})):(o="POST",l=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new ZM.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};xg.default=tV;var no=Yt&&Yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.PostgrestError=Pt.PostgrestBuilder=Pt.PostgrestTransformBuilder=Pt.PostgrestFilterBuilder=Pt.PostgrestQueryBuilder=Pt.PostgrestClient=void 0;const DS=no(xg);Pt.PostgrestClient=DS.default;const LS=no(cd);Pt.PostgrestQueryBuilder=LS.default;const MS=no(il);Pt.PostgrestFilterBuilder=MS.default;const VS=no(ud);Pt.PostgrestTransformBuilder=VS.default;const FS=no(dd);Pt.PostgrestBuilder=FS.default;const US=no(hd);Pt.PostgrestError=US.default;var nV=Pt.default={PostgrestClient:DS.default,PostgrestQueryBuilder:LS.default,PostgrestFilterBuilder:MS.default,PostgrestTransformBuilder:VS.default,PostgrestBuilder:FS.default,PostgrestError:US.default};const{PostgrestClient:rV,PostgrestQueryBuilder:b6,PostgrestFilterBuilder:I6,PostgrestTransformBuilder:k6,PostgrestBuilder:P6,PostgrestError:C6}=nV;function sV(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const iV=sV(),oV="2.11.15",aV=`realtime-js/${oV}`,lV="1.0.0",$S=1e4,cV=1e3;var ra;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ra||(ra={}));var ct;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ct||(ct={}));var on;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(on||(on={}));var gp;(function(t){t.websocket="websocket"})(gp||(gp={}));var hs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(hs||(hs={}));class uV{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class BS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ye||(ye={}));const F_=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=dV(o,t,e,s),i),{})},dV=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?zS(i,o):yp(o)},zS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return mV(e,n)}switch(t){case ye.bool:return hV(e);case ye.float4:case ye.float8:case ye.int2:case ye.int4:case ye.int8:case ye.numeric:case ye.oid:return fV(e);case ye.json:case ye.jsonb:return pV(e);case ye.timestamp:return gV(e);case ye.abstime:case ye.date:case ye.daterange:case ye.int4range:case ye.int8range:case ye.money:case ye.reltime:case ye.text:case ye.time:case ye.timestamptz:case ye.timetz:case ye.tsrange:case ye.tstzrange:return yp(e);default:return yp(e)}},yp=t=>t,hV=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fV=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pV=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mV=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>zS(e,a))}return t},gV=t=>typeof t=="string"?t.replace(" ","T"):t,HS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Vh{constructor(e,n,r={},s=$S){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(U_||(U_={}));class sa{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sa.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=sa.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=sa.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,h)=>{o[u]||(l[u]=h)}),this.map(o,(u,h)=>{const f=i[u];if(f){const m=h.map(P=>P.presence_ref),v=f.map(P=>P.presence_ref),x=h.filter(P=>v.indexOf(P.presence_ref)<0),S=f.filter(P=>m.indexOf(P.presence_ref)<0);x.length>0&&(a[u]=x),S.length>0&&(l[u]=S)}else a[u]=h}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),h.length>0){const f=e[a].map(v=>v.presence_ref),m=h.filter(v=>f.indexOf(v.presence_ref)<0);e[a].unshift(...m)}r(a,h,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const h=l.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})($_||($_={}));var B_;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(B_||(B_={}));var $n;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})($n||($n={}));class Eg{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Vh(this,on.join,this.params,this.timeout),this.rejoinTimer=new BS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ct.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(on.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new sa(this),this.broadcastEndpointURL=HS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ct.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(h=>e==null?void 0:e($n.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e($n.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){e==null||e($n.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,v=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,x=[];for(let S=0;S<v;S++){const P=m[S],{filter:{event:_,schema:y,table:w,filter:N}}=P,O=h&&h[S];if(O&&O.event===_&&O.schema===y&&O.table===w&&O.filter===N)x.push(Object.assign(Object.assign({},P),{id:O.id}));else{this.unsubscribe(),this.state=ct.errored,e==null||e($n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e($n.SUBSCRIBED);return}}).receive("error",h=>{this.state=ct.errored,e==null||e($n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e($n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ct.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(on.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Vh(this,on.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Vh(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:h}=on;if(r&&[a,l,u,h].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var x,S,P;return((x=v.filter)===null||x===void 0?void 0:x.event)==="*"||((P=(S=v.filter)===null||S===void 0?void 0:S.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===o}).map(v=>v.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var x,S,P,_,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const N=v.id,O=(x=v.filter)===null||x===void 0?void 0:x.event;return N&&((S=n.ids)===null||S===void 0?void 0:S.includes(N))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const N=(y=(_=v==null?void 0:v.filter)===null||_===void 0?void 0:_.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return N==="*"||N===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:S,table:P,commit_timestamp:_,type:y,errors:w}=x;m=Object.assign(Object.assign({},{schema:S,table:P,commit_timestamp:_,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(x))}v.callback(m,r)})}_isClosed(){return this.state===ct.closed}_isJoined(){return this.state===ct.joined}_isJoining(){return this.state===ct.joining}_isLeaving(){return this.state===ct.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Eg.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(on.close,{},e)}_onError(e){this._on(on.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ct.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=F_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=F_(e.columns,e.old_record)),n}}const z_=()=>{},yV=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vV{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$S,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=z_,this.ref=0,this.logger=z_,this.conn=null,this.sendBuffer=[],this.serializer=new uV,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>sl(async()=>{const{default:l}=await Promise.resolve().then(()=>to);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${gp.websocket}`,this.httpEndpoint=HS(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new BS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=iV),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lV}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ra.connecting:return hs.Connecting;case ra.open:return hs.Open;case ra.closing:return hs.Closing;default:return hs.Closed}}isConnected(){return this.connectionState()===hs.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Eg(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:aV};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(on.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(cV,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(on.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([yV],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Tg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function He(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class _V extends Tg{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vp extends Tg{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var wV=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const WS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>to);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},xV=()=>wV(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sl(()=>Promise.resolve().then(()=>to),void 0)).Response:Response}),_p=t=>{if(Array.isArray(t))return t.map(n=>_p(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=_p(r)}),e};var $s=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Fh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),EV=(t,e,n)=>$s(void 0,void 0,void 0,function*(){const r=yield xV();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new _V(Fh(s),t.status||500))}).catch(s=>{e(new vp(Fh(s),s))}):e(new vp(Fh(t),t))}),TV=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function ol(t,e,n,r,s,i){return $s(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,TV(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>EV(l,a,r))})})}function Su(t,e,n,r){return $s(this,void 0,void 0,function*(){return ol(t,"GET",e,n,r)})}function pr(t,e,n,r,s){return $s(this,void 0,void 0,function*(){return ol(t,"POST",e,r,s,n)})}function SV(t,e,n,r,s){return $s(this,void 0,void 0,function*(){return ol(t,"PUT",e,r,s,n)})}function bV(t,e,n,r){return $s(this,void 0,void 0,function*(){return ol(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function qS(t,e,n,r,s){return $s(this,void 0,void 0,function*(){return ol(t,"DELETE",e,r,s,n)})}var bt=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const IV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},H_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kV{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=WS(s)}uploadOrUpdate(e,n,r,s){return bt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},H_),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(He(i))return{data:null,error:i};throw i}})}upload(e,n,r){return bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return bt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:H_.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(He(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return bt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield pr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Tg("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}update(e,n,r){return bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return bt(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}copy(e,n,r){return bt(this,void 0,void 0,function*(){try{return{data:{path:(yield pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return bt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield pr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return bt(this,void 0,void 0,function*(){try{const s=yield pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}download(e,n){return bt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Su(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(He(a))return{data:null,error:a};throw a}})}info(e){return bt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Su(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:_p(r),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}exists(e){return bt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield bV(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(He(r)&&r instanceof vp){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return bt(this,void 0,void 0,function*(){try{return{data:yield qS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}})}list(e,n,r){return bt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},IV),n),{prefix:e||""});return{data:yield pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const PV="2.7.1",CV={"X-Client-Info":`storage-js/${PV}`};var Gs=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class AV{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},CV),n),this.fetch=WS(r)}listBuckets(){return Gs(this,void 0,void 0,function*(){try{return{data:yield Su(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(He(e))return{data:null,error:e};throw e}})}getBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield Su(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Gs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Gs(this,void 0,void 0,function*(){try{return{data:yield SV(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield qS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}})}}class NV extends AV{constructor(e,n={},r){super(e,n,r)}from(e){return new kV(this.url,this.headers,e,this.fetch)}}const RV="2.50.2";let Mo="";typeof Deno<"u"?Mo="deno":typeof document<"u"?Mo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mo="react-native":Mo="node";const jV={"X-Client-Info":`supabase-js-${Mo}/${RV}`},OV={headers:jV},DV={schema:"public"},LV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},MV={};var VV=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const FV=t=>{let e;return t?e=t:typeof fetch>"u"?e=AS:e=fetch,(...n)=>e(...n)},UV=()=>typeof Headers>"u"?NS:Headers,$V=(t,e,n)=>{const r=FV(n),s=UV();return(i,o)=>VV(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var BV=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function zV(t){return t.endsWith("/")?t:t+"/"}function HV(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:h,global:f}=e,m={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>BV(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const GS="2.70.0",ni=30*1e3,wp=3,Uh=wp*ni,WV="http://localhost:9999",qV="supabase.auth.token",GV={"X-Client-Info":`gotrue-js/${GS}`},xp="X-Supabase-Api-Version",KS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},KV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QV=6e5;class Sg extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class YV extends Sg{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function JV(t){return ee(t)&&t.name==="AuthApiError"}class QS extends Sg{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class es extends Sg{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class dr extends es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function XV(t){return ee(t)&&t.name==="AuthSessionMissingError"}class Jl extends es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xl extends es{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Zl extends es{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ZV(t){return ee(t)&&t.name==="AuthImplicitGrantRedirectError"}class W_ extends es{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ep extends es{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function $h(t){return ee(t)&&t.name==="AuthRetryableFetchError"}class q_ extends es{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ia extends es{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),G_=` 	
\r=`.split(""),e3=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<G_.length;e+=1)t[G_[e].charCodeAt(0)]=-2;for(let e=0;e<bu.length;e+=1)t[bu[e].charCodeAt(0)]=e;return t})();function K_(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(bu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(bu[r]),e.queuedBits-=6}}function YS(t,e,n){const r=e3[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Q_(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{r3(o,r,n)};for(let o=0;o<t.length;o+=1)YS(t.charCodeAt(o),s,i);return e.join("")}function t3(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function n3(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}t3(r,e)}}function r3(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function s3(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)YS(t.charCodeAt(s),n,r);return new Uint8Array(e)}function i3(t){const e=[];return n3(t,n=>e.push(n)),new Uint8Array(e)}function o3(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>K_(s,n,r)),K_(null,n,r),e.join("")}function a3(t){return Math.round(Date.now()/1e3)+t}function l3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const nn=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},oa=()=>{if(!nn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function c3(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const JS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>to);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},u3=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",XS=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ec=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},tc=async(t,e)=>{await t.removeItem(e)};class md{constructor(){this.promise=new md.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}md.promiseConstructor=Promise;function Bh(t){const e=t.split(".");if(e.length!==3)throw new ia("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!KV.test(e[r]))throw new ia("JWT not in base64url format");return{header:JSON.parse(Q_(e[0])),payload:JSON.parse(Q_(e[1])),signature:s3(e[2]),raw:{header:e[0],payload:e[1]}}}async function d3(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function h3(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function f3(t){return("0"+t.toString(16)).substr(-2)}function p3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,f3).join("")}async function m3(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function g3(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await m3(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ks(t,e,n=!1){const r=p3();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await XS(t,`${e}-code-verifier`,s);const i=await g3(r);return[i,r===i?"plain":"s256"]}const y3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function v3(t){const e=t.headers.get(xp);if(!e||!e.match(y3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _3(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function w3(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const x3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qs(t){if(!x3.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var E3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const cs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),T3=[502,503,504];async function Y_(t){var e;if(!u3(t))throw new Ep(cs(t),0);if(T3.includes(t.status))throw new Ep(cs(t),t.status);let n;try{n=await t.json()}catch(i){throw new QS(cs(i),i)}let r;const s=v3(t);if(s&&s.getTime()>=KS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new q_(cs(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new dr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new q_(cs(n),t.status,n.weak_password.reasons);throw new YV(cs(n),t.status||500,r)}const S3=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function re(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[xp]||(i[xp]=KS["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await b3(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function b3(t,e,n,r,s,i){const o=S3(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Ep(cs(l),0)}if(a.ok||await Y_(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Y_(l)}}function Fn(t){var e;let n=null;C3(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=a3(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function J_(t){const e=Fn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function wr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function I3(t){return{data:t,error:null}}function k3(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=E3(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function P3(t){return t}function C3(t){return t.access_token&&t.refresh_token&&t.expires_in}const zh=["global","local","others"];var A3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class N3{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=JS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=zh[0]){if(zh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zh.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:wr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=A3(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:k3,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ee(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},h=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:P3});if(h.error)throw h.error;const f=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(x=>{const S=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(x.split(";")[1].split("=")[1]);u[`${P}Page`]=S}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ee(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Qs(e);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Qs(e);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:wr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Qs(e);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:wr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Qs(e.userId);try{const{data:n,error:r}=await re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Qs(e.userId),Qs(e.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}}const R3={getItem:t=>oa()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{oa()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{oa()&&globalThis.localStorage.removeItem(t)}};function X_(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function j3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ys={debug:!!(globalThis&&oa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ZS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class O3 extends ZS{}async function D3(t,e,n){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new O3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ys.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}j3();const L3={url:WV,storageKey:qV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:GV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Z_(t,e,n){return await n()}class Fa{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fa.nextInstanceID,Fa.nextInstanceID+=1,this.instanceID>0&&nn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},L3),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new N3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=JS(s.fetch),this.lock=s.lock||Z_,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:nn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=D3:this.lock=Z_,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:oa()?this.storage=R3:(this.memoryStorage={},this.storage=X_(this.memoryStorage)):(this.memoryStorage={},this.storage=X_(this.memoryStorage)),nn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${GS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=c3(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),nn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ZV(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ee(n)?{error:n}:{error:new QS("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Fn}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:h,password:f,options:m}=e;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Ks(this.storage,this.storageKey)),i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:v,code_challenge_method:x},xform:Fn})}else if("phone"in e){const{phone:h,password:f,options:m}=e;i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Fn})}else throw new Xl("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:J_})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:J_})}else throw new Xl("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Jl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,l,u,h,f,m,v;let x,S;if("message"in e)x=e.message,S=e.signature;else{const{chain:P,wallet:_,statement:y,options:w}=e;let N;if(nn())if(typeof _=="object")N=_;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))N=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=_}const O=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const j=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),y?{statement:y}:null));let T;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")T=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)T=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)x=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),S=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${O.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(h=w==null?void 0:w.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const j=await N.signMessage(new TextEncoder().encode(x),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=j}}try{const{data:P,error:_}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:o3(S)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Fn});if(_)throw _;return!P||!P.session||!P.user?{data:{user:null,session:null},error:new Jl}:(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),{data:Object.assign({},P),error:_})}catch(P){if(ee(P))return{data:{user:null,session:null},error:P};throw P}}async _exchangeCodeForSession(e){const n=await ec(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Fn});if(await tc(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Jl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ee(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Fn}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Jl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Ks(this.storage,this.storageKey));const{error:f}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:h}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Xl("You must provide either an email or phone number.")}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Fn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ks(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:I3})}catch(i){if(ee(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new dr;const{error:s}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ee(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await re(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await re(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Xl("You must provide either an email or phone number and a type")}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ec(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Uh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wr}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dr}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:wr})})}catch(n){if(ee(n))return XV(n)&&(await this._removeSession(),await tc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new dr;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ks(this.storage,this.storageKey));const{data:u,error:h}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:wr});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dr;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Bh(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ee(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new dr;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!nn())throw new Zl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new W_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new W_("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new Zl("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(a);let m=h+f;l&&(m=parseInt(l));const v=m-h;v*1e3<=ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const x=m-f;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,h);const{data:S,error:P}=await this._getUser(i);if(P)throw P;const _={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(r){if(ee(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ec(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(JV(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await tc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=l3(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ks(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ee(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,h;const{data:f,error:m}=i;if(m)throw m;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return nn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ee(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await h3(async s=>(s>0&&await d3(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&$h(i)&&Date.now()+o-r<ni})}catch(r){if(this._debug(n,"error",r),ee(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),nn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ec(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Uh;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Uh}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),$h(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new dr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new md;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new dr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ee(i)){const o={session:null,error:i};return $h(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await XS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await tc(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ni);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ni}ms, refresh threshold is ${wp} ticks`),s<=wp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ZS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ks(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await re(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ee(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ee(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Bh(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+QV>Date.now()))return r;const{data:s,error:i}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new ia("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new ia("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:v,error:x}=await this.getSession();if(x||!v.session)return{data:null,error:x};r=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Bh(r);if(_3(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const u=w3(s.alg),h=await this.fetchJwk(s.kid,n),f=await crypto.subtle.importKey("jwk",h,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,i3(`${a}.${l}`)))throw new ia("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}}Fa.nextInstanceID=0;const M3=Fa;class V3 extends M3{constructor(e){super(e)}}var F3=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class U3{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=zV(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:DV,realtime:MV,auth:Object.assign(Object.assign({},LV),{storageKey:u}),global:OV},f=HV(r??{},h);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=$V(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new rV(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new jM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new NV(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return F3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new V3({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new vV(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $3=(t,e,n)=>new U3(t,e,n),B3="https://lfzaegzajuiekngixhul.supabase.co",z3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxmemFlZ3phanVpZWtuZ2l4aHVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEwNTcxMDYsImV4cCI6MjA2NjYzMzEwNn0.kstm_yOi3PYuLdLWuwd5t38do5ZWDBOq8_pxGlOC0HE",Js=$3(B3,z3),eb=()=>{const[t,e]=L.useState([]),{logout:n}=pn(),[r,s]=L.useState({id:"",name:"",price:"",category:"",unit:"",in_stock:!0,description:"",images:[]}),i=async()=>{const{data:f,error:m}=await Js.from("products").select("*");m?console.error(m):e(f||[])};L.useEffect(()=>{i()},[]);const o=f=>{const{name:m,value:v}=f.target;s(x=>({...x,[m]:v}))},a=f=>{const m=Array.from(f.target.files||[]);if(m.length>3){alert("You can upload up to 3 PNG images.");return}for(let v of m){if(v.size>1024*2048){alert(`${v.name} is too large. Max size is 1mb.`);return}if(v.type!=="image/png"){alert(`${v.name} is not a PNG file.`);return}}s(v=>({...v,images:m}))},l=async(f,m)=>{const v=[];for(let x of f){const S=`products/${m}/${Date.now()}-${x.name}`,{error:P}=await Js.storage.from("product-images").upload(S,x);if(P)throw new Error(P.message);const{data:_}=Js.storage.from("product-images").getPublicUrl(S);v.push(_.publicUrl)}return v},u=async()=>{const f=r.id||crypto.randomUUID();let m=[];try{r.images.length>0&&(m=await l(r.images,f),console.log(m))}catch(S){alert("Image upload failed: "+S.message);return}const v={id:r.id||f,name:r.name,price:Number(r.price),category:r.category,unit:r.unit,in_stock:r.in_stock==="true"||r.in_stock===!0,image:m,description:r.description},{error:x}=r.id?await Js.from("products").update(v).eq("id",r.id):await Js.from("products").insert(v);if(x){alert("Failed to save: "+x.message);return}s({id:"",name:"",price:"",category:"",unit:"",in_stock:!0,description:"",images:[]}),i()},h=async f=>{if(!window.confirm("Delete this product?"))return;const{error:m}=await Js.from("products").delete().eq("id",f);m?alert("Delete failed: "+m.message):i()};return d.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:" Admin Dashboard"}),d.jsx("button",{onClick:()=>n(),children:"Logout"}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Add / Edit Product"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx("input",{name:"name",value:r.name,onChange:o,placeholder:"Name",className:"border p-2"}),d.jsx("input",{name:"price",value:r.price,onChange:o,placeholder:"Price",className:"border p-2"}),d.jsx("input",{name:"category",value:r.category,onChange:o,placeholder:"Category",className:"border p-2"}),d.jsx("input",{name:"unit",value:r.unit,onChange:o,placeholder:"Unit",className:"border p-2"}),d.jsx("input",{name:"in_stock",value:r.in_stock.toString(),onChange:o,placeholder:"true/false",className:"border p-2"}),d.jsx("textarea",{name:"description",value:r.description,onChange:o,placeholder:"Description",className:"border p-2 col-span-2"}),d.jsx("input",{type:"file",multiple:!0,accept:"image/png",onChange:a,placeholder:"images",className:"border p-2 col-span-2"})]}),d.jsx("button",{onClick:u,className:"mt-4 bg-emerald-600 text-white py-2 px-4 rounded",children:"Save Product"})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[d.jsx("h3",{className:"font-semibold mb-4",children:"All Products"}),d.jsxs("table",{className:"w-full text-sm border",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-gray-100",children:[d.jsx("th",{className:"p-2",children:"Name"}),d.jsx("th",{className:"p-2",children:"Price"}),d.jsx("th",{className:"p-2",children:"Stock"}),d.jsx("th",{className:"p-2",children:"Action"})]})}),d.jsx("tbody",{children:t.map(f=>d.jsxs("tr",{className:"border-t",children:[d.jsx("td",{className:"p-2",children:f.name}),d.jsxs("td",{className:"p-2",children:["",f.price]}),d.jsx("td",{className:"p-2",children:f.in_stock?"":""}),d.jsxs("td",{className:"p-2 space-x-2",children:[d.jsx("button",{onClick:()=>s({...f,images:[]}),className:"text-blue-600",children:"Edit"}),d.jsx("button",{onClick:()=>h(f.id),className:"text-red-600",children:"Delete"})]})]},f.id))})]})]})]})};function gd(t,e){const[n,r]=L.useState(()=>{try{const i=window.localStorage.getItem(t);return i?JSON.parse(i):e}catch(i){return console.error(`Error reading localStorage key "${t}":`,i),e}});return[n,i=>{try{r(i),window.localStorage.setItem(t,JSON.stringify(i))}catch(o){console.error(`Error setting localStorage key "${t}":`,o)}}]}const H3=({isOpen:t,locationName:e,onClose:n})=>t?d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center px-4",children:d.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 relative animate-fadeIn",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-5xl mb-4",children:""}),d.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Oops! Not in Service Area"}),d.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Unfortunately, we do not currently deliver to your location ",e,". We're expanding soon!"]})]})})}):null;function bg(){const t=Ke(),n=Ki().pathname.slice(1),r=["home","shop","fashion","beauty"].includes(n)?n:"home",s=[{id:"home",label:"Home",icon:P1,activeColor:"text-emerald-600",inactiveColor:"text-gray-500"},{id:"shop",label:"Grocery",icon:uC,activeColor:"text-emerald-600",inactiveColor:"text-gray-500"},{id:"fashion",label:"Fashion",icon:gC,activeColor:"text-pink-600",inactiveColor:"text-gray-500"},{id:"beauty",label:"Beauty",icon:N1,activeColor:"text-purple-600",inactiveColor:"text-gray-500"}],[i,o]=L.useState(!0),[a,l]=L.useState(0);return L.useEffect(()=>{const u=()=>{const h=window.scrollY;h>a+10?o(!1):h<a-10&&o(!0),l(h)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[a]),d.jsx("div",{className:`fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 transition-all duration-700 ease-in-out transform ${i?"translate-y-0 opacity-100":"translate-y-full opacity-0 pointer-events-none"}`,children:d.jsx("div",{className:"max-w-md mx-auto h-16",children:d.jsx("div",{className:"flex items-center justify-around",children:s.map(u=>{const h=u.icon,f=r===u.id;return d.jsxs("button",{onClick:()=>t(`/${u.id}`),className:`flex flex-col items-center justify-center min-w-16 transition-all duration-200 ${f?"transform scale-105":"hover:scale-105"}`,children:[d.jsx("div",{className:`p-2 rounded-xl ${f?"bg-gradient-to-br from-emerald-50 to-emerald-100 shadow-sm":"hover:bg-gray-50"}`,children:d.jsx(h,{className:`w-5 h-5 ${f?u.activeColor:u.inactiveColor}`})}),d.jsx("span",{className:`text-xs font-medium mt-1 ${f?u.activeColor:u.inactiveColor}`,children:u.label}),f&&d.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full mt-1 animate-pulse"})]},u.id)})})})})}let ew=()=>{};const xt=gg(t=>({cart:[],addToCart:e=>t(n=>{const r=n.cart.find(i=>i.product.id===e.id);let s;return r?s=n.cart.map(i=>i.product.id===e.id?{...i,quantity:i.quantity+1}:i):s=[...n.cart,{product:e,quantity:1}],ew(` ${e.name} added`),{cart:s}}),updateQuantity:(e,n)=>t(r=>({cart:n<=0?r.cart.filter(s=>s.product.id!==e):r.cart.map(s=>s.product.id===e?{...s,quantity:n}:s)})),clearCart:()=>t({cart:[]}),setToastHandler:e=>{ew=e}}));function tb(t,e,n,r,s,i,o){const a=t.map(h=>` ${h.product.name}  ${h.quantity} = ${h.product.price*h.quantity}`).join(`
`),l=s==="upi"&&(i!=null&&i.upiId)?` *Paid via UPI:* ${i.upiId}`:"",u=new Date().toLocaleString("en-IN");return`
 *Order from ${e.name}*
 *Order ID:* ${o}

 *Items:*
   ${a}
 *Total:* ${n}

*Delivery Address:*  
    ${r.name}  
    ${r.address}, ${r.pincode}  
    Phone: ${r.phone}

 *Payment Method:* ${s==="upi"?"UPI":"Cash on Delivery"}
   ${l?`
`+l:""}
 *Order Time:* ${u}

`.trim()}function nb(t,e){const n=t.replace(/\D/g,""),r=encodeURIComponent(e),i=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)?`whatsapp://send?phone=${n}&text=${r}`:`https://web.whatsapp.com/send?phone=${n}&text=${r}`;window.open(i,"_blank")}function yd(t,e){const{cart:n,clearCart:r}=xt(),s=Ke(),{selectedAddress:i,paymentMethod:o,paymentDetails:a,resetOrderFlow:l}=rl(),u=()=>{if(!i||!o){alert("Please complete address and payment first.");return}if(n.length===0)return;const f=n.reduce((v,x)=>v+x.product.price*x.quantity,0);console.log(t,"store");const m=tb(n,t,f,i,o,a);nb(t.whatsappNumber,m),r(),l(),e&&e()};return{handleOrder:u,handleProceedToOrder:()=>{i?o?u():s("/payment"):s("/delivery-address")}}}const W3={name:"Village Store",ownerName:"Store Owner",phone:"+9198989898",address:"Khukhundoo Store",whatsappNumber:"+917617028576"};function q3(){const{user:t,isAdmin:e,isAuthenticated:n,login:r,logout:s,loading:i}=pn(),o=Ke(),[a,l]=L.useState(null),[u,h]=gd("village-fresh-store",W3),[f,m]=L.useState(!1),[v,x]=L.useState(!1),[S,P]=L.useState(!1),[_,y]=L.useState(!1),{matchedVillage:w,geoLoading:N,allVillages:O,locationName:j,setMatchedVillage:T}=hS(),E=!N&&w===null,{cart:I,addToCart:k,updateQuantity:A,clearCart:R}=xt(),{handleOrder:C}=yd(u,()=>m(!1)),pe=L.useMemo(()=>a?Va.filter(ne=>ne.category===a):Va,[a]),Te=ne=>{r(ne),y(!1)},J=()=>{s(),P(!1)};return i?d.jsx(bM,{}):e?d.jsx(eb,{}):n?d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(mg,{theme:"grocery",cart:I,store:u,user:t,onCartClick:()=>m(!0),onStoreSettingsClick:()=>o("/store-settings"),onUserClick:()=>P(!0)}),d.jsxs("main",{className:"flex max-w-7xl mx-auto w-full",children:[d.jsx("aside",{className:"w-1/5 border-r border-gray-100 bg-white",children:d.jsx(M4,{selectedCategory:a,onCategorySelect:l})}),d.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-gray-50",children:[d.jsx("div",{className:"pt-4",children:d.jsx(SM,{})}),d.jsxs("section",{className:"px-2 py-1 overflow-y-auto",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a?`${a} Products`:"All Products"}),d.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[pe.length," items available"]}),d.jsx(V4,{products:pe,cart:I,onAddToCart:k,onUpdateQuantity:A}),d.jsx(H3,{isOpen:E,onClose:()=>console.log("User acknowledged restriction"),locationName:j,village:O,onSelectVillage:ne=>{T(ne),localStorage.setItem("manual-village-id",ne.id.toString())}})]})]}),d.jsx(bg,{navigate:o})]}),d.jsx(ld,{isOpen:f,onClose:()=>m(!1),cart:I,store:u,onUpdateQuantity:A,onOrderViaWhatsApp:C}),d.jsx(z4,{isOpen:v,onClose:()=>x(!1),store:u,onSaveStore:h}),d.jsx(yg,{user:t,onLogout:J,onClose:()=>P(!1),isOpen:S}),d.jsx("div",{className:"h-20"})," "]}):_?d.jsx(dS,{onBack:()=>y(!1),onLogin:Te}):d.jsx(j1,{onGetStarted:()=>y(!0),onLogin:()=>y(!0)})}function Mn({children:t}){const{isAuthenticated:e,loading:n}=pn();return n?null:e?t:d.jsx(I1,{to:"/auth"})}const G3=({children:t})=>{const{isAuthenticated:e,isAdmin:n,loading:r}=pn();return r?null:e&&n?t:d.jsx(I1,{to:"/"})},rb=({product:t,cartItem:e,variant:n,onAddToCart:r,onUpdateQuantity:s})=>{const i=(e==null?void 0:e.quantity)||0,o=Ki(),a=Ke(),u=`/${o.pathname.split("/")[1]}/product/${t.id}`;return d.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[d.jsxs("div",{className:"relative aspect-[3/4]",children:[d.jsx("img",{onClick:()=>a(u),src:t.image,alt:t.name,className:"w-full h-full object-cover"}),t.originalPrice&&d.jsxs("div",{className:"absolute top-2 left-2 bg-pink-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:[Math.round((t.originalPrice-t.price)/t.originalPrice*100),"% OFF"]}),d.jsx("div",{className:"absolute bottom-0 right-2",children:i===0?d.jsx("button",{onClick:()=>r(t),className:"bg-emerald-500 hover:bg-emerald-600 text-white p-2 rounded-lg transition-colors",children:d.jsx(Ur,{className:"w-4 h-4"})}):d.jsxs("div",{className:"flex items-center space-x-2 bg-emerald-500 rounded-lg",children:[d.jsx("button",{onClick:()=>s(t.id,i-1),className:"text-white p-2 hover:bg-emerald-600 rounded-l-lg",children:d.jsx(zu,{className:"w-4 h-4"})}),d.jsx("span",{className:"text-white font-medium px-2",children:i}),d.jsx("button",{onClick:()=>s(t.id,i+1),className:"text-white p-2 hover:bg-emerald-600 rounded-r-lg",children:d.jsx(Ur,{className:"w-4 h-4"})})]})})]}),d.jsxs("div",{className:"p-3",children:[d.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t.brand}),d.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:t.name}),n==="beauty"&&t.type&&d.jsx("p",{className:"text-xs text-pink-500 mb-2",children:t.type}),d.jsxs("div",{className:"flex items-center space-x-1 text-sm mb-2",children:[d.jsx(us,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsxs("span",{className:"text-gray-600",children:[t.rating," (",t.reviews,")"]})]}),d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("span",{className:"font-bold text-gray-900",children:["",t.price]}),t.originalPrice&&d.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["",t.originalPrice]})]})})]})]})},K3=t=>d.jsx(rb,{...t,variant:"beauty"}),Q3={name:"Village Store",ownerName:"Store Owner",phone:"+9198989898",address:"Khukhundoo Store",whatsappNumber:"+917617028576"},Y3=()=>{var _;const[t,e]=L.useState("all"),n=Ke(),{logout:r}=pn(),s=xt(y=>y.cart),i=xt(y=>y.addToCart),o=xt(y=>y.updateQuantity),[a,l]=gd("village-fresh-store",Q3),[u,h]=L.useState(!1),{user:f}=pn(),{handleOrder:m}=yd(a,()=>x(!1)),[v,x]=L.useState(!1),S=t==="all"?_u:_u.filter(y=>y.category===t),P=()=>{r(),h(!1)};return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx(mg,{theme:"beauty",cart:s,store:void 0,user:f,onCartClick:()=>x(!0),onUserClick:()=>h(!0)}),d.jsx("section",{className:"px-4 py-4 bg-gray-50",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ga,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",placeholder:"Search beauty products...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-white"})]})})}),d.jsx("section",{className:"px-4 py-6 bg-gradient-to-r from-purple-500 to-pink-600",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Beauty Sale "}),d.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"Up to 60% off on skincare & makeup"}),d.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-600 mb-3",children:[d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(oC,{className:"w-3 h-3 text-purple-600"}),d.jsx("span",{children:"Premium Brands"})]}),d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(N1,{className:"w-3 h-3 text-purple-600"}),d.jsx("span",{children:"Authentic Products"})]})]}),d.jsx("button",{className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Shop Now"})]}),d.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-3xl",children:""})})]})})})}),d.jsx("section",{className:"px-4 py-6",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Shop by Category"}),d.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:S_.map(y=>d.jsxs("button",{onClick:()=>e(y.id),className:`flex-shrink-0 flex flex-col items-center p-3 rounded-xl border-2 transition-all ${t===y.id?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-200"}`,children:[d.jsx("div",{className:"text-2xl mb-1",children:y.icon}),d.jsx("span",{className:"text-xs font-medium text-gray-700",children:y.name})]},y.id))})]})}),d.jsx("section",{className:"px-4 py-6 bg-gray-50",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Featured Brands"}),d.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-2",children:["Lakme","Himalaya","L'Oreal","Maybelline","Nivea","Fogg"].map((y,w)=>d.jsxs("div",{className:"flex-shrink-0 bg-white rounded-xl p-4 border border-gray-200 min-w-20 text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:d.jsx("span",{className:"text-purple-600 font-bold text-sm",children:y.charAt(0)})}),d.jsx("span",{className:"text-xs font-medium text-gray-700",children:y})]},w))})]})}),d.jsx("section",{className:"px-4 py-6",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900",children:t==="all"?"All Products":`${(_=S_.find(y=>y.id===t))==null?void 0:_.name} Products`}),d.jsxs("span",{className:"text-sm text-gray-600",children:[S.length," items"]})]}),d.jsx("div",{className:"grid grid-cols-2 gap-4",children:S.map(y=>d.jsx(K3,{product:y,cartItem:s.find(w=>w.product.id===y.id),onAddToCart:i,onUpdateQuantity:o},y.id))})]})}),d.jsx(bg,{navigate:n}),d.jsx(ld,{isOpen:v,onClose:()=>x(!1),cart:s,store:a,onUpdateQuantity:o,onOrderViaWhatsApp:m}),d.jsx(yg,{user:f,onLogout:P,onClose:()=>h(!1),isOpen:u}),d.jsx("div",{className:"h-20"})]})},J3=t=>d.jsx(rb,{...t,variant:"fashion"}),X3={name:"Village Store",ownerName:"Store Owner",phone:"+9198989898",address:"Khukhundoo Store",whatsappNumber:"+917617028576"},Z3=({onUserClick:t})=>{var y;const{user:e,logout:n}=pn(),r=Ke(),s=xt(w=>w.cart),i=xt(w=>w.addToCart),o=xt(w=>w.updateQuantity),[a,l]=gd("village-fresh-store",X3),{handleOrder:u}=yd(a,()=>S(!1)),[h,f]=L.useState(!1),[m,v]=L.useState("all"),[x,S]=L.useState(!1),P=m==="all"?wu:wu.filter(w=>w.category===m),_=()=>{n(),f(!1)};return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx(mg,{theme:"fashion",cart:s,store:a,user:e,onCartClick:()=>S(!0),onStoreSettingsClick:()=>r("/store-settings"),onUserClick:()=>f(!0)}),d.jsx("section",{className:"px-4 py-4 bg-gray-50",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ga,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",placeholder:"Search for fashion items...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 bg-white"})]})})}),d.jsx("section",{className:"px-4 py-6 bg-gradient-to-r from-pink-500 to-purple-600",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Fashion Sale "}),d.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"Up to 70% off on trending styles"}),d.jsx("button",{className:"bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Shop Now"})]}),d.jsx("div",{className:"w-20 h-20 bg-pink-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-3xl",children:""})})]})})})}),d.jsx("section",{className:"px-4 py-6",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Shop by Category"}),d.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:b_.map(w=>d.jsxs("button",{onClick:()=>v(w.id),className:`flex-shrink-0 flex flex-col items-center p-3 rounded-xl border-2 transition-all ${m===w.id?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-pink-200"}`,children:[d.jsx("div",{className:"text-2xl mb-1",children:w.icon}),d.jsx("span",{className:"text-xs font-medium text-gray-700",children:w.name})]},w.id))})]})}),d.jsx("section",{className:"px-4 py-6",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900",children:m==="all"?"All Products":`${(y=b_.find(w=>w.id===m))==null?void 0:y.name} Collection`}),d.jsxs("span",{className:"text-sm text-gray-600",children:[P.length," items"]})]}),d.jsx("div",{className:"grid grid-cols-2 gap-4",children:P.map(w=>d.jsx(J3,{product:w,cartItem:s.find(N=>N.product.id===w.id),onAddToCart:i,onUpdateQuantity:o},w.id))})]})}),d.jsx(bg,{navigate:r}),d.jsx(ld,{isOpen:x,onClose:()=>S(!1),cart:s,store:a,onUpdateQuantity:o,onOrderViaWhatsApp:u}),d.jsx(yg,{user:e,onLogout:_,onClose:()=>f(!1),isOpen:h}),d.jsx("div",{className:"h-20"})]})};function e6(){const t=Ke(),{user:e}=pn(),n=({item:r,onClick:s})=>d.jsxs("button",{onClick:s,className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition-all transform hover:scale-105 w-full",children:[d.jsx("div",{className:"aspect-square relative",children:d.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"})}),d.jsx("div",{className:"p-2",children:d.jsx("h4",{className:"font-medium text-gray-900 text-xs leading-tight text-center",children:r.name})})]});return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b",children:d.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-white font-bold text-sm",children:""})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"VillageFresh"}),d.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[d.jsx(_m,{className:"w-3 h-3"}),d.jsx("span",{children:"Delivery in 20 minutes"})]})]})]}),d.jsx("div",{className:"flex items-center space-x-3",children:d.jsx("button",{className:"relative p-2 text-gray-600 hover:text-emerald-600 transition-colors",children:e!=null&&e.photoURL?d.jsx("img",{src:e.photoURL,alt:e.displayNamename,className:"w-6 h-6 rounded-full object-cover"}):d.jsx(R1,{className:"w-6 h-6"})})})]})})}),d.jsx("section",{className:"px-4 py-4 bg-gray-50",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ga,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{onClick:()=>t("/search"),type:"text",placeholder:"Search for products...",className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white"})]})})}),d.jsx("section",{className:"px-4 py-6 bg-gradient-to-r from-emerald-500 to-emerald-600",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[d.jsxs("div",{className:"text-center mb-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to VillageFresh! "}),d.jsx("p",{className:"text-gray-600",children:"Fresh products delivered to your doorstep in 20 minutes"})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[d.jsxs("button",{onClick:()=>t("/shop"),className:"flex flex-col items-center p-3 rounded-xl border border-gray-100 hover:border-emerald-200 hover:shadow-sm transition-all bg-white transform hover:scale-105",children:[d.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-2xl flex items-center justify-center mb-2",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Grocery"})]}),d.jsxs("button",{onClick:()=>t("/shop"),className:"flex flex-col items-center p-3 rounded-xl border border-gray-100 hover:border-emerald-200 hover:shadow-sm transition-all bg-white transform hover:scale-105",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-2xl flex items-center justify-center mb-2",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Vegetables"})]}),d.jsxs("button",{onClick:()=>t("/fashion"),className:"flex flex-col items-center p-3 rounded-xl border border-gray-100 hover:border-emerald-200 hover:shadow-sm transition-all bg-white transform hover:scale-105",children:[d.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-2xl flex items-center justify-center mb-2",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Fashion"})]}),d.jsxs("button",{onClick:()=>t("/beauty"),className:"flex flex-col items-center p-3 rounded-xl border border-gray-100 hover:border-emerald-200 hover:shadow-sm transition-all bg-white transform hover:scale-105",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center mb-2",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Beauty"})]})]})]})})}),d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("section",{className:"px-4 py-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Fresh Grocery"})]}),d.jsx("button",{onClick:()=>t("/shop"),className:"text-emerald-600 font-medium text-sm hover:text-emerald-700 transition-colors",children:"View All"})]}),d.jsx("div",{className:"grid grid-cols-4 gap-3",children:H4.map(r=>d.jsx(n,{item:r,onClick:()=>t(r.category)},r.id))})]}),d.jsxs("section",{className:"px-4 py-6 bg-gray-50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Fresh Vegetables"})]}),d.jsx("button",{onClick:()=>t("/shop"),className:"text-emerald-600 font-medium text-sm hover:text-emerald-700 transition-colors",children:"View All"})]}),d.jsx("div",{className:"grid grid-cols-4 gap-3",children:W4.map(r=>d.jsx(n,{item:r,onClick:()=>t(r.category)},r.id))})]}),d.jsxs("section",{className:"px-4 py-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Fashion"})]}),d.jsx("button",{onClick:()=>t("/fashion"),className:"text-pink-600 font-medium text-sm hover:text-pink-700 transition-colors",children:"View All"})]}),d.jsx("div",{className:"grid grid-cols-4 gap-3",children:q4.map(r=>d.jsx(n,{item:r,onClick:()=>t(r.category)},r.id))})]}),d.jsxs("section",{className:"px-4 py-6 bg-gray-50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Beauty"})]}),d.jsx("button",{onClick:()=>t("/beauty"),className:"text-purple-600 font-medium text-sm hover:text-purple-700 transition-colors",children:"View All"})]}),d.jsx("div",{className:"grid grid-cols-4 gap-3",children:G4.map(r=>d.jsx(n,{item:r,onClick:()=>t(r.category)},r.id))})]}),d.jsx("section",{className:"px-4 py-6",children:d.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-emerald-100 rounded-2xl p-6 text-center",children:[d.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:["Welcome back, ",e==null?void 0:e.name,"! "]}),d.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Explore our fresh collection of products across all categories"}),d.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-600",children:[d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx("span",{className:"text-emerald-600",children:""}),d.jsx("span",{children:"20 min delivery"})]}),d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx("span",{className:"text-emerald-600",children:""}),d.jsx("span",{children:"100% Fresh"})]}),d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx("span",{className:"text-emerald-600",children:""}),d.jsx("span",{children:"Free delivery"})]})]})]})}),d.jsx("div",{className:"h-20"})]})]})}function t6({product:t,cart:e,onBack:n,onAddToCart:r,onUpdateQuantity:s,onCartClick:i,isCartOpen:o,handleOrder:a,store:l}){const[u,h]=L.useState(0),[f,m]=L.useState(!1),v=e.find(O=>O.product.id===t.id),x=(v==null?void 0:v.quantity)||0,S=e.reduce((O,j)=>O+j.quantity,0),P=[t.image,t.image,t.image],_=()=>{x===0?r(t):s(t.id,x+1)},y=()=>{x>0&&s(t.id,x-1)},w=[{label:"Energy",value:"52 kcal"},{label:"Protein",value:"0.9g"},{label:"Carbs",value:"12g"},{label:"Fat",value:"0.2g"},{label:"Fiber",value:"2.6g"},{label:"Sugar",value:"9g"}],N=[{icon:d.jsx(Ia,{className:"w-4 h-4"}),text:"8 min delivery"},{icon:d.jsx(Uf,{className:"w-4 h-4"}),text:"100% Fresh"},{icon:d.jsx(Yc,{className:"w-4 h-4"}),text:"Free delivery"}];return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b",children:d.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:text-gray-900 transition-colors",children:d.jsx(Oi,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:t.name})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>m(!f),className:`p-2 transition-colors ${f?"text-red-500":"text-gray-600 hover:text-red-500"}`,children:d.jsx(dC,{className:`w-5 h-5 ${f?"fill-current":""}`})}),d.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 transition-colors",children:d.jsx(mC,{className:"w-5 h-5"})}),d.jsxs("button",{onClick:i,className:"relative p-2 text-gray-600 hover:text-emerald-600 transition-colors",children:[d.jsx(A1,{className:"w-5 h-5"}),S>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-emerald-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:S})]})]})]})})}),d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("section",{className:"relative",children:[d.jsxs("div",{className:"aspect-square bg-gray-50",children:[d.jsx("img",{src:P[u],alt:t.name,className:"w-full h-full object-cover"}),t.originalPrice&&d.jsxs("div",{className:"absolute top-4 left-4 bg-emerald-500 text-white text-sm px-3 py-1 rounded-full font-medium",children:[Math.round((t.originalPrice-t.price)/t.originalPrice*100),"% OFF"]})]}),d.jsx("div",{className:"flex space-x-2 p-4 overflow-x-auto",children:P.map((O,j)=>d.jsx("button",{onClick:()=>h(j),className:`flex-shrink-0 w-16 h-16 rounded-lg border-2 overflow-hidden ${u===j?"border-emerald-500":"border-gray-200"}`,children:d.jsx("img",{src:O,alt:`${t.name} ${j+1}`,className:"w-full h-full object-cover"})},j))})]}),d.jsxs("section",{className:"px-4 py-6 border-b border-gray-100",children:[d.jsx("div",{className:"flex items-start justify-between mb-4",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:t.name}),d.jsx("p",{className:"text-gray-600 text-sm mb-3",children:t.unit}),d.jsx("div",{className:"flex items-center space-x-3 mb-4",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",t.price]}),t.originalPrice&&d.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["",t.originalPrice]})]})}),d.jsx("div",{className:"flex items-center space-x-4 mb-4",children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(us,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-sm font-medium text-gray-900",children:"4.3"}),d.jsx("span",{className:"text-sm text-gray-600",children:"(127 reviews)"})]})}),d.jsx("div",{className:"flex items-center space-x-4",children:N.map((O,j)=>d.jsxs("div",{className:"flex items-center space-x-1 text-emerald-600",children:[O.icon,d.jsx("span",{className:"text-xs font-medium",children:O.text})]},j))})]})}),d.jsx("div",{className:"flex items-center justify-between",children:x===0?d.jsxs("button",{onClick:_,className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white py-3 px-6 rounded-xl font-semibold flex items-center justify-center space-x-2 transition-colors",children:[d.jsx(Ur,{className:"w-5 h-5"}),d.jsx("span",{children:"Add to Cart"})]}):d.jsxs("div",{className:"flex items-center justify-between w-full",children:[d.jsxs("div",{className:"flex items-center space-x-3 bg-emerald-500 rounded-xl",children:[d.jsx("button",{onClick:y,className:"text-white p-3 hover:bg-emerald-600 rounded-l-xl transition-colors",children:d.jsx(zu,{className:"w-5 h-5"})}),d.jsx("span",{className:"text-white font-bold px-4 min-w-12 text-center text-lg",children:x}),d.jsx("button",{onClick:_,className:"text-white p-3 hover:bg-emerald-600 rounded-r-xl transition-colors",children:d.jsx(Ur,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),d.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",t.price*x]})]})]})})]}),d.jsxs("section",{className:"px-4 py-6 border-b border-gray-100",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"About this product"}),d.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description||`Fresh ${t.name.toLowerCase()} sourced directly from local farms. 
            Carefully selected for quality and freshness. Rich in nutrients and perfect for your daily needs. 
            Stored in optimal conditions to maintain freshness until delivery.`})]}),d.jsxs("section",{className:"px-4 py-6 border-b border-gray-100",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Nutrition Information"}),d.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Per 100g serving"}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map((O,j)=>d.jsxs("div",{className:"flex justify-between items-center py-1",children:[d.jsx("span",{className:"text-sm text-gray-700",children:O.label}),d.jsx("span",{className:"text-sm font-medium text-gray-900",children:O.value})]},j))})]})]}),d.jsxs("section",{className:"px-4 py-6 border-b border-gray-100",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Storage Instructions"}),d.jsx("div",{className:"bg-blue-50 rounded-xl p-4",children:d.jsx("p",{className:"text-sm text-blue-800",children:"Store in a cool, dry place. For best freshness, consume within 3-5 days of delivery. Keep refrigerated if needed."})})]}),d.jsxs("section",{className:"px-4 py-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delivery Information"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-emerald-50 rounded-lg",children:[d.jsx(Ia,{className:"w-5 h-5 text-emerald-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-emerald-800",children:"Express Delivery"}),d.jsx("p",{className:"text-sm text-emerald-600",children:"Delivered in 20 minutes"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[d.jsx(Uf,{className:"w-5 h-5 text-blue-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-blue-800",children:"Quality Guarantee"}),d.jsx("p",{className:"text-sm text-blue-600",children:"100% fresh or money back"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 rounded-lg",children:[d.jsx(Yc,{className:"w-5 h-5 text-orange-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-orange-800",children:"Free Delivery"}),d.jsx("p",{className:"text-sm text-orange-600",children:"On orders above 199"})]})]})]})]}),d.jsx(ld,{isOpen:o,onClose:()=>setIsCartOpen(!1),cart:e,store:l,onUpdateQuantity:s,onOrderViaWhatsApp:a}),d.jsx("div",{className:"h-20"})]})]})}const n6={name:"Village Store",ownerName:"Store Owner",phone:"+9198989898",address:"Khukhundoo Store",whatsappNumber:"+917617028576"};function nc(){const{id:t}=FP(),e=Ke(),[n,r]=gd("village-fresh-store",n6),s=xt(m=>m.cart),i=xt(m=>m.addToCart),o=xt(m=>m.updateQuantity),{handleOrder:a}=yd(n,()=>u(!1)),[l,u]=L.useState(!1),h=[...Va,..._u,...wu];console.log(h);const f=h.find(m=>m.id===t);return f?d.jsx(t6,{product:f,cart:s,onBack:()=>e(-1),onAddToCart:i,onUpdateQuantity:o,onCartClick:()=>u(!0),handleOrder:a,isCartOpen:l,store:n}):d.jsx("div",{className:"p-6 text-red-500",children:"Product not found"})}function r6({user:t,onBack:e,onProductClick:n,cart:r,onAddToCart:s,onUpdateQuantity:i}){Ke();const o=Ki(),a=new URLSearchParams(o.search).get("q"),[l,u]=L.useState(a||""),[h,f]=L.useState([]),[m,v]=L.useState(!!a);L.useEffect(()=>{const T=localStorage.getItem("village-fresh-recent-searches");T&&f(JSON.parse(T))},[]),L.useEffect(()=>{a&&x(a)},[a]);const x=T=>{if(T.trim()&&!h.includes(T.trim())){const E=[T.trim(),...h.slice(0,4)];f(E),localStorage.setItem("village-fresh-recent-searches",JSON.stringify(E))}},S=L.useMemo(()=>{if(!l.trim())return[];const T=l.toLowerCase().trim();return P_.filter(E=>{var I;return E.name.toLowerCase().includes(T)||E.category.toLowerCase().includes(T)||((I=E.description)==null?void 0:I.toLowerCase().includes(T))})},[l,P_]),P=T=>r.find(E=>E.product.id===T),_=T=>{u(T),v(!0),T.trim()&&x(T)},y=()=>{u(""),v(!1)},w=()=>{f([]),localStorage.removeItem("village-fresh-recent-searches")},N=T=>{const E=h.filter(I=>I!==T);f(E),localStorage.setItem("village-fresh-recent-searches",JSON.stringify(E))},O=[{name:"Vegetables",icon:"",query:"vegetables"},{name:"Fruits",icon:"",query:"fruits"},{name:"Dairy",icon:"",query:"dairy"},{name:"Grains",icon:"",query:"grains"},{name:"Fashion",icon:"",query:"fashion"},{name:"Beauty",icon:"",query:"beauty"}],j=["Tomatoes","Rice","Milk","Apples","Kurta","Lipstick"];return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b",children:d.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:e,className:"p-2 text-gray-600 hover:text-gray-900",children:d.jsx(Oi,{className:"w-5 h-5"})}),d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(Ga,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",value:l,onChange:T=>_(T.target.value),placeholder:"Search for products...",className:"w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-gray-50",autoFocus:!0}),l&&d.jsx("button",{onClick:y,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:d.jsx(Jc,{className:"w-5 h-5"})})]})]})})}),d.jsxs("div",{className:"max-w-md mx-auto",children:[m&&l?d.jsxs("section",{className:"px-4 py-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Search Results"}),d.jsxs("span",{className:"text-sm text-gray-600",children:[S.length," results"]})]}),S.length>0?d.jsx("div",{className:"grid grid-cols-2 gap-4",children:S.map(T=>d.jsx(fS,{product:T,cartItem:P(T.id),onAddToCart:s,onUpdateQuantity:i,onProductClick:n},T.id))}):d.jsx("div",{className:"text-center py-12 text-gray-600",children:"No results found."})]}):d.jsxs(d.Fragment,{children:[h.length>0&&d.jsxs("section",{className:"px-4 py-6 border-b",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[d.jsx(Ia,{className:"w-5 h-5"})," Recent"]}),d.jsx("button",{onClick:w,className:"text-sm text-emerald-600",children:"Clear All"})]}),d.jsx("div",{className:"space-y-2",children:h.map((T,E)=>d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("button",{onClick:()=>_(T),className:"text-left flex-1 px-2 py-1 hover:bg-gray-100 rounded",children:T}),d.jsx("button",{onClick:()=>N(T),className:"text-gray-400",children:d.jsx(Jc,{className:"w-4 h-4"})})]},E))})]}),d.jsxs("section",{className:"px-4 py-6 border-b",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Browse Categories"}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:O.map((T,E)=>d.jsxs("button",{onClick:()=>_(T.query),className:"flex flex-col items-center border p-4 rounded-xl bg-white hover:shadow",children:[d.jsx("div",{className:"text-2xl mb-1",children:T.icon}),d.jsx("span",{className:"text-sm font-medium",children:T.name})]},E))})]}),d.jsxs("section",{className:"px-4 py-6",children:[d.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[d.jsx(xC,{className:"w-5 h-5"})," Popular Searches"]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:j.map((T,E)=>d.jsx("button",{onClick:()=>_(T),className:"px-4 py-2 bg-gray-100 hover:bg-emerald-100 rounded-full text-sm",children:T},E))})]})]}),d.jsx("div",{className:"h-20"})]})]})}function s6(){const{user:t}=pn(),e=Ke(),{setAddress:n}=rl();console.log(t==null?void 0:t.name,"displaname");const[r,s]=L.useState([{id:"1",type:"home",name:t==null?void 0:t.name,phone:(t==null?void 0:t.phone)||"+91 7617028576",address:"Majhawalia, Majhawalia",landmark:"Near Hanuman Mandir",pincode:"274501",isDefault:!0}]),[i,o]=L.useState(!1),[a,l]=L.useState(null),[u,h]=L.useState({type:"home",name:(t==null?void 0:t.name)||"",phone:(t==null?void 0:t.phone)||"",address:"",landmark:"",pincode:""}),f=()=>{window.history.back()},m=()=>{h({type:"home",name:(t==null?void 0:t.name)||"",phone:(t==null?void 0:t.phone)||"",address:"",landmark:"",pincode:""})},v=()=>{if(a)s(r.map(y=>y.id===a.id?{...y,...u}:y));else{const y={id:Date.now().toString(),...u,isDefault:r.length===0};s([...r,y])}o(!1),l(null),m()},x=y=>{l(y),h({type:y.type,name:y==null?void 0:y.name,phone:y.phone,address:y.address,landmark:y.landmark||"",pincode:y.pincode}),o(!0)},S=y=>{s(r.filter(w=>w.id!==y))},P=y=>{s(r.map(w=>({...w,isDefault:w.id===y})))},_=y=>{switch(y){case"home":return"";case"work":return"";default:return""}};return i?d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b",children:d.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:()=>{o(!1),l(null),m()},className:"p-2 text-gray-600 hover:text-gray-900",children:d.jsx(Oi,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:a?"Edit Address":"Add New Address"})]})})}),d.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Type"}),d.jsx("div",{className:"flex space-x-3",children:["home","work","other"].map(y=>d.jsx("button",{onClick:()=>h({...u,type:y}),className:`flex-1 py-3 px-4 rounded-lg border-2 ${u.type===y?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200"}`,children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-xl",children:_(y)}),d.jsx("span",{className:"text-sm capitalize",children:y})]})},y))})]}),d.jsx("input",{type:"text",placeholder:"Full Name",className:"w-full px-4 py-3 border rounded-lg",value:u.name,onChange:y=>h({...u,name:y.target.value})}),d.jsx("input",{type:"tel",placeholder:"Phone Number",className:"w-full px-4 py-3 border rounded-lg",value:u.phone,onChange:y=>h({...u,phone:y.target.value})}),d.jsx("textarea",{placeholder:"Complete Address",className:"w-full px-4 py-3 border rounded-lg",rows:3,value:u.address,onChange:y=>h({...u,address:y.target.value})}),d.jsx("input",{type:"text",placeholder:"Landmark (Optional)",className:"w-full px-4 py-3 border rounded-lg",value:u.landmark,onChange:y=>h({...u,landmark:y.target.value})}),d.jsx("input",{type:"text",placeholder:"Pincode",className:"w-full px-4 py-3 border rounded-lg",maxLength:6,value:u.pincode,onChange:y=>h({...u,pincode:y.target.value})}),d.jsx("button",{onClick:v,disabled:!u.name||!u.phone||!u.address||!u.pincode,className:"w-full bg-emerald-500 text-white py-3 px-4 rounded-lg mt-4",children:a?"Update Address":"Save Address"})]})]}):d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b",children:d.jsxs("div",{className:"max-w-md mx-auto px-4 py-3 flex items-center space-x-3",children:[d.jsx("button",{onClick:f,className:"p-2 text-gray-600 hover:text-gray-900",children:d.jsx(Oi,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Delivery Address"})]})}),d.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[d.jsxs("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-emerald-300 rounded-xl text-emerald-600 hover:border-emerald-400 hover:bg-emerald-50 mb-6",children:[d.jsx(Ur,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Add New Address"})]}),d.jsx("div",{className:"space-y-4",children:r.map(y=>d.jsxs("div",{className:`bg-white border-2 rounded-xl p-4 ${y.isDefault?"border-emerald-500 bg-emerald-50":"border-gray-200"}`,children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-xl",children:_(y.type)}),d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold text-gray-900 capitalize",children:y.type}),y.isDefault&&d.jsx("span",{className:"ml-2 bg-emerald-500 text-white text-xs px-2 py-1 rounded-full",children:"Default"})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>x(y),className:"p-2 text-gray-500 hover:text-emerald-600",children:d.jsx(vC,{className:"w-4 h-4"})}),r.length>1&&d.jsx("button",{onClick:()=>S(y.id),className:"p-2 text-gray-500 hover:text-red-600",children:d.jsx(wC,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"space-y-1 mb-4 text-sm text-gray-700",children:[d.jsxs("p",{children:[d.jsx("strong",{children:y.name}),"  ",y.phone]}),d.jsx("p",{children:y.address}),y.landmark&&d.jsxs("p",{children:["Landmark: ",y.landmark]}),d.jsxs("p",{children:["Pincode: ",y.pincode]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:()=>{n(y),e("/payment")},className:"flex-1 bg-emerald-500 text-white py-3 px-4 rounded-lg",children:"Deliver Here"}),!y.isDefault&&d.jsx("button",{onClick:()=>P(y.id),className:"px-4 py-3 border border-emerald-500 text-emerald-600 rounded-lg",children:"Set Default"})]})]},y.id))})]})]})}function i6(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Tp=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Tp(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Tp(r)(n)}}}},o6=(t,e)=>(n,r,s)=>{let i={storage:i6(()=>localStorage),partialize:S=>S,version:0,merge:(S,P)=>({...P,...S}),...e},o=!1;const a=new Set,l=new Set;let u=i.storage;if(!u)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...S)},r,s);const h=()=>{const S=i.partialize({...r()});return u.setItem(i.name,{state:S,version:i.version})},f=s.setState;s.setState=(S,P)=>{f(S,P),h()};const m=t((...S)=>{n(...S),h()},r,s);s.getInitialState=()=>m;let v;const x=()=>{var S,P;if(!u)return;o=!1,a.forEach(y=>{var w;return y((w=r())!=null?w:m)});const _=((P=i.onRehydrateStorage)==null?void 0:P.call(i,(S=r())!=null?S:m))||void 0;return Tp(u.getItem.bind(u))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate){const w=i.migrate(y.state,y.version);return w instanceof Promise?w.then(N=>[!0,N]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var w;const[N,O]=y;if(v=i.merge(O,(w=r())!=null?w:m),n(v,!0),N)return h()}).then(()=>{_==null||_(v,void 0),v=r(),o=!0,l.forEach(y=>y(v))}).catch(y=>{_==null||_(void 0,y)})};return s.persist={setOptions:S=>{i={...i,...S},S.storage&&(u=S.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(l.add(S),()=>{l.delete(S)})},i.skipHydration||x(),v||m},a6=o6,l6={name:"Village Store",ownerName:"Store Owner",phone:"+9198989898",address:"Khukhundoo Store",whatsappNumber:"+917617028576"},sb=gg()(a6(t=>({store:l6,setStore:e=>t({store:e})}),{name:"village-fresh-store"}));function c6(){const t=Ke(),{cart:e,clearCart:n}=xt(),{store:r,setStore:s}=sb(),{selectedAddress:i,paymentMethod:o,paymentDetails:a,deliveryType:l,resetOrderFlow:u,setDeliveryType:h}=rl(),f=e.reduce((_,y)=>_+y.product.price*y.quantity,0),m=f>=99?0:20,v=f+m,x=`VF${Date.now()}`;L.useEffect(()=>{(!i||!o||!r)&&t("/confirm-order")},[i,o,r,t]);const S=()=>{if(!i||!o||!r)return;let _="";const y=`VF${Date.now()}`,w=l==="instant"?" Instant Delivery (Extra charges may apply)":" Scheduled Delivery (6 PM - 8 PM) Free";o==="upi"?_=`
 *Order Confirmation - ${r.name}*

 *Order ID:* ${y}
 *Payment:* UPI Payment Completed
 *Amount Paid:* ${v}
 *Transaction ID:* ${a==null?void 0:a.transactionId}

*Delivery Address:*
   ${i.name}
   ${i.address}, ${i.pincode}
   Phone: ${i.phone}

 *Order Details:*
${e.map(N=>` ${N.product.name} - ${N.quantity} ${N.product.unit} = ${N.product.price*N.quantity}`).join(`
`)}

 *UPI ID:* ${a==null?void 0:a.upiId}
 *Time:* ${new Date().toLocaleString("en-IN")}
 *Delivery Type:* ${w}

 Please confirm my order and share delivery details.
`.trim():_=tb(e,r,v,i,o,a,y)+`

 *Delivery Type:* ${w}
    Please confirm this order and let me know the delivery time.`,nb(r.whatsappNumber,_),n(),u(),t("/shop")},P=()=>{navigator.clipboard.writeText(x)};return d.jsx("div",{className:"min-h-screen bg-white",children:d.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(Ff,{className:"w-10 h-10 text-green-600"})}),d.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Order ",o==="upi"?"Placed":"Confirmed","!"]}),d.jsx("p",{className:"text-gray-600",children:o==="upi"?"Your payment has been processed successfully":"Your order has been placed successfully"})]}),d.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 mb-6",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Choose Delivery Time"}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:()=>h("instant"),className:`px-4 py-2 rounded-lg font-medium ${l==="instant"?"bg-green-500 text-white":"bg-white border border-gray-300 text-gray-700"}`,children:"Instant Delivery (20)"}),d.jsx("button",{onClick:()=>h("schedule"),className:`px-4 py-2 rounded-lg font-medium ${l==="schedule"?"bg-green-500 text-white":"bg-white border border-gray-300 text-gray-700"}`,children:"Schedule 68 PM (Free)"})]})]}),d.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Order ID"}),d.jsx("p",{className:"font-bold text-lg text-gray-900",children:x})]}),d.jsx("button",{onClick:P,className:"p-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:d.jsx(k1,{className:"w-4 h-4 text-gray-600"})})]})}),d.jsxs("div",{className:`rounded-xl p-4 mb-6 ${o==="upi"?"bg-green-50 border border-green-200":"bg-blue-50 border border-blue-200"}`,children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Payment Details"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Method"}),d.jsx("span",{className:"font-medium text-gray-900",children:o==="upi"?"UPI":"Cash on Delivery"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Amount"}),d.jsxs("span",{className:"font-medium text-gray-900",children:["",v]})]}),o==="upi"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Transaction ID"}),d.jsx("span",{className:"font-medium text-gray-900",children:a.transactionId})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Status"}),d.jsx("span",{className:"font-medium text-green-600",children:" Completed"})]})]})]})]}),d.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 mb-6",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Delivery Time"}),d.jsx("div",{className:"text-sm text-gray-700",children:l==="instant"?" Instant Delivery (additional charge may apply)":" Scheduled Delivery (between 6 PM - 8 PM)"})]}),d.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Delivery Address"}),d.jsxs("div",{className:"text-sm text-gray-600",children:[d.jsx("p",{className:"font-medium text-gray-900",children:i==null?void 0:i.name}),d.jsx("p",{children:i==null?void 0:i.address}),(i==null?void 0:i.landmark)&&d.jsxs("p",{children:["Landmark: ",i==null?void 0:i.landmark]}),d.jsx("p",{children:i==null?void 0:i.phone}),d.jsxs("p",{children:["Pincode: ",i==null?void 0:i.pincode]})]})]}),d.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Items"}),d.jsx("div",{className:"space-y-3",children:e.map(_=>d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("img",{src:_.product.image,alt:_.product.name,className:"w-12 h-12 object-cover rounded-lg"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-900 text-sm",children:_.product.name}),d.jsxs("p",{className:"text-xs text-gray-600",children:[_.quantity,"  ",_.product.price," = ",_.product.price*_.quantity]})]})]},_.product.id))})]}),d.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4 mb-6",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"What's Next?"}),d.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[d.jsx("p",{children:" Send your order to the store via WhatsApp"}),d.jsx("p",{children:" Store confirms order & delivery time"}),d.jsx("p",{children:" Enjoy fresh delivery "})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("button",{onClick:S,className:"w-full bg-green-500 hover:bg-green-600 text-white py-4 px-6 rounded-xl font-semibold flex items-center justify-center space-x-2",children:[d.jsx(C1,{className:"w-5 h-5"}),d.jsx("span",{children:"Send Order to Store via WhatsApp"})]}),d.jsxs("button",{onClick:()=>t("/home"),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-4 px-6 rounded-xl font-semibold flex items-center justify-center space-x-2",children:[d.jsx(P1,{className:"w-5 h-5"}),d.jsx("span",{children:"Back to Home"})]})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("p",{className:"text-xs text-gray-500",children:["Need help? Contact us at ",(r==null?void 0:r.phone)||"N/A"]})})]})})}function u6(){const{store:t,setStore:e}=sb(),{cart:n,clearCart:r}=xt(),{selectedAddress:s,setPayment:i}=rl(),o=Ke(),[a,l]=L.useState(null),[u,h]=L.useState("merchant@paytm"),[f,m]=L.useState(!1),[v,x]=L.useState(!1),S=n.reduce((T,E)=>T+E.product.price*E.quantity,0),P=S>=149?0:20,_=S+P,y=()=>{navigator.clipboard.writeText(u),m(!0),setTimeout(()=>m(!1),2e3)},w=()=>{x(!0);const T=`upi://pay?pa=${u}&pn=${t.name}&am=${_}&cu=INR&tn=Order from VillageFresh`,E=document.createElement("a");E.href=T,E.click(),setTimeout(()=>{i("upi",{upiId:u,amount:_,transactionId:`TXN${Date.now()}`,status:"pending"}),x(!1),o("/confirm-order")},3e3)},N=()=>{i("cod",{amount:_,paymentMethod:"Cash on Delivery"}),o("/confirm-order")},O=[{id:"upi",name:"UPI Payment",description:"Pay using UPI apps like PhonePe, Paytm, GPay",icon:d.jsx(yC,{className:"w-6 h-6"}),color:"bg-blue-50 border-blue-200 text-blue-700"},{id:"cod",name:"Cash on Delivery",description:"Pay when your order is delivered",icon:d.jsx(zv,{className:"w-6 h-6"}),color:"bg-green-50 border-green-200 text-green-700"}],j=()=>{window.history.back()};return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b",children:d.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:j,className:"p-2 text-gray-600 hover:text-gray-900",children:d.jsx(Oi,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Payment"})]})})}),d.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[s&&d.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Deliver To"}),d.jsxs("div",{className:"text-sm text-gray-600",children:[d.jsx("p",{className:"font-medium text-gray-900",children:s.name}),d.jsx("p",{children:s.address}),d.jsx("p",{children:s.phone})]})]}),d.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Order Summary"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[n.map(T=>d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{children:[T.product.name,"  ",T.quantity]}),d.jsxs("span",{children:["",T.product.price*T.quantity]})]},T.product.id)),d.jsxs("div",{className:"border-t pt-2 mt-2 space-y-1",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Subtotal"}),d.jsxs("span",{children:["",S]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Delivery"}),d.jsx("span",{children:P===0?"FREE":`${P}`})]}),d.jsxs("div",{className:"flex justify-between font-semibold text-lg pt-2",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{className:"text-emerald-600",children:["",_]})]})]})]})]}),d.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Choose Payment Method"}),d.jsx("div",{className:"space-y-4 mb-6",children:O.map(T=>d.jsxs("button",{onClick:()=>l(T.id),className:`w-full flex items-center space-x-3 p-4 rounded-xl border-2 ${a===T.id?"border-emerald-500 bg-emerald-50":"border-gray-200"}`,children:[d.jsx("div",{className:`p-2 rounded-lg ${T.color}`,children:T.icon}),d.jsxs("div",{className:"flex-1 text-left",children:[d.jsx("p",{className:"font-medium",children:T.name}),d.jsx("p",{className:"text-sm text-gray-500",children:T.description})]}),a===T.id&&d.jsx(Ff,{className:"text-emerald-600 w-5 h-5"})]},T.id))}),a==="upi"&&d.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UPI ID"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("input",{className:"flex-1 border border-gray-300 px-3 py-2 rounded-lg",value:u,onChange:T=>h(T.target.value)}),d.jsx("button",{onClick:y,className:"bg-blue-600 text-white p-2 rounded-lg",children:f?d.jsx(Ff,{className:"w-4 h-4"}):d.jsx(k1,{className:"w-4 h-4"})})]}),d.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Amount: ",_,"  You'll be redirected to your UPI app"]})]}),a==="cod"&&d.jsxs("div",{className:"bg-green-50 p-4 rounded-xl mb-6 text-sm text-gray-700",children:[d.jsxs("p",{children:["Pay ",_," in cash when your order is delivered."]}),d.jsx("p",{className:"text-xs mt-1 text-gray-500",children:"Please keep exact change ready."})]}),a&&d.jsx("button",{onClick:a==="upi"?w:N,disabled:v,className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white py-4 rounded-xl font-semibold flex justify-center items-center space-x-2",children:v?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-b-transparent"}),d.jsx("span",{children:"Processing..."})]}):a==="upi"?d.jsxs(d.Fragment,{children:[d.jsx(aC,{className:"w-5 h-5"}),d.jsxs("span",{children:["Pay ",_," via UPI"]})]}):d.jsxs(d.Fragment,{children:[d.jsx(zv,{className:"w-5 h-5"}),d.jsx("span",{children:"Place Order (COD)"})]})})]})]})}const d6=()=>{const t=Ke(),{addToCart:e,updateQuantity:n}=xt(),[r,s]=L.useState([]);return d.jsxs(eC,{children:[d.jsx(lt,{path:"/",element:d.jsx(j1,{})}),d.jsx(lt,{path:"/auth",element:d.jsx(dS,{})}),d.jsx(lt,{path:"/home",element:d.jsx(Mn,{children:d.jsx(e6,{})})}),d.jsx(lt,{path:"/shop",element:d.jsx(Mn,{children:d.jsx(q3,{})})}),d.jsx(lt,{path:"/fashion",element:d.jsx(Mn,{children:d.jsx(Z3,{})})}),d.jsx(lt,{path:"/beauty",element:d.jsx(Mn,{children:d.jsx(Y3,{})})}),d.jsx(lt,{path:"/search",element:d.jsx(Mn,{children:d.jsx(r6,{user:null,onBack:()=>t(-1),onProductClick:i=>t(`/shop/product/${i.id}`),cart:r,onAddToCart:e,onUpdateQuantity:n})})}),d.jsx(lt,{path:"/delivery-address",element:d.jsx(s6,{})}),d.jsx(lt,{path:"/payment",element:d.jsx(u6,{})}),d.jsx(lt,{path:"/confirm-order",element:d.jsx(c6,{})}),d.jsx(lt,{path:"/shop/product/:id",element:d.jsx(Mn,{children:d.jsx(nc,{})})}),d.jsx(lt,{path:"/fashion/product/:id",element:d.jsx(Mn,{children:d.jsx(nc,{})})}),d.jsx(lt,{path:"/beauty/product/:id",element:d.jsx(Mn,{children:d.jsx(nc,{})})}),d.jsx(lt,{path:"/product/:id",element:d.jsx(Mn,{children:d.jsx(nc,{})})}),d.jsx(lt,{path:"/admin",element:d.jsx(G3,{children:d.jsx(eb,{})})})]})};function h6({message:t,visible:e}){return e?d.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-xl shadow-lg z-50 text-sm",children:t}):null}function f6(t=2500){const[e,n]=L.useState(""),[r,s]=L.useState(!1);return{message:e,visible:r,showToast:o=>{n(o),s(!0),setTimeout(()=>s(!1),t)}}}function p6(){const[t,e]=L.useState(null),[n,r]=L.useState(!1);L.useEffect(()=>{const i=o=>{o.preventDefault(),m6()&&(e(o),r(!0))};return window.addEventListener("beforeinstallprompt",i),()=>{window.removeEventListener("beforeinstallprompt",i)}},[]);const s=()=>{t&&(t.prompt(),t.userChoice.then(()=>e(null))),r(!1)};return n?d.jsxs("div",{className:"fixed bottom-4 left-4 right-4 z-50 bg-white border rounded-xl p-4 shadow-lg flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between max-w-md mx-auto",children:[d.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Install the app for a faster experience!"}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 text-sm hover:text-gray-700",children:"Not now"}),d.jsx("button",{onClick:s,className:"bg-green-500 text-white text-sm px-3 py-1 rounded hover:bg-green-600",children:"Install"})]})]}):null}function m6(){const t=navigator.userAgent.toLowerCase();return t.includes("android")||t.includes("windows")}function g6(){const{message:t,visible:e,showToast:n}=f6(),r=xt(s=>s.setToastHandler);return L.useEffect(()=>{r(n)},[r,n]),d.jsxs(rC,{children:[d.jsx(d6,{}),d.jsx(h6,{message:t,visible:e}),d.jsx(p6,{})]})}function y6(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log(" Service Worker registered: ",e)}).catch(e=>{console.error(" Service Worker registration failed:",e)})})}f1(document.getElementById("root")).render(d.jsx(L.StrictMode,{children:d.jsx(g6,{})}));y6();
